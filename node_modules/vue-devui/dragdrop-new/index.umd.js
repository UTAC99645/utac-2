(function(u,m){typeof exports=="object"&&typeof module!="undefined"?m(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],m):(u=typeof globalThis!="undefined"?globalThis:u||self,m(u.index={},u.Vue))})(this,function(u,m){"use strict";var Ir=Object.defineProperty;var Cr=(u,m,N)=>m in u?Ir(u,m,{enumerable:!0,configurable:!0,writable:!0,value:N}):u[m]=N;var Ce=(u,m,N)=>(Cr(u,typeof m!="symbol"?m+"":m,N),N);var N=function(i,e){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},N(i,e)};function L(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Dt(i,e,t,r){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):n(d.value).then(a,l)}c((r=r.apply(i,e||[])).next())})}function Oe(i,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(d){c=[6,d],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function W(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var r=t.call(i),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Y(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,s;r<n;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return i.concat(s||Array.prototype.slice.call(e))}function U(i){return this instanceof U?(this.v=i,this):new U(i)}function mt(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(i,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(g){r[g]&&(n[g]=function(S){return new Promise(function(b,D){s.push([g,S,b,D])>1||a(g,S)})})}function a(g,S){try{l(r[g](S))}catch(b){h(s[0][3],b)}}function l(g){g.value instanceof U?Promise.resolve(g.value.v).then(c,d):h(s[0][2],g)}function c(g){a("next",g)}function d(g){a("throw",g)}function h(g,S){g(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function St(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof W=="function"?W(i):i[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){o=i[s](o),n(a,l,o.done,o.value)})}}function n(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}typeof SuppressedError=="function"&&SuppressedError;function p(i){return typeof i=="function"}function Te(i){var e=function(r){Error.call(r),r.stack=new Error().stack},t=i(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var de=Te(function(i){return function(t){i(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function ie(i,e){if(i){var t=i.indexOf(e);0<=t&&i.splice(t,1)}}var C=function(){function i(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return i.prototype.unsubscribe=function(){var e,t,r,n,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=W(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(D){e={error:D}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(p(d))try{d()}catch(D){s=D instanceof de?D.errors:[D]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var g=W(h),S=g.next();!S.done;S=g.next()){var b=S.value;try{Pe(b)}catch(D){s=s!=null?s:[],D instanceof de?s=Y(Y([],K(s)),K(D.errors)):s.push(D)}}}catch(D){r={error:D}}finally{try{S&&!S.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}}if(s)throw new de(s)}},i.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Pe(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},i.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},i.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},i.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ie(t,e)},i.prototype.remove=function(e){var t=this._finalizers;t&&ie(t,e),e instanceof i&&e._removeParent(this)},i.EMPTY=function(){var e=new i;return e.closed=!0,e}(),i}(),Ae=C.EMPTY;function xe(i){return i instanceof C||i&&"closed"in i&&p(i.remove)&&p(i.add)&&p(i.unsubscribe)}function Pe(i){p(i)?i():i.unsubscribe()}var he={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ue={setTimeout:function(i,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var n=ue.delegate;return n!=null&&n.setTimeout?n.setTimeout.apply(n,Y([i,e],K(t))):setTimeout.apply(void 0,Y([i,e],K(t)))},clearTimeout:function(i){var e=ue.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(i)},delegate:void 0};function _e(i){ue.setTimeout(function(){throw i})}function Ne(){}var ne=null;function se(i){if(he.useDeprecatedSynchronousErrorHandling){var e=!ne;if(e&&(ne={errorThrown:!1,error:null}),i(),e){var t=ne,r=t.errorThrown,n=t.error;if(ne=null,r)throw n}}else i()}var ge=function(i){L(e,i);function e(t){var r=i.call(this)||this;return r.isStopped=!1,t?(r.destination=t,xe(t)&&t.add(r)):r.destination=wt,r}return e.create=function(t,r,n){return new pe(t,r,n)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(C),yt=Function.prototype.bind;function fe(i,e){return yt.call(i,e)}var bt=function(){function i(e){this.partialObserver=e}return i.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(r){oe(r)}},i.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(r){oe(r)}else oe(e)},i.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){oe(t)}},i}(),pe=function(i){L(e,i);function e(t,r,n){var s=i.call(this)||this,o;if(p(t)||!t)o={next:t!=null?t:void 0,error:r!=null?r:void 0,complete:n!=null?n:void 0};else{var a;s&&he.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&fe(t.next,a),error:t.error&&fe(t.error,a),complete:t.complete&&fe(t.complete,a)}):o=t}return s.destination=new bt(o),s}return e}(ge);function oe(i){_e(i)}function Et(i){throw i}var wt={closed:!0,next:Ne,error:Et,complete:Ne},ve=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ae(i){return i}function It(i){return i.length===0?ae:i.length===1?i[0]:function(t){return i.reduce(function(r,n){return n(r)},t)}}var T=function(){function i(e){e&&(this._subscribe=e)}return i.prototype.lift=function(e){var t=new i;return t.source=this,t.operator=e,t},i.prototype.subscribe=function(e,t,r){var n=this,s=Ot(e)?e:new pe(e,t,r);return se(function(){var o=n,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?n._subscribe(s):n._trySubscribe(s))}),s},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},i.prototype.forEach=function(e,t){var r=this;return t=Le(t),new t(function(n,s){var o=new pe({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:n});r.subscribe(o)})},i.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},i.prototype[ve]=function(){return this},i.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return It(e)(this)},i.prototype.toPromise=function(e){var t=this;return e=Le(e),new e(function(r,n){var s;t.subscribe(function(o){return s=o},function(o){return n(o)},function(){return r(s)})})},i.create=function(e){return new i(e)},i}();function Le(i){var e;return(e=i!=null?i:he.Promise)!==null&&e!==void 0?e:Promise}function Ct(i){return i&&p(i.next)&&p(i.error)&&p(i.complete)}function Ot(i){return i&&i instanceof ge||Ct(i)&&xe(i)}function Tt(i){return p(i==null?void 0:i.lift)}function R(i){return function(e){if(Tt(e))return e.lift(function(t){try{return i(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function P(i,e,t,r,n){return new At(i,e,t,r,n)}var At=function(i){L(e,i);function e(t,r,n,s,o,a){var l=i.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(d){t.error(d)}}:i.prototype._next,l._error=s?function(c){try{s(c)}catch(d){t.error(d)}finally{this.unsubscribe()}}:i.prototype._error,l._complete=n?function(){try{n()}catch(c){t.error(c)}finally{this.unsubscribe()}}:i.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;i.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(ge),xt=Te(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),x=function(i){L(e,i);function e(){var t=i.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var r=new Re(this,this);return r.operator=t,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new xt},e.prototype.next=function(t){var r=this;se(function(){var n,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=W(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(t)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}}})},e.prototype.error=function(t){var r=this;se(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var n=r.observers;n.length;)n.shift().error(t)}})},e.prototype.complete=function(){var t=this;se(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),i.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var r=this,n=this,s=n.hasError,o=n.isStopped,a=n.observers;return s||o?Ae:(this.currentObservers=null,a.push(t),new C(function(){r.currentObservers=null,ie(a,t)}))},e.prototype._checkFinalizedStatuses=function(t){var r=this,n=r.hasError,s=r.thrownError,o=r.isStopped;n?t.error(s):o&&t.complete()},e.prototype.asObservable=function(){var t=new T;return t.source=this,t},e.create=function(t,r){return new Re(t,r)},e}(T),Re=function(i){L(e,i);function e(t,r){var n=i.call(this)||this;return n.destination=t,n.source=r,n}return e.prototype.next=function(t){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.next)===null||n===void 0||n.call(r,t)},e.prototype.error=function(t){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.error)===null||n===void 0||n.call(r,t)},e.prototype.complete=function(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)},e.prototype._subscribe=function(t){var r,n;return(n=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&n!==void 0?n:Ae},e}(x),Pt=function(i){L(e,i);function e(t){var r=i.call(this)||this;return r._value=t,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var r=i.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},e.prototype.getValue=function(){var t=this,r=t.hasError,n=t.thrownError,s=t._value;if(r)throw n;return this._throwIfClosed(),s},e.prototype.next=function(t){i.prototype.next.call(this,this._value=t)},e}(x),Fe={now:function(){return(Fe.delegate||Date).now()},delegate:void 0},_t=function(i){L(e,i);function e(t,r){return i.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(C),le={setInterval:function(i,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var n=le.delegate;return n!=null&&n.setInterval?n.setInterval.apply(n,Y([i,e],K(t))):setInterval.apply(void 0,Y([i,e],K(t)))},clearInterval:function(i){var e=le.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(i)},delegate:void 0},Nt=function(i){L(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return e.prototype.schedule=function(t,r){var n;if(r===void 0&&(r=0),this.closed)return this;this.state=t;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,n){return n===void 0&&(n=0),le.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,r,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return r;r!=null&&le.clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,r);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var n=!1,s;try{this.work(t)}catch(o){n=!0,s=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,n=t.scheduler,s=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ie(s,this),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null,i.prototype.unsubscribe.call(this)}},e}(_t),Me=function(){function i(e,t){t===void 0&&(t=i.now),this.schedulerActionCtor=e,this.now=t}return i.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},i.now=Fe.now,i}(),Lt=function(i){L(e,i);function e(t,r){r===void 0&&(r=Me.now);var n=i.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,n){for(;t=r.shift();)t.unsubscribe();throw n}},e}(Me),De=new Lt(Nt),Rt=De,Ft=new T(function(i){return i.complete()});function Be(i){return i&&p(i.schedule)}function Ke(i){return i[i.length-1]}function Mt(i){return Be(Ke(i))?i.pop():void 0}function Bt(i,e){return typeof Ke(i)=="number"?i.pop():e}var me=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function He(i){return p(i==null?void 0:i.then)}function Ve(i){return p(i[ve])}function Ge(i){return Symbol.asyncIterator&&p(i==null?void 0:i[Symbol.asyncIterator])}function Ye(i){return new TypeError("You provided "+(i!==null&&typeof i=="object"?"an invalid object":"'"+i+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Kt(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ke=Kt();function je(i){return p(i==null?void 0:i[ke])}function We(i){return mt(this,arguments,function(){var t,r,n,s;return Oe(this,function(o){switch(o.label){case 0:t=i.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,U(t.read())];case 3:return r=o.sent(),n=r.value,s=r.done,s?[4,U(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,U(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Ue(i){return p(i==null?void 0:i.getReader)}function H(i){if(i instanceof T)return i;if(i!=null){if(Ve(i))return Ht(i);if(me(i))return Vt(i);if(He(i))return Gt(i);if(Ge(i))return qe(i);if(je(i))return Yt(i);if(Ue(i))return kt(i)}throw Ye(i)}function Ht(i){return new T(function(e){var t=i[ve]();if(p(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Vt(i){return new T(function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function Gt(i){return new T(function(e){i.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,_e)})}function Yt(i){return new T(function(e){var t,r;try{for(var n=W(i),s=n.next();!s.done;s=n.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.complete()})}function qe(i){return new T(function(e){jt(i,e).catch(function(t){return e.error(t)})})}function kt(i){return qe(We(i))}function jt(i,e){var t,r,n,s;return Dt(this,void 0,void 0,function(){var o,a;return Oe(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=St(i),l.label=1;case 1:return[4,t.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),n={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function V(i,e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=!1);var s=e.schedule(function(){t(),n?i.add(this.schedule(null,r)):this.unsubscribe()},r);if(i.add(s),!n)return s}function Xe(i,e){return e===void 0&&(e=0),R(function(t,r){t.subscribe(P(r,function(n){return V(r,i,function(){return r.next(n)},e)},function(){return V(r,i,function(){return r.complete()},e)},function(n){return V(r,i,function(){return r.error(n)},e)}))})}function ze(i,e){return e===void 0&&(e=0),R(function(t,r){r.add(i.schedule(function(){return t.subscribe(r)},e))})}function Wt(i,e){return H(i).pipe(ze(e),Xe(e))}function Ut(i,e){return H(i).pipe(ze(e),Xe(e))}function qt(i,e){return new T(function(t){var r=0;return e.schedule(function(){r===i.length?t.complete():(t.next(i[r++]),t.closed||this.schedule())})})}function Xt(i,e){return new T(function(t){var r;return V(t,e,function(){r=i[ke](),V(t,e,function(){var n,s,o;try{n=r.next(),s=n.value,o=n.done}catch(a){t.error(a);return}o?t.complete():t.next(s)},0,!0)}),function(){return p(r==null?void 0:r.return)&&r.return()}})}function Qe(i,e){if(!i)throw new Error("Iterable cannot be null");return new T(function(t){V(t,e,function(){var r=i[Symbol.asyncIterator]();V(t,e,function(){r.next().then(function(n){n.done?t.complete():t.next(n.value)})},0,!0)})})}function zt(i,e){return Qe(We(i),e)}function Qt(i,e){if(i!=null){if(Ve(i))return Wt(i,e);if(me(i))return qt(i,e);if(He(i))return Ut(i,e);if(Ge(i))return Qe(i,e);if(je(i))return Xt(i,e);if(Ue(i))return zt(i,e)}throw Ye(i)}function Zt(i,e){return e?Qt(i,e):H(i)}function Jt(i){return i instanceof Date&&!isNaN(i)}function Ze(i,e){return R(function(t,r){var n=0;t.subscribe(P(r,function(s){r.next(i.call(e,s,n++))}))})}var $t=Array.isArray;function er(i,e){return $t(e)?i.apply(void 0,Y([],K(e))):i(e)}function tr(i){return Ze(function(e){return er(i,e)})}function rr(i,e,t,r,n,s,o,a){var l=[],c=0,d=0,h=!1,g=function(){h&&!l.length&&!c&&e.complete()},S=function(D){return c<r?b(D):l.push(D)},b=function(D){s&&e.next(D),c++;var A=!1;H(t(D,d++)).subscribe(P(e,function(I){n==null||n(I),s?S(I):e.next(I)},function(){A=!0},void 0,function(){if(A)try{c--;for(var I=function(){var ee=l.shift();o?V(e,o,function(){return b(ee)}):b(ee)};l.length&&c<r;)I();g()}catch(ee){e.error(ee)}}))};return i.subscribe(P(e,S,function(){h=!0,g()})),function(){a==null||a()}}function Se(i,e,t){return t===void 0&&(t=1/0),p(e)?Se(function(r,n){return Ze(function(s,o){return e(r,s,n,o)})(H(i(r,n)))},t):(typeof e=="number"&&(t=e),R(function(r,n){return rr(r,n,i,t)}))}function ir(i){return i===void 0&&(i=1/0),Se(ae,i)}var nr=["addListener","removeListener"],sr=["addEventListener","removeEventListener"],or=["on","off"];function E(i,e,t,r){if(p(t)&&(r=t,t=void 0),r)return E(i,e,t).pipe(tr(r));var n=K(cr(i)?sr.map(function(a){return function(l){return i[a](e,l,t)}}):ar(i)?nr.map(Je(i,e)):lr(i)?or.map(Je(i,e)):[],2),s=n[0],o=n[1];if(!s&&me(i))return Se(function(a){return E(a,e,t)})(H(i));if(!s)throw new TypeError("Invalid event target");return new T(function(a){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.next(1<c.length?c:c[0])};return s(l),function(){return o(l)}})}function Je(i,e){return function(t){return function(r){return i[t](e,r)}}}function ar(i){return p(i.addListener)&&p(i.removeListener)}function lr(i){return p(i.on)&&p(i.off)}function cr(i){return p(i.addEventListener)&&p(i.removeEventListener)}function dr(i,e,t){i===void 0&&(i=0),t===void 0&&(t=Rt);var r=-1;return e!=null&&(Be(e)?t=e:r=e),new T(function(n){var s=Jt(i)?+i-t.now():i;s<0&&(s=0);var o=0;return t.schedule(function(){n.closed||(n.next(o++),0<=r?this.schedule(void 0,r):n.complete())},s)})}function ye(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=Mt(i),r=Bt(i,1/0),n=i;return n.length?n.length===1?H(n[0]):ir(r)(Zt(n,t)):Ft}function hr(i,e){return R(function(t,r){var n=0;t.subscribe(P(r,function(s){return i.call(e,s,n++)&&r.next(s)}))})}function ur(i,e){return e===void 0&&(e=De),R(function(t,r){var n=null,s=null,o=null,a=function(){if(n){n.unsubscribe(),n=null;var c=s;s=null,r.next(c)}};function l(){var c=o+i,d=e.now();if(d<c){n=this.schedule(void 0,c-d),r.add(n);return}a()}t.subscribe(P(r,function(c){s=c,o=e.now(),n||(n=e.schedule(l,i),r.add(n))},function(){a(),r.complete()},void 0,function(){s=n=null}))})}function gr(i,e){return e===void 0&&(e=ae),i=i!=null?i:fr,R(function(t,r){var n,s=!0;t.subscribe(P(r,function(o){var a=e(o);(s||!i(n,a))&&(s=!1,n=a,r.next(o))}))})}function fr(i,e){return i===e}function $e(i,e,t){var r=p(i)||e||t?{next:i,error:e,complete:t}:i;return r?R(function(n,s){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;n.subscribe(P(s,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},function(l){var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},function(){var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ae}function pr(i,e){return R(function(t,r){var n=e!=null?e:{},s=n.leading,o=s===void 0?!0:s,a=n.trailing,l=a===void 0?!1:a,c=!1,d=null,h=null,g=!1,S=function(){h==null||h.unsubscribe(),h=null,l&&(A(),g&&r.complete())},b=function(){h=null,g&&r.complete()},D=function(I){return h=H(i(I)).subscribe(P(r,S,b))},A=function(){if(c){c=!1;var I=d;d=null,r.next(I),!g&&D(I)}};t.subscribe(P(r,function(I){c=!0,d=I,!(h&&!h.closed)&&(o?A():D(I))},function(){g=!0,!(l&&c&&h&&!h.closed)&&r.complete()}))})}function ce(i,e,t){e===void 0&&(e=De);var r=dr(i,e);return pr(function(){return r},t)}class f{static matches(e,t){const r=Element.prototype;return(r.matches||r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector||function(s){const o=(this.document||this.ownerDocument).querySelectorAll(s);let a=o.length;for(;--a>=0&&o.item(a)!==this;);return a>-1}).call(e,t)}static addClass(e,t){if(t===void 0)return;const r=this.getElementWithValidClassList(e);r&&r.classList.add(t)}static removeClass(e,t){if(t===void 0)return;const r=this.getElementWithValidClassList(e);r&&r.classList.remove(t)}static getElementWithValidClassList(e){const t=e.nativeElement?e.nativeElement:e;return t.classList!==void 0&&t.classList!==null?t:null}static slice(e,t,r){const n=[];let s=e.length;if(s===0)return n;const o=t<0?Math.max(0,t+s):t||0;for(r!==void 0&&(s=r<0?r+s:r);s-- >o;)n[s-o]=e[s];return n}static addElStyles(e,t){if(t instanceof Object)for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Array.isArray(t[r])?t[r].forEach(n=>{e.style[r]=n}):e.style[r]=t[r])}static dispatchEventToUnderElement(e,t,r){const n=t||e.target;n.style.display="none";const{x:s,y:o}={x:e.clientX,y:e.clientY},a=document.elementFromPoint(s,o);if(n.style.display="",!a)return e;const l=document.createEvent("DragEvent");return l.initMouseEvent(r||e.type,!0,!0,window,0,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),l.dataTransfer!==null&&(l.dataTransfer.setData("text",""),l.dataTransfer.effectAllowed=e.dataTransfer.effectAllowed),setTimeout(()=>{a.dispatchEvent(l)},0),e}}function y(i,e){return e[i]}function q(i,e,t){t[i]=e}const v=class{constructor(){if(this.lastClick=0,this.touchstart=e=>{if(this.shouldHandle(e)){if(Date.now()-this.lastClick<v.DBLCLICK&&this.dispatchEvent(e,"dblclick",e.target)){e.preventDefault(),this.reset();return}this.reset();const t=this.closestDraggable(e.target);t&&(this.dragSource=t,this.ptDown=this.getPoint(e),this.lastTouch=e,v.IS_PRESS_HOLD_MODE?this.pressHoldInterval=setTimeout(()=>{this.bindTouchmoveTouchend(e),this.isDragEnabled=!0,this.touchmove(e)},v.PRESS_HOLD_AWAIT):(e.preventDefault(),this.bindTouchmoveTouchend(e)))}},this.touchmoveOnDocument=e=>{if(this.shouldCancelPressHoldMove(e)){this.reset();return}},this.touchmove=e=>{if(this.shouldCancelPressHoldMove(e)){this.reset();return}if(this.shouldHandleMove(e)||this.shouldHandlePressHoldMove(e)){const t=this.getTarget(e);this.dragSource&&!this.img&&this.shouldStartDragging(e)&&(this.dispatchEvent(e,"dragstart",this.dragSource),this.createImage(e)),this.img&&(this.clearDragoverInterval(),this.lastTouch=e,e.preventDefault(),t!==this.lastTarget&&(this.dispatchEvent(e,"dragenter",t),this.dispatchEvent(this.lastTouch,"dragleave",this.lastTarget),this.lastTarget=t),this.moveImage(e),this.isDropZone=this.dispatchEvent(e,"dragover",t),this.setDragoverInterval(e))}},this.touchendOnDocument=e=>{this.shouldHandle(e)&&(this.img||(this.dragSource=null,this.lastClick=Date.now()),this.destroyImage(),this.dragSource&&this.reset())},this.touchend=e=>{this.shouldHandle(e)&&(this.img||(this.dragSource=null,this.lastClick=Date.now()),this.destroyImage(),this.dragSource&&(e.type.indexOf("cancel")<0&&this.isDropZone&&this.dispatchEvent(this.lastTouch,"drop",this.lastTarget),this.dispatchEvent(this.lastTouch,"dragend",this.dragSource),this.reset()))},v.instance)throw new Error("DragDropTouch instance already created.");let i=!1;if(typeof document!="undefined"&&(document.addEventListener("test",()=>{},{get passive(){return i=!0,!0}}),v.isTouchDevice())){const e=document,t=this.touchstart,r=this.touchmoveOnDocument,n=this.touchendOnDocument,s=i?{passive:!1,capture:!1}:!1,o=i?{passive:!0}:!1;e.addEventListener("touchstart",t,s),e.addEventListener("touchmove",r,o),e.addEventListener("touchend",n),e.addEventListener("touchcancel",n),this.touchmoveListener=this.touchmove,this.touchendListener=this.touchend,this.listenerOpt=s}}static getInstance(){return v.instance||(v.instance=new v),v.instance}static isTouchDevice(){var r;if(typeof window=="undefined"||typeof document=="undefined")return!1;const i=document,e=window;let t;if("ontouchstart"in i||"ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch)t=!0;else{const n=document.createElement("fakebody");n.innerHTML+=`
      <style>
        @media (touch-enabled),(-webkit-touch-enabled),(-moz-touch-enabled),(-o-touch-enabled){
          #touch_test {
            top: 42px;
            position: absolute;
          }
        }
      </style>`,document.documentElement.appendChild(n);const s=document.createElement("div");s.id="touch_test",n.appendChild(s),t=s.offsetTop===42,(r=n.parentElement)==null||r.removeChild(n)}return t}bindTouchmoveTouchend(i){this.touchTarget=i.target,i.target.addEventListener("touchmove",this.touchmoveListener,this.listenerOpt),i.target.addEventListener("touchend",this.touchendListener),i.target.addEventListener("touchcancel",this.touchendListener)}removeTouchmoveTouchend(){this.touchTarget&&(this.touchTarget.removeEventListener("touchmove",this.touchmoveListener),this.touchTarget.removeEventListener("touchend",this.touchendListener),this.touchTarget.removeEventListener("touchcancel",this.touchendListener),this.touchTarget=void 0)}shouldHandle(i){return i&&!i.defaultPrevented&&i.touches&&i.touches.length<2}shouldHandleMove(i){return!v.IS_PRESS_HOLD_MODE&&this.shouldHandle(i)}shouldHandlePressHoldMove(i){return v.IS_PRESS_HOLD_MODE&&this.isDragEnabled&&i&&i.touches&&i.touches.length}shouldCancelPressHoldMove(i){return v.IS_PRESS_HOLD_MODE&&!this.isDragEnabled&&this.getDelta(i)>v.PRESS_HOLD_MARGIN}shouldStartDragging(i){const e=this.getDragHandle();if(e&&!this.matchSelector(i.target,e))return!1;const t=this.getDelta(i);return t>v.THRESHOLD||v.IS_PRESS_HOLD_MODE&&t>=v.PRESS_HOLD_THRESHOLD}getDragHandle(){return this.dragSource&&this.dragSource.getAttribute(v.DRAG_HANDLE_ATTR)||""}matchSelector(i,e){if(e){const t=Element.prototype;return(t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(n){const s=(this.document||this.ownerDocument).querySelectorAll(n);let o=s.length;for(;--o>=0&&s.item(o)!==this;);return o>-1}).call(i,e)}return!0}reset(){this.removeTouchmoveTouchend(),this.destroyImage(),this.dragSource=null,this.lastTouch=null,this.lastTarget=null,this.ptDown=null,this.isDragEnabled=!1,this.isDropZone=!1,this.dataTransfer=new v.DataTransfer,clearInterval(this.pressHoldInterval),this.clearDragoverInterval()}getPoint(i,e){return i&&i.touches&&(i=i.touches[0]),{x:e?i.pageX:i.clientX,y:e?i.pageY:i.clientY}}getDelta(i){if(v.IS_PRESS_HOLD_MODE&&!this.ptDown)return 0;const e=this.getPoint(i);return Math.abs(e.x-this.ptDown.x)+Math.abs(e.y-this.ptDown.y)}getTarget(i){const e=this.getPoint(i);let t=document.elementFromPoint(e.x,e.y);for(;t&&getComputedStyle(t).pointerEvents==="none";)t=t.parentElement;return t}createImage(i){this.img&&this.destroyImage();const e=this.imgCustom||this.dragSource;if(this.img=e.cloneNode(!0),this.copyStyle(e,this.img),this.img.style.top=this.img.style.left="-9999px",!this.imgCustom){const t=e.getBoundingClientRect(),r=this.getPoint(i);this.imgOffset={x:r.x-t.left,y:r.y-t.top},this.img.style.opacity=v.OPACITY.toString()}this.moveImage(i),document.body.appendChild(this.img)}destroyImage(){this.img&&this.img.parentElement&&this.img.parentElement.removeChild(this.img),this.img=null,this.imgCustom=null}moveImage(i){requestAnimationFrame(()=>{if(this.img){const e=this.getPoint(i,!0),t=this.img.style;t.position="absolute",t.pointerEvents="none",t.zIndex="999999",t.left=Math.round(e.x-this.imgOffset.x)+"px",t.top=Math.round(e.y-this.imgOffset.y)+"px"}})}copyProps(i,e,t){for(let r=0;r<t.length;r++){const n=t[r];i[n]=e[n]}}copyStyle(i,e){if(v.rmvAttrs.forEach(function(n){e.removeAttribute(n)}),i instanceof HTMLCanvasElement){const n=i,s=e;s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0)}const t=i.querySelectorAll("canvas");if(t.length>0){const n=e.querySelectorAll("canvas");for(let s=0;s<n.length;s++){const o=t[s];n[s].getContext("2d").drawImage(o,0,0)}}const r=getComputedStyle(i);for(let n=0;n<r.length;n++){const s=r[n];s.indexOf("transition")<0&&(e.style[s]=r[s])}e.style.pointerEvents="none";for(let n=0;n<i.children.length;n++)this.copyStyle(i.children[n],e.children[n])}dispatchEvent(i,e,t){if(i&&t){const r=document.createEvent("Event"),n=i.touches?i.touches[0]:i;r.initEvent(e,!0,!0);const s={button:0,which:0,buttons:1,dataTransfer:this.dataTransfer};return this.copyProps(r,i,v.kbdProps),this.copyProps(r,n,v.ptProps),this.copyProps(r,{fromTouch:!0},["fromTouch"]),this.copyProps(r,s,Object.keys(s)),t.dispatchEvent(r),r.defaultPrevented}return!1}closestDraggable(i){for(;i;i=i.parentElement)if(i.hasAttribute("draggable")&&i.draggable)return i;return null}setDragoverInterval(i){this.dragoverTimer=setInterval(()=>{const e=this.getTarget(i);e!==this.lastTarget&&(this.dispatchEvent(i,"dragenter",e),this.dispatchEvent(i,"dragleave",this.lastTarget),this.lastTarget=e),this.isDropZone=this.dispatchEvent(i,"dragover",e)},v.DRAG_OVER_TIME)}clearDragoverInterval(){this.dragoverTimer&&(clearInterval(this.dragoverTimer),this.dragoverTimer=void 0)}};let w=v;w.THRESHOLD=5,w.OPACITY=.5,w.DBLCLICK=500,w.DRAG_OVER_TIME=300,w.CTX_MENU=900,w.IS_PRESS_HOLD_MODE=!0,w.PRESS_HOLD_AWAIT=400,w.PRESS_HOLD_MARGIN=25,w.PRESS_HOLD_THRESHOLD=0,w.DRAG_HANDLE_ATTR="data-drag-handle-selector",w.rmvAttrs="id,class,style,draggable".split(","),w.kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),w.ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),w.instance=null,(i=>{class e{get dropEffect(){return this._dropEffect}set dropEffect(r){this._dropEffect=r}get effectAllowed(){return this._effectAllowed}set effectAllowed(r){this._effectAllowed=r}get types(){return Object.keys(this._data)}constructor(){this._dropEffect="move",this._effectAllowed="all",this._data={}}clearData(r){r!==null?delete this._data[r]:this._data=null}getData(r){return this._data[r]||""}setData(r,n){this._data[r]=n}setDragImage(r,n,s){const o=i.getInstance();o.imgCustom=r,o.imgOffset={x:n,y:s}}}i.DataTransfer=e})(w||(w={}));class O{constructor(){this.dropTargets=[],this.dropEvent=new x,this.dragEndEvent=new x,this.dragStartEvent=new x,this.subscription=new C,this.dragItemParentName="",this.dragItemChildrenName="",this.intersectionObserver=null,this.dragElShowHideEvent=new x,this.followMouse4CloneNode=e=>{const{offsetLeft:t,offsetTop:r}=this.dragOffset,{clientX:n,clientY:s}=e;requestAnimationFrame(()=>{!this.dragCloneNode||(this.dragCloneNode.style.left=n-t+"px",this.dragCloneNode.style.top=s-r+"px")})},this.touchInstance=w.getInstance()}get dragEmptyImage(){return this._dragEmptyImage||(this._dragEmptyImage=new Image,this._dragEmptyImage.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="),this._dragEmptyImage}get document(){return window.document}newSubscription(){return this.subscription.unsubscribe(),this.subscription=new C}enableDraggedCloneNodeFollowMouse(){if(!this.dragCloneNode){if(this.dragItemContainer=this.draggedEl.parentElement,this.dragPreviewDirective&&this.dragPreviewDirective.dragPreviewTemplate?(this.dragPreviewDirective.createPreview(),this.dragCloneNode=this.dragPreviewDirective.getPreviewElement(),this.dragItemContainer=this.document.body):this.dragCloneNode=this.draggedEl.cloneNode(!0),this.dragCloneNode.style.margin="0",this.dragFollowOptions&&this.dragFollowOptions.appendToBody&&(this.dragItemContainer=this.document.body,this.copyStyle(this.draggedEl,this.dragCloneNode)),this.dragItemChildrenName!==""){const r=this.dragItemParentName===""?this.dragCloneNode:this.document.querySelector(this.dragItemParentName),n=r.querySelectorAll(this.dragItemChildrenName);this.interceptChildNode(r,n)}const e=this.draggedEl.querySelectorAll("canvas"),t=this.dragCloneNode.querySelectorAll("canvas");if([].forEach.call(t,(r,n)=>{r.getContext("2d").drawImage(e[n],0,0)}),this.document.addEventListener("dragover",this.followMouse4CloneNode,{capture:!0,passive:!0}),this.dragCloneNode.style.width=this.dragOffset.width+"px",this.dragCloneNode.style.height=this.dragOffset.height+"px",!(this.dragPreviewDirective&&this.dragPreviewDirective.dragPreviewTemplate&&this.dragPreviewDirective.dragPreviewOptions&&this.dragPreviewDirective.dragPreviewOptions.skipBatchPreview)&&this.batchDragging&&this.batchDragData&&this.batchDragData.length>1){const r=this.document.createElement("div");if(r.appendChild(this.dragCloneNode),r.classList.add("batch-dragged-node"),this.batchDragStyle&&this.batchDragStyle.length&&this.batchDragStyle.indexOf("badge")>-1){const n=this.document.createElement("div");n.innerText=String(this.batchDragData.length),n.classList.add("batch-dragged-node-count"),r.style.position="relative";const s={position:"absolute",right:"5px",top:"-12px",height:"24px",width:"24px",borderRadius:"12px",fontSize:"14px",lineHeight:"24px",textAlign:"center",color:"#fff",background:["#5170ff","var(--brand-1, #5170ff)"]};f.addElStyles(n,s),r.appendChild(n)}if(this.batchDragStyle&&this.batchDragStyle.length&&this.batchDragStyle.indexOf("stack")>-1){let n=2;this.batchDragData.length===2&&(n=1);for(let s=0;s<n;s++){const o=this.dragCloneNode.cloneNode(!1),a={position:"absolute",left:-5*(s+1)+"px",top:-5*(s+1)+"px",zIndex:String(-(s+1)),width:this.dragOffset.width+"px",height:this.dragOffset.height+"px",background:"#fff",border:["1px solid #5170ff","1px solid var(--brand-1, #5170ff)"]};f.addElStyles(o,a),r.appendChild(o)}}this.dragCloneNode=r}this.dragCloneNode.classList.add("drag-clone-node"),this.dragPreviewDirective&&this.dragPreviewDirective.dragPreviewTemplate||(this.dragCloneNode.style.width=this.dragOffset.width+"px",this.dragCloneNode.style.height=this.dragOffset.height+"px"),this.dragCloneNode.style.position="fixed",this.dragCloneNode.style.zIndex="1090",this.dragCloneNode.style.pointerEvents="none",this.dragCloneNode.style.top=this.dragOffset.top+"px",this.dragCloneNode.style.left=this.dragOffset.left+"px",this.dragCloneNode.style.willChange="left, top",this.dragItemContainer.appendChild(this.dragCloneNode),setTimeout(()=>{this.draggedEl&&(this.draggedEl.style.display="none",this.dragElShowHideEvent.next(!1),this.dragOriginPlaceholder&&(this.dragOriginPlaceholder.style.display="block"))})}}disableDraggedCloneNodeFollowMouse(){this.dragCloneNode&&(this.document.removeEventListener("dragover",this.followMouse4CloneNode,{capture:!0}),this.dragItemContainer.removeChild(this.dragCloneNode),this.draggedEl.style.display="",this.dragElShowHideEvent.next(!0)),this.dragPreviewDirective&&this.dragPreviewDirective.dragPreviewTemplate&&this.dragPreviewDirective.destroyPreview(),this.dragCloneNode=void 0,this.dragItemContainer=void 0,this.intersectionObserver&&this.intersectionObserver.disconnect()}interceptChildNode(e,t){const r={root:e};this.intersectionObserver=new IntersectionObserver(this.setChildNodeHide,r),[].forEach.call(t,n=>{this.intersectionObserver.observe(n)})}setChildNodeHide(e){e.forEach(t=>{const{isIntersecting:r,target:n}=t;r?n.style.display="block":n.style.display="none"})}getBatchDragData(e,t="draggedElFirst"){const r=this.batchDragData.map(n=>n.dragData);if(typeof t=="function")r.sort(t);else if(t==="draggedElFirst"){let n=this.dragData;e&&(n=this.batchDragData.filter(o=>o.identity===e).pop().dragData),r.splice(r.indexOf(n),1),r.splice(0,0,n)}return r}cleanBatchDragData(){const e=this.batchDragData;return this.batchDragData&&(this.batchDragData.filter(t=>t.draggable).map(t=>t.draggable).forEach(t=>{t.batchDraggable.dragData=void 0}),this.batchDragData=void 0,this.batchDragGroup=void 0),e}copyStyle(e,t){["id","class","style","draggable"].forEach(function(n){t.removeAttribute(n)});const r=getComputedStyle(e);for(let n=0;n<r.length;n++){const s=r[n];s.indexOf("transition")<0&&(t.style[s]=r[s])}t.style.pointerEvents="none";for(let n=0;n<e.children.length;n++)this.copyStyle(e.children[n],t.children[n])}}O.TOKEN=Symbol("DRAG_DROP_SERVICE_TOKEN");function vr(){const i=new O;return m.provide(O.TOKEN,new O),i}class F extends x{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let n,s=l=>null,o=()=>null;e&&typeof e=="object"?(n=this.__isAsync?l=>{setTimeout(()=>e.next(l))}:l=>{e.next(l)},e.error&&(s=this.__isAsync?l=>{setTimeout(()=>e.error(l))}:l=>{e.error(l)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(n=this.__isAsync?l=>{setTimeout(()=>e(l))}:l=>{e(l)},t&&(s=this.__isAsync?l=>{setTimeout(()=>t(l))}:l=>{t(l)}),r&&(o=this.__isAsync?()=>{setTimeout(()=>r())}:()=>{r()}));const a=super.subscribe(n,s,o);return e instanceof C&&e.add(a),a}}class et extends F{constructor(){super(...arguments),this._isAsync=!1}get schedulerFns(){return this._schedulerFns}forceCallback(e,t=!1){this.schedulerFns&&this.schedulerFns.size&&(this.schedulerFns.forEach(r=>{r(e)}),t&&this.cleanCallbackFn())}cleanCallbackFn(){this._schedulerFns=void 0}subscribe(e,t,r){let n;return e&&typeof e=="object"?n=this._isAsync?s=>{setTimeout(()=>e.next(s))}:s=>{e.next(s)}:n=this._isAsync?s=>{setTimeout(()=>e(s))}:s=>{e(s)},this._schedulerFns||(this._schedulerFns=new Set),this._schedulerFns.add(n),super.subscribe(e,t,r)}}class Dr{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}class M{constructor(){this.__eventListenerMap=new Map,this.el={nativeElement:null},this.hostBindingMap=void 0,this.hostListenerMap=void 0,this.inputNameMap=void 0,this.outputNameMap=void 0}mounted(){this.hostBindingMap&&this.el.nativeElement&&Object.keys(this.hostBindingMap).forEach(e=>{this[e]!==void 0&&this.hostBinding(this.hostBindingMap[e],e)}),this.hostListenerMap&&this.el.nativeElement&&Object.keys(this.hostListenerMap).forEach(e=>{this[e]&&this.hostListener(this.hostListenerMap[e],e)})}setInput(e){if(!e)return;const t=new Map;Object.keys(e).forEach(r=>{if(r.startsWith("@")){const n=this.getOutputKey(r.slice(1));this.eventListener(n,e[r])}else{const n=this.getInputKey(r),s=this[n];this[n]=e[r],t.set(n,{previousValue:s,currentValue:e[r],firstChange:!0})}}),this.notifyOnChanges(t),this.hostBindingMap&&this.el.nativeElement&&Object.keys(this.hostBindingMap).forEach(r=>{e[r]&&this.hostBinding(this.hostBindingMap[r],r)})}updateInput(e,t){const r=new Map;e&&Object.keys(e).forEach(n=>{const s=this.getInputKey(n);e[n]!==(t==null?void 0:t[n])&&r.set(s,{previousValue:t[n],currentValue:e[n],firstChange:t[n]===void 0})}),t&&Object.keys(t).filter(n=>!Object.keys(e).includes(n)).forEach(n=>{if(t[n]!==(e==null?void 0:e[n])){const s=this.getInputKey(n);r.set(s,{previousValue:t[n],currentValue:e[n],firstChange:t[n]===void 0})}}),r.forEach((n,s)=>{s.startsWith("@")?this.eventListener(s.slice(1),n.currentValue):this[s]=n.currentValue}),this.notifyOnChanges(r),this.hostBindingMap&&this.el.nativeElement&&Object.keys(this.hostBindingMap).forEach(n=>{r.get(n)&&this.hostBinding(this.hostBindingMap[n],n)})}hostBinding(e,t){const r=this.el.nativeElement,n=this[t];r.setAttribute(e,n)}hostListener(e,t){this.el.nativeElement.addEventListener(e,this[t].bind(this))}eventListener(e,t){var n;const r=this[e].subscribe(s=>{t(s)});this.__eventListenerMap.get(e)&&((n=this.__eventListenerMap.get(e))==null||n.unsubscribe(),this.__eventListenerMap.delete(e)),this.__eventListenerMap.set(e,r)}getInputKey(e){return this.inputNameMap&&this.inputNameMap[e]||e}getOutputKey(e){return this.outputNameMap&&this.outputNameMap[e]||e}notifyOnChanges(e){if(this.ngOnChanges){const t=[...e.entries()].filter(([r,n])=>!r.startsWith("@")).reduce((r,[n,s])=>{const{previousValue:o,currentValue:a,firstChange:l}=s;return r[n]=new Dr(o,a,l),r},{});Object.keys(t).length&&this.ngOnChanges(t)}}}const tt=m.defineComponent({name:"DDragPreviewTemplate",setup(i,{slots:e,expose:t}){return t({template:e.default}),()=>null}}),rt=m.defineComponent({name:"DDragPreviewContainer",props:{template:Function,context:Object},setup(i){return()=>{var e;return(e=i.template)==null?void 0:e.call(i,i.context)}}});class G extends M{constructor(e,t){super(),this.dragDropService=t,this.inputNameMap={dragPreview:"dragPreviewTemplate"},this.dragPreviewOptions={skipBatchPreview:!1},this.el={nativeElement:null},this.el.nativeElement=e}createPreview(){var o;const e={data:this.dragPreviewData,draggedEl:this.dragDropService.draggedEl,dragData:this.dragDropService.dragData,batchDragData:this.dragDropService.batchDragData&&this.dragDropService.getBatchDragData(),dragSyncDOMElements:this.dragDropService.dragSyncGroupDirectives&&this.getDragSyncDOMElements()},t=m.createApp(rt,{context:e,template:(o=this.dragPreviewTemplate)==null?void 0:o.template});t._context.provides=Object.create(this.context);const r=document.createElement("div"),n=t.mount(r),s=()=>{t.unmount()};this.previewRef={instance:n,element:r,unmount:s}}destroyPreview(){this.previewRef&&(this.previewRef.unmount(),this.previewRef=void 0)}getPreviewElement(){return this.previewRef&&this.previewRef.element}getDragSyncDOMElements(){return this.dragDropService.dragSyncGroupDirectives.map(e=>e.el.nativeElement)}}G.INSTANCE_KEY="__vueDevuiDragPreviewDirectiveInstance",G.TOKEN=Symbol("DRAG_PREVIEW_DIRECTIVE_TOKEN");var mr={mounted(i,e,t){const r=t.ctx.provides,n=y(O.TOKEN,r),s=i[G.INSTANCE_KEY]=new G(i,n);q(G.TOKEN,s,r),s.setInput({context:r}),s.setInput(e.value),s.mounted()},updated(i,e){i[G.INSTANCE_KEY].updateInput(e.value,e.oldValue)}};class _ extends M{constructor(e,t,r){super(),this.hostBindingMap={draggable:"draggable","data-drag-handle-selector":"dragHandle"},this.draggable=!0,this.dragScope="default",this.dragHandleClass="drag-handle",this.dragEffect="move",this._disabled=!1,this.dragStartEvent=new F,this.dragEvent=new et,this.dragEndEvent=new F,this.dropEndEvent=new et,this.document=window.document,this.enableDragFollow=!1,this.dragItemParentName="",this.dragItemChildrenName="",this.dragsSub=new C,this.destroyDragEndSub=new C,this.dragElShowHideEvent=new x,this.beforeDragStartEvent=new x,this.el={nativeElement:null},this.insertOriginPlaceholder=(n=!0,s=!0)=>{var l,c,d;this.delayRemoveOriginPlaceholderTimer&&(clearTimeout(this.delayRemoveOriginPlaceholderTimer),this.delayRemoveOriginPlaceholderTimer=void 0);const o=this.document.createElement(((l=this.originPlaceholder)==null?void 0:l.tag)||"div"),a=this.el.nativeElement.getBoundingClientRect();if(n?o.style.display="block":o.style.display="none",o.style.width=a.width+"px",o.style.height=a.height+"px",o.classList.add("drag-origin-placeholder"),(c=this.originPlaceholder)!=null&&c.text&&(o.innerText=this.originPlaceholder.text),(d=this.originPlaceholder)!=null&&d.style&&f.addElStyles(o,this.originPlaceholder.style),s)this.dragDropService.dragOriginPlaceholder=o,this.dragDropService.dragOriginPlaceholderNextSibling=this.el.nativeElement.nextSibling;else{o.classList.add("side-drag-origin-placeholder");const h=this.el.nativeElement.cloneNode(!0);h.style.margin=0,h.style.pointerEvents="none",h.style.opacity="0.3",o.appendChild(h)}this.dragOriginPlaceholder=o,this.dragOriginPlaceholderNextSibling=this.el.nativeElement.nextSibling,this.el.nativeElement.parentElement.insertBefore(o,this.el.nativeElement.nextSibling)},this.removeOriginPlaceholder=(n=!0)=>{var s;this.dragOriginPlaceholder&&((s=this.dragOriginPlaceholder.parentElement)==null||s.removeChild(this.dragOriginPlaceholder)),n&&(this.dragDropService.dragOriginPlaceholder=void 0,this.dragDropService.dragOriginPlaceholderNextSibling=void 0),this.dragOriginPlaceholder=void 0,this.dragOriginPlaceholderNextSibling=void 0},this.delayRemoveOriginPlaceholder=(n=!0)=>{var l,c;const s=(l=this.originPlaceholder)==null?void 0:l.removeDelay,o=this.dragOriginPlaceholder,a=this.findNextSibling(this.dragOriginPlaceholderNextSibling);(c=o==null?void 0:o.parentElement)!=null&&c.contains(a)&&o.parentElement.insertBefore(o,a),setTimeout(()=>{var d;(d=o==null?void 0:o.parentElement)!=null&&d.contains(a)&&o.parentElement.insertBefore(o,a),o==null||o.classList.add("delay-deletion"),this.delayRemoveOriginPlaceholderTimer=setTimeout(()=>{var h;(h=o==null?void 0:o.parentElement)==null||h.removeChild(o),this.document.body.contains(this.el.nativeElement)&&(this.el.nativeElement.style.display="",this.dragDropService.dragElShowHideEvent.next(!1))},s),n&&(this.dragDropService.dragOriginPlaceholder=void 0,this.dragDropService.dragOriginPlaceholderNextSibling=void 0),this.dragOriginPlaceholder=void 0,this.dragOriginPlaceholderNextSibling=void 0})},this.el.nativeElement=e,this.dragDropService=t,this.dragPreviewDirective=r}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.draggable=!this._disabled}ngOnInit(){this.dragsSub.add(E(this.el.nativeElement,"mouseover").subscribe(e=>this.mouseover(e))),this.dragsSub.add(E(this.el.nativeElement,"dragstart").subscribe(e=>this.dragStart(e))),this.dragsSub.add(E(this.el.nativeElement,"dragend").subscribe(e=>this.dragEnd(e)))}dropSubscription(){const e=this.dragDropService.newSubscription();e.add(this.dragDropService.dropEvent.subscribe(t=>{this.mouseOverElement=void 0,f.removeClass(this.el.nativeElement,this.dragOverClass),this.dropEndEvent.emit(t),this.isDestroyed&&this.dropEndEvent.schedulerFns&&this.dropEndEvent.schedulerFns.size>0&&this.dropEndEvent.forceCallback(t,!0),this.dragDropService.dragOriginPlaceholder&&(this.originPlaceholder&&this.originPlaceholder.removeDelay>0&&!this.dragDropService.dropOnOrigin?this.delayRemoveOriginPlaceholder():this.removeOriginPlaceholder(),this.dragDropService.draggedElIdentity=void 0),this.dragDropService.subscription.unsubscribe()})),e.add(this.dragDropService.dragElShowHideEvent.subscribe(this.dragElShowHideEvent))}ngAfterViewInit(){this.applyDragHandleClass(),this.dragIdentity&&this.dragDropService.draggedEl&&this.dragIdentity===this.dragDropService.draggedElIdentity&&(this.originPlaceholder&&this.originPlaceholder.show!==!1&&this.insertOriginPlaceholder(),this.dragDropService.draggedEl=this.el.nativeElement,this.el.nativeElement.style.display="none")}ngOnDestroy(){this.isDestroyed=!0,this.dragDropService.draggedEl===this.el.nativeElement&&(this.destroyDragEndSub=new C,this.destroyDragEndSub.add(E(this.el.nativeElement,"dragend").subscribe(e=>{this.dragEnd(e),this.dropEndEvent.schedulerFns&&this.dropEndEvent.schedulerFns.size>0&&this.dropEndEvent.forceCallback(e,!0),this.destroyDragEndSub.unsubscribe(),this.destroyDragEndSub=void 0})),this.originPlaceholder&&this.originPlaceholder.show!==!1&&this.dragDropService.dragOriginPlaceholder&&this.dragDropService.draggedElIdentity&&this.removeOriginPlaceholder()),this.dragsSub.unsubscribe()}dragStart(e){var t;if(this.allowDrag(e)){f.addClass(this.el.nativeElement,this.dragOverClass),this.dragDropService.dragData=this.dragData,this.dragDropService.scope=this.dragScope,this.dragDropService.draggedEl=this.el.nativeElement,this.dragDropService.draggedElIdentity=this.dragIdentity,this.dragDropService.dragFollow=this.enableDragFollow,this.dragDropService.dragFollowOptions=this.dragFollowOptions,this.dragDropService.dragItemParentName=this.dragItemParentName,this.dragDropService.dragItemChildrenName=this.dragItemChildrenName,this.beforeDragStartEvent.next(!0),this.dragPreviewDirective&&((t=this.dragPreviewDirective)==null?void 0:t.dragPreviewTemplate)&&(this.dragDropService.dragFollow=!0,this.dragDropService.dragPreviewDirective=this.dragPreviewDirective),this.batchDraggable&&(this.batchDraggable.dragData?this.dragDropService.batchDragData&&this.dragDropService.batchDragData.length>1&&(this.dragDropService.batchDragging=!0,this.dragDropService.batchDragStyle=this.batchDraggable.batchDragStyle):this.batchDraggable.batchDragLastOneAutoActiveEventKeys&&this.batchDraggable.batchDragLastOneAutoActiveEventKeys.map(s=>e[s]).some(s=>s===!0)&&this.dragDropService.batchDragData&&this.dragDropService.batchDragData.length>0&&(this.batchDraggable.active(),this.batchDraggable.dragData||this.batchDraggable.addToBatchGroup(),this.dragDropService.batchDragData.some(s=>s.draggable===this)&&(this.dragDropService.batchDragging=!0,this.dragDropService.batchDragStyle=this.batchDraggable.batchDragStyle)));const r=this.el.nativeElement.getBoundingClientRect();if(this.dragDropService.dragFollow){const n=this.mousePosition(e),s=this.checkAndGetViewPointChange(this.el.nativeElement);this.dragDropService.dragOffset={left:r.left,top:r.top,offsetLeft:n.x-r.left+s.offsetX,offsetTop:n.y-r.top+s.offsetY,width:r.width,height:r.height},this.dragDropService.enableDraggedCloneNodeFollowMouse()}else this.dragDropService.dragOffset={left:r.left,top:r.top,offsetLeft:null,offsetTop:null,width:r.width,height:r.height};this.originPlaceholder&&this.originPlaceholder.show!==!1&&this.insertOriginPlaceholder(!1),this.dragDropService.batchDragging&&this.dragDropService.batchDragData&&this.dragDropService.batchDragData.length>1&&this.dragDropService.batchDragData.map(n=>n.draggable).filter(n=>n&&n!==this).forEach(n=>{n.originPlaceholder&&n.originPlaceholder.show!==!1?(n.insertOriginPlaceholder(!0,!1),n.el.nativeElement.style.display="none"):setTimeout(()=>{n.el.nativeElement.style.display="none"})}),e.dataTransfer!==null&&e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed=this.dragEffect,this.dropSubscription(),this.dragDropService.dragFollow&&(typeof DataTransfer.prototype.setDragImage=="function"?e.dataTransfer.setDragImage(this.dragDropService.dragEmptyImage,0,0):(e.srcElement.style.display="none",this.dragDropService.dragElShowHideEvent.next(!1))),e.stopPropagation(),this.dragStartEvent.emit(e),this.dragDropService.dragStartEvent.next(e)}else e.preventDefault()}dragEnd(e){f.removeClass(this.el.nativeElement,this.dragOverClass),this.dragDropService.dragEndEvent.next(e),this.mouseOverElement=void 0,this.dragDropService.draggedEl&&(this.dragDropService.dragFollow&&this.dragDropService.disableDraggedCloneNodeFollowMouse(),this.dragDropService.dragOriginPlaceholder&&this.removeOriginPlaceholder(),this.dragDropService.batchDragging&&this.dragDropService.batchDragData&&this.dragDropService.batchDragData.length>1&&this.dragDropService.batchDragData.map(t=>t.draggable).filter(t=>t&&t!==this).forEach(t=>{t.originPlaceholder&&t.originPlaceholder.show!==!1?(t.el.nativeElement.style.display="",t.removeOriginPlaceholder()):t.el.nativeElement.style.display=""}),this.batchDraggable&&!this.batchDraggable.batchDragActive&&(this.batchDraggable.removeFromBatchGroup(),this.dragDropService.batchDragging=!1,this.dragDropService.batchDragStyle=void 0),this.dragDropService.subscription&&this.dragDropService.subscription.unsubscribe(),this.dragDropService.dragData=void 0,this.dragDropService.scope=void 0,this.dragDropService.draggedEl=void 0,this.dragDropService.dragFollow=void 0,this.dragDropService.dragFollowOptions=void 0,this.dragDropService.dragOffset=void 0,this.dragDropService.draggedElIdentity=void 0,this.dragDropService.dragPreviewDirective=void 0),e.stopPropagation(),e.preventDefault(),this.dragEndEvent.emit(e)}mouseover(e){this.mouseOverElement=e.target}allowDrag(e){return!this.draggable||this.batchDraggable&&!this.batchDraggable.allowAddToBatchGroup()?!1:this.dragHandle?e&&e.fromTouch?!0:this.mouseOverElement?f.matches(this.mouseOverElement,this.dragHandle):!1:!0}applyDragHandleClass(){const e=this.getDragHandleElement();!e||(this.draggable?f.addClass(e,this.dragHandleClass):f.removeClass(this.el,this.dragHandleClass))}getDragHandleElement(){let e=this.el;return this.dragHandle&&(e=this.el.nativeElement.querySelector(this.dragHandle)),e}mousePosition(e){return{x:e.clientX,y:e.clientY}}findNextSibling(e){return this.dragDropService.batchDragData&&this.dragDropService.batchDragData.map(t=>t.draggable&&t.draggable.el.nativeElement).indexOf(e)>-1&&(e=e.nextSibling),e}checkAndGetViewPointChange(e){if(!e.parentNode)return null;const t=e.getBoundingClientRect(),r=this.document.createElement("div");f.addElStyles(r,{opacity:"0",position:"fixed",top:t.top+"px",left:t.left+"px",width:"1px",height:"1px",zIndex:"-999999"}),e.parentNode.appendChild(r);const n=r.getBoundingClientRect();return e.parentNode.removeChild(r),{offsetX:n.left-t.left,offsetY:n.top-t.top}}}_.INSTANCE_KEY="__vueDevuiDraggableDirectiveInstance",_.TOKEN=Symbol("DRAGGABLE_DIRECTIVE_TOKEN");var it={mounted(i,e,t){var a,l,c;const r=(a=t.ctx)==null?void 0:a.provides,n=y(O.TOKEN,r);let s=y(G.TOKEN,r);(s==null?void 0:s.el.nativeElement)!==i&&(s=void 0);const o=i[_.INSTANCE_KEY]=new _(i,n,s);q(_.TOKEN,o,r),o.setInput(e.value),o.mounted(),(l=o.ngOnInit)==null||l.call(o),(c=o.ngAfterViewInit)==null||c.call(o)},updated(i,e){i[_.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[_.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class nt{constructor(e,t,r,n,s,o,a,l){this.nativeEvent=e,this.dragData=t,this.dropSubject=r,this.dropIndex=n,this.dragFromIndex=s,this.dropOnItem=o,this.dropOnOrigin=a,this.batchDragData=l}}class B extends M{constructor(e,t){super(),this.hostListenerMap={drop:"drop"},this.dragEnterEvent=new F,this.dragOverEvent=new F,this.dragLeaveEvent=new F,this.dropEvent=new F,this.dropScope="default",this.placeholderTag="div",this.placeholderStyle={backgroundColor:["#859bff","var(--devui-brand-foil, #859bff)"],opacity:".4"},this.placeholderText="",this.allowDropOnItem=!1,this.switchWhileCrossEdge=!1,this.defaultDropPosition="closest",this.dragCount=0,this.dropIndex=void 0,this.placeholderInsertionEvent=new x,this.placeholderRenderEvent=new x,this.el={nativeElement:null},this.dropSortCountSelectorFilterFn=r=>f.matches(r,this.dropSortCountSelector)||r.contains(this.placeholder)||r===this.dragDropService.dragOriginPlaceholder,this.setPlaceholder=()=>{this.placeholder.style.width=this.dragDropService.dragOffset.width+"px",this.placeholder.style.height=this.dragDropService.dragOffset.height+"px",f.addElStyles(this.placeholder,this.placeholderStyle),this.placeholderRenderEvent.next({width:this.dragDropService.dragOffset.width,height:this.dragDropService.dragOffset.height})},this.document=window.document,this.el.nativeElement=e,this.dragDropService=t}ngOnInit(){this.placeholder=this.document.createElement(this.placeholderTag),this.placeholder.className="drag-placeholder",this.placeholder.innerText=this.placeholderText,this.dragStartSubscription=this.dragDropService.dragStartEvent.subscribe(()=>this.setPlaceholder()),this.dragDropService.draggedEl&&this.setPlaceholder(),this.dropEndSubscription=this.dragDropService.dropEvent.subscribe(()=>{this.dragDropService.draggedEl&&(this.dragDropService.dragFollow||(f.addElStyles(this.dragDropService.draggedEl,{display:""}),this.dragDropService.dragElShowHideEvent.next(!0))),this.removePlaceholder(),this.overElement=void 0,this.allowDropCache=void 0,this.dragElIndex=void 0,this.dropIndex=void 0}),this.dragEndSubscription=this.dragDropService.dragEndEvent.subscribe(()=>{this.dragDropService.draggedEl&&(this.dragDropService.dragFollow||(f.addElStyles(this.dragDropService.draggedEl,{display:""}),this.dragDropService.dragElShowHideEvent.next(!0))),this.removePlaceholder(),this.dragCount=0,this.overElement=void 0,this.allowDropCache=void 0,this.dragElIndex=void 0,this.dropIndex=void 0}),this.dragPartEventSub=new C,this.dragPartEventSub.add(E(this.el.nativeElement,"dragover").pipe(hr(e=>this.allowDrop(e)),gr((e,t)=>{const r=e.clientX===t.clientX&&e.clientY===t.clientY&&e.target===t.target;return r&&(t.preventDefault(),t.stopPropagation()),r})).subscribe(e=>this.dragOver(e))),this.dragPartEventSub.add(E(this.el.nativeElement,"dragenter").subscribe(e=>this.dragEnter(e))),this.dragPartEventSub.add(E(this.el.nativeElement,"dragleave").subscribe(e=>this.dragLeave(e)))}ngAfterViewInit(){this.el.nativeElement.hasAttribute("d-sortable")?this.sortContainer=this.el.nativeElement:this.sortContainer=this.el.nativeElement.querySelector("[d-sortable]"),this.sortDirection=this.sortContainer&&this.sortContainer.getAttribute("dsortable")||"v",this.sortDirectionZMode=this.sortContainer&&this.sortContainer.getAttribute("d-sortable-zmode")==="true"||!1}ngOnDestroy(){var e,t,r;(e=this.dragStartSubscription)==null||e.unsubscribe(),(t=this.dragEndSubscription)==null||t.unsubscribe(),(r=this.dropEndSubscription)==null||r.unsubscribe(),this.dragPartEventSub&&this.dragPartEventSub.unsubscribe()}dragEnter(e){this.dragCount++,e.preventDefault(),this.dragEnterEvent.emit(e)}dragOver(e){if(this.allowDrop(e)){this.dragDropService.dropTargets.indexOf(this.el)===-1&&(this.dragDropService.dropTargets.forEach(r=>{const n=r.nativeElement.querySelector(".drag-placeholder");n&&n.parentElement.removeChild(n),f.removeClass(r,this.dragOverClass),this.removeDragoverItemClass(r.nativeElement)}),this.dragDropService.dropTargets=[this.el],this.overElement=void 0),f.addClass(this.el,this.dragOverClass);const t=this.dragDropService.dragOriginPlaceholder&&this.dragDropService.dragOriginPlaceholder.contains(e.target);if(this.sortContainer&&(t&&this.overElement===void 0||!(e.target.contains(this.placeholder)||t)||this.switchWhileCrossEdge&&!this.placeholder.contains(e.target)&&!t||!this.sortContainer.contains(e.target)&&this.defaultDropPosition==="closest")){const r=this.findSortableEl(e);!(this.overElement&&r)||this.overElement.index!==r.index||this.allowDropOnItem&&this.overElement.position!==r.position&&(this.overElement.position==="inside"||r.position==="inside")?(this.overElement=r,this.insertPlaceholder(r),this.removeDragoverItemClass(this.sortContainer,r),r.position==="inside"&&this.dragOverItemClass&&f.addClass(r.el,this.dragOverItemClass)):this.overElement=r}else this.sortContainer&&this.overElement&&this.overElement.el&&(this.overElement.el.contains(e.target)?this.overElement.realEl=void 0:this.overElement.realEl=e.target);this.dragDropService.draggedEl&&(this.dragDropService.dragFollow||(f.addElStyles(this.dragDropService.draggedEl,{display:"none"}),this.dragDropService.dragElShowHideEvent.next(!1),this.dragDropService.dragOriginPlaceholder&&f.addElStyles(this.dragDropService.dragOriginPlaceholder,{display:"block"}))),e.preventDefault(),e.stopPropagation(),this.dragOverEvent.emit(e)}}dragLeave(e){this.dragCount--,this.dragCount===0&&(this.dragDropService.dropTargets.indexOf(this.el)!==-1&&(this.dragDropService.dropTargets=[]),f.removeClass(this.el,this.dragOverClass),this.removePlaceholder(),this.removeDragoverItemClass(this.el.nativeElement),this.overElement=void 0,this.dragElIndex=void 0,this.dropIndex=void 0),e.preventDefault(),this.dragLeaveEvent.emit(e)}drop(e){if(!this.allowDrop(e))return;this.dragCount=0,f.removeClass(this.el,this.dragOverClass),this.removeDragoverItemClass(this.sortContainer),this.removePlaceholder(),e.preventDefault(),e.stopPropagation(),this.dragDropService.dropOnOrigin=this.isDragPlaceholderPosition(this.dropIndex);const t=this.dragDropService.draggedElIdentity;this.dragDropService.draggedElIdentity=void 0;let r=[];this.dragDropService.batchDragData&&this.dragDropService.batchDragData.length>1&&(r=this.dragDropService.batchDragData.map(n=>n.draggable).filter(n=>n&&n.el.nativeElement!==this.dragDropService.draggedEl)),this.dropEvent.emit(new nt(e,this.dragDropService.dragData,this.dragDropService.dropEvent,this.dropSortVirtualScrollOption?this.getRealIndex(this.dropIndex,this.dropFlag):this.dropIndex,this.sortContainer?this.checkSelfFromIndex(this.dragDropService.draggedEl):-1,this.dragDropService.dropOnItem,this.dragDropService.dropOnOrigin,this.dragDropService.batchDragging?this.dragDropService.getBatchDragData(t):void 0)),this.dragDropService.dragFollow?this.dragDropService.disableDraggedCloneNodeFollowMouse():(f.addElStyles(this.dragDropService.draggedEl,{display:void 0}),this.dragDropService.dragElShowHideEvent.next(!1)),r.length>0&&this.dragDropService.batchDragging&&r.forEach(n=>{!n.originPlaceholder||n.originPlaceholder.show===!1?n.el.nativeElement.style.display="":n.originPlaceholder.removeDelay>0&&!this.dragDropService.dropOnOrigin?n.delayRemoveOriginPlaceholder(!1):(n.el.nativeElement.style.display="",n.removeOriginPlaceholder(!1))}),this.dragDropService.dropEvent.next(e),this.dragDropService.dragData=void 0,this.dragDropService.scope=void 0,this.dragDropService.draggedEl=void 0,this.dragDropService.dragFollow=void 0,this.dragDropService.dragFollowOptions=void 0,this.dragDropService.dragOffset=void 0,this.dragDropService.dropOnOrigin=void 0,this.dragDropService.batchDragging=!1,this.dragDropService.batchDragStyle=void 0,this.dragDropService.dragPreviewDirective=void 0}allowDrop(e){if(!e)return!1;if(this.allowDropCache!==void 0)return this.allowDropCache;let t=!1;return typeof this.dropScope=="string"&&(typeof this.dragDropService.scope=="string"&&(t=this.dragDropService.scope===this.dropScope),this.dragDropService.scope instanceof Array&&(t=this.dragDropService.scope.indexOf(this.dropScope)>-1)),this.dropScope instanceof Array&&(typeof this.dragDropService.scope=="string"&&(t=this.dropScope.indexOf(this.dragDropService.scope)>-1),this.dragDropService.scope instanceof Array&&(t=this.dropScope.filter(r=>this.dragDropService.scope.indexOf(r)!==-1).length>0)),this.allowDropCache=t,t}findSortableEl(e){var c;const t=e.target;let r=null;if(!this.sortContainer)return r;r={index:0,el:null,position:"before"},this.dropIndex=0,this.dropFlag=void 0;let n=f.slice(this.sortContainer.children);if(this.dropSortCountSelector&&(n=n.filter(this.dropSortCountSelectorFilterFn)),n.some(d=>d!==this.dragDropService.dragOriginPlaceholder&&d.classList.contains("drag-origin-placeholder"))&&(n=n.filter(d=>!(d.classList.contains("drag-origin-placeholder")&&d!==this.dragDropService.dragOriginPlaceholder))),this.dragDropService.dragFollow&&this.dragDropService.dragCloneNode){const d=n.findIndex(h=>h===this.dragDropService.dragCloneNode);d!==-1&&n.splice(d,1)}if(this.dragDropService.dragOriginPlaceholder){const d=n.findIndex(h=>h===this.dragDropService.dragOriginPlaceholder);d!==-1?(this.dragElIndex=d-1,n.splice(d,1)):this.dragElIndex=-1}else this.dragElIndex=-1;const s=n.findIndex(d=>d.contains(this.placeholder));s!==-1&&n.splice(s,1),s!==-1&&this.dragElIndex!==-1&&s<this.dragElIndex&&this.dragElIndex--;const o=s!==-1?s:this.dragElIndex,a=n.findIndex(d=>d.contains(t)||d.nextElementSibling===t&&d.nextElementSibling.classList.contains("drag-origin-placeholder"));if(this.switchWhileCrossEdge&&!this.allowDropOnItem&&n.length&&o!==-1&&a>-1){const d=o,h=this.overElement&&(this.overElement.realEl||this.overElement.el);return a!==-1&&h===n[a]?(this.dropIndex=this.overElement.index,this.overElement):(r={index:d>a?a:a+1,el:n[a],position:d>a?"before":"after"},this.dragDropService.dropOnItem=!1,this.dropIndex=r.index,r)}if(t===this.sortContainer||((c=t.classList)==null?void 0:c.contains("drag-origin-placeholder"))||t===(this.dragDropService&&this.dragDropService.dragOriginPlaceholder)||!this.sortContainer.contains(t)&&this.defaultDropPosition==="closest"){if(!n.length)return this.dropIndex=0,this.dragDropService.dropOnItem=!1,r;let d=!1;for(let h=0;h<n.length;h++){const g=n[h];if(n[h].nextSibling===t&&t.classList.contains("drag-origin-placeholder")){const b=this.calcPosition(e,t);return this.dragDropService.dropOnItem=b==="inside",r={index:b==="after"?h+1:h,el:n[h],position:b},this.dropIndex=r.index,r}const S=this.calcPositionOutside(e,g);if(S==="before"){this.dragDropService.dropOnItem=!1,r={index:h,el:n[h],position:S,realEl:t},this.dropIndex=r.index,d=!0;break}}return d||(this.dragDropService.dropOnItem=!1,r={index:n.length,el:n[n.length-1],position:"after",realEl:t},this.dropIndex=n.length),r}if(!this.sortContainer.contains(t))return this.defaultDropPosition==="before"?(r={index:0,el:n.length?n[0]:null,position:"before",realEl:t},this.dropFlag="beforeAll"):(r={index:n.length,el:n.length?n[n.length-1]:null,position:"after",realEl:t},this.dropFlag="afterAll"),this.dropIndex=r.index,r;let l=!1;for(let d=0;d<n.length;d++)if(n[d].contains(t)){const h=n[d],g=this.calcPosition(e,h);this.dragDropService.dropOnItem=g==="inside",r={index:g==="after"?d+1:d,el:n[d],position:g},this.dropIndex=r.index,l=!0;break}return l||(n.length&&(r={index:n.length,el:n[n.length-1],position:"after"}),this.dropIndex=n.length,this.dragDropService.dropOnItem=!1),r}calcPosition(e,t){const r=t.getBoundingClientRect(),n=e.clientY-(r.y||r.top),s=e.clientX-(r.x||r.left);if(this.allowDropOnItem){const o={height:this.nestingTargetRect&&this.nestingTargetRect.height||r.height,width:this.nestingTargetRect&&this.nestingTargetRect.width||r.width},a=o.height*3/4,l=o.width*3/4,c=Number(o.height)/4,d=Number(o.width)/4;if(this.sortDirectionZMode){const h=n/o.height+s/o.width;if(h>.3&&h<=.7)return"inside";if(h>.7&&(n-r.height+o.height)/o.height+(s-r.width+o.width)/o.width<=.7)return"inside"}if(this.sortDirection==="v"&&n>c&&n<=a||this.sortDirection!=="v"&&s>d&&s<=l)return"inside";if(this.sortDirection==="v"&&n>a&&n<=r.height-c||this.sortDirection!=="v"&&s>l&&s<=r.width-d)return"inside"}return this.sortDirectionZMode?n/r.height+s/r.width<1?"before":"after":this.sortDirection==="v"&&n>r.height/2||this.sortDirection!=="v"&&s>r.width/2?"after":"before"}calcPositionOutside(e,t){const r=this.getBoundingRectAndRealPosition(t),n=e.clientY-(r.y||r.top),s=e.clientX-(r.x||r.left);return this.sortDirectionZMode?this.sortDirection==="v"&&(n<0||n<r.height&&s<0)||this.sortDirection!=="v"&&(s<0||s<r.width&&n<0)?"before":"notsure":this.sortDirection==="v"&&n<r.height/2||this.sortDirection!=="v"&&s<r.width/2?"before":"notsure"}insertPlaceholder(e){const t=this.sortContainer.scrollTop,r=this.sortContainer.scrollLeft;let n=!1,s;const o=(a,l,c)=>{const d=a.indexOf(l);return d>-1?d:c};if(e!==null){const a=f.slice(this.sortContainer.children).filter(l=>l!==this.dragDropService.dragCloneNode);e.el===null?(s={command:"append"},this.sortContainer.appendChild(this.placeholder)):e.position==="inside"?(s={command:"remove"},this.removePlaceholder()):this.dragDropService.dragOriginPlaceholder&&this.isDragPlaceholderPosition(e.index)?(s={command:"remove"},this.removePlaceholder(),n=!0):e.position==="after"?e.el.nextSibling&&e.el.nextSibling.classList&&e.el.nextSibling.classList.contains("drag-origin-placeholder")?(s={command:"insertBefore",index:o(a,e.el.nextSibling,a.length)+1},this.sortContainer.insertBefore(this.placeholder,e.el.nextSibling.nextSibling)):(s={command:"insertBefore",index:o(a,e.el,a.length)+1},this.sortContainer.insertBefore(this.placeholder,e.el.nextSibling)):(s={command:"insertBefore",index:o(a,e.el,a.length)},this.sortContainer.insertBefore(this.placeholder,e.el))}this.placeholderInsertionEvent.next(s),this.sortContainer.scrollTop=t,this.sortContainer.scrollLeft=r,this.dragDropService.dragOriginPlaceholder&&(n?this.hitDragOriginPlaceholder():this.hitDragOriginPlaceholder(!1))}isDragPlaceholderPosition(e){return this.dragElIndex>-1&&(e===this.dragElIndex||e===this.dragElIndex+1)}hitDragOriginPlaceholder(e=!0){const t=this.dragDropService.dragOriginPlaceholder;e?t.classList.add("hit-origin-placeholder"):t.classList.remove("hit-origin-placeholder")}removePlaceholder(){this.sortContainer&&this.sortContainer.contains(this.placeholder)&&(this.sortContainer.removeChild(this.placeholder),this.placeholderInsertionEvent.next({command:"remove"}))}removeDragoverItemClass(e,t){if(this.dragOverItemClass){const r=e.querySelectorAll("."+this.dragOverItemClass);if(r&&r.length>0)for(const n of r)t?(n!==t.el||t.position!=="inside")&&f.removeClass(n,this.dragOverItemClass):f.removeClass(n,this.dragOverItemClass)}}checkSelfFromIndex(e){let t=-1;if(!this.sortContainer.contains(e))return t;let r=f.slice(this.sortContainer.children);this.dropSortCountSelector&&(r=r.filter(this.dropSortCountSelectorFilterFn));for(let n=0;n<r.length;n++)if(r[n].contains(this.dragDropService.draggedEl)){t=n;break}return this.getRealIndex(t)}getRealIndex(e,t){let r;const n=this.dropSortVirtualScrollOption&&this.dropSortVirtualScrollOption.startIndex||0,s=this.dropSortVirtualScrollOption&&this.dropSortVirtualScrollOption.totalLength;return t==="beforeAll"?r=0:t==="afterAll"?r=s||e:r=n+e,r}getBoundingRectAndRealPosition(e){let t=e.getBoundingClientRect();const{bottom:r,right:n,width:s,height:o}=t;if(t.width===0&&t.height===0&&(e.style.display==="none"||getComputedStyle(e).display==="none")&&e.nextElementSibling){const{top:a,left:l}=e.nextElementSibling.getBoundingClientRect();t={x:l,y:a,top:a,left:l,bottom:r,right:n,width:s,height:o}}return t}getSortContainer(){return this.sortContainer}}B.INSTANCE_KEY="__vueDevuiDroppableDirectiveInstance",B.TOKEN=Symbol("DROPPABLE_DIRECTIVE_TOKEN");var st={mounted(i,e,t){var o;const r=t.ctx.provides,n=y(O.TOKEN,r),s=i[B.INSTANCE_KEY]=new B(i,n);q(B.TOKEN,s,r),s.setInput(e.value),s.mounted(),(o=s.ngOnInit)==null||o.call(s),setTimeout(()=>{var a;(a=s.ngAfterViewInit)==null||a.call(s)},0)},updated(i,e){i[B.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[B.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class te extends M{constructor(e){super(),this.dSortDirection="v",this.dSortableZMode=!1,this.dSortable=!0,this.hostBindingMap={dSortDirection:"dsortable",dSortableZMode:"d-sortable-zmode",dSortable:"d-sortable"},this.inputNameMap={dSortable:"dSortDirection"},this.el={nativeElement:null},this.el.nativeElement=e}}te.INSTANCE_KEY="__vueDevuiSortableDirectiveInstance";var ot={mounted(i,e){const t=i[te.INSTANCE_KEY]=new te(i);t.setInput(e.value),t.mounted()},updated(i,e){i[te.INSTANCE_KEY].updateInput(e.value,e.oldValue)}},at=(i=>(i[i.forward=0]="forward",i[i.backward=1]="backward",i))(at||{});const lt={default:i=>Math.ceil((1-i)*18)*100};class k extends M{constructor(e,t){super(),this.minSpeed=50,this.maxSpeed=1e3,this.responseEdgeWidth="100px",this.speedFn=lt.default,this.direction="v",this.backSpaceDroppable=!0,this.subscription=new C,this.el={nativeElement:null},this.el.nativeElement=e,this.dragDropService=t,this.document=window.document}ngAfterViewInit(){this.el.nativeElement.parentNode.style.position="relative",this.el.nativeElement.parentNode.style.display="block",this.forwardScrollArea=this.createScrollArea(this.direction,0),this.backwardScrollArea=this.createScrollArea(this.direction,1),this.forwardScrollFn=this.createScrollFn(this.direction,0,this.speedFn),this.backwardScrollFn=this.createScrollFn(this.direction,1,this.speedFn),this.subscription.add(E(this.forwardScrollArea,"dragover").pipe($e(e=>{e.preventDefault(),e.stopPropagation()}),ce(100,void 0,{leading:!0,trailing:!1})).subscribe(e=>this.forwardScrollFn(e))),this.subscription.add(E(this.backwardScrollArea,"dragover").pipe($e(e=>{e.preventDefault(),e.stopPropagation()}),ce(100,void 0,{leading:!0,trailing:!1})).subscribe(e=>this.backwardScrollFn(e))),this.subscription.add(ye(E(this.forwardScrollArea,"drop"),E(this.backwardScrollArea,"drop")).subscribe(e=>this.delegateDropEvent(e))),this.subscription.add(ye(E(this.forwardScrollArea,"dragleave",{passive:!0}),E(this.backwardScrollArea,"dragleave",{passive:!0})).subscribe(e=>this.cleanLastScrollTime())),this.subscription.add(E(this.el.nativeElement,"scroll",{passive:!0}).pipe(ce(300,void 0,{leading:!0,trailing:!0})).subscribe(e=>{this.toggleScrollToOneEnd(this.el.nativeElement,this.forwardScrollArea,this.direction,0),this.toggleScrollToOneEnd(this.el.nativeElement,this.backwardScrollArea,this.direction,1)})),this.subscription.add(E(window,"resize",{passive:!0}).pipe(ce(300,void 0,{leading:!0,trailing:!0})).subscribe(e=>this.resizeArea())),this.subscription.add(this.dragDropService.dragStartEvent.subscribe(()=>{!this.allowScroll()||setTimeout(()=>{this.forwardScrollArea.style.display="block",this.backwardScrollArea.style.display="block"})})),this.subscription.add(ye(this.dragDropService.dragEndEvent,this.dragDropService.dropEvent).subscribe(()=>{this.forwardScrollArea.style.display="none",this.backwardScrollArea.style.display="none",this.lastScrollTime=void 0})),setTimeout(()=>{this.resizeArea()},0)}ngOnDestroy(){this.subscription.unsubscribe()}createScrollFn(e,t,r){if(typeof window=="undefined")return;const n=e==="v"?"scrollTop":"scrollLeft",s=e==="v"?"clientY":"clientX",o=e==="v"?"scrollHeight":"scrollWidth",a=e==="v"?"offsetHeight":"offsetWidth",l=e==="v"?"clientHeight":"clientWidth",c=e==="v"?"height":"width",d=t===0?this.forwardScrollArea:this.backwardScrollArea,h=this.getCriticalEdge(e,t),g=this.el.nativeElement;return S=>{const b=d.getBoundingClientRect(),D=S[s]-b[h];let A=r(Math.abs(D/(b[c]||1)));A<this.minSpeed&&(A=this.minSpeed),A>this.maxSpeed&&(A=this.maxSpeed),D<0&&(A=-A),this.animationFrameId&&(window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0),this.animationFrameId=requestAnimationFrame(()=>{const I=new Date().getTime(),ee=Math.ceil(A*(I-(this.lastScrollTime||I))/1e3);g[n]-=ee,this.lastScrollTime=I,(g[n]===0&&t===1||g[n]+g.getBoundingClientRect()[c]-g[a]+g[l]===g[o]&&t===0)&&(d.style.pointerEvents="none",this.toggleActiveClass(d,!1)),this.animationFrameId=void 0}),this.backSpaceDroppable&&f.dispatchEventToUnderElement(S)}}delegateDropEvent(e){this.backSpaceDroppable&&f.dispatchEventToUnderElement(e).defaultPrevented&&(e.preventDefault(),e.stopPropagation())}getCriticalEdge(e,t){return e==="v"&&t===0&&"bottom"||e==="v"&&t===1&&"top"||e!=="v"&&t===0&&"right"||e!=="v"&&t===1&&"left"||"bottom"}getSecondEdge(e){return e==="v"&&"left"||e!=="v"&&"top"||"left"}createScrollArea(e,t){const r=this.document.createElement("div");return r.className=`dropover-scroll-area dropover-scroll-area-${this.getCriticalEdge(e,t)}`,r.classList.add("active"),this.setAreaSize(r,e,t),r.style.position="absolute",this.setAreaStyleLayout(r,e,t),r.style.display="none",this.el.nativeElement.parentNode.appendChild(r,this.el.nativeElement),r}setAreaSize(e,t,r){const n=this.el.nativeElement.getBoundingClientRect(),s=t==="v"?"height":"width",o=typeof this.responseEdgeWidth=="string"?this.responseEdgeWidth:this.responseEdgeWidth(n[s]),a=this.viewOffset&&(r===0?this.viewOffset.forward:this.viewOffset.backward);let l=t==="v"?n.width+"px":o,c=t==="v"?o:n.height+"px";a&&(a.widthOffset&&(l="calc("+l+" + "+a.widthOffset+"px)"),a.heightOffset&&(c="calc("+c+" + "+a.heightOffset+"px)")),e.style.width=l,e.style.height=c}setAreaStyleLayout(e,t,r){const n=this.el.nativeElement,s=this.el.nativeElement.parentNode,o={left:0,right:0,top:0,bottom:0},a=this.viewOffset&&(r===0?this.viewOffset.forward:this.viewOffset.backward)||o,l=this.getCriticalEdge(t,r),c=this.getSecondEdge(t);[l,c].forEach(d=>{e.style[d]=this.getRelatedPosition(n,s,d,a[d])})}getRelatedPosition(e,t,r,n){if(typeof window=="undefined")return"0px";const s=window.getComputedStyle(t),o=t.getBoundingClientRect(),a=e.getBoundingClientRect(),l={left:["left","Left"],right:["right","Right"],top:["top","Top"],bottom:["bottom","Bottom"]};let c=1;return(r==="right"||r==="bottom")&&(c=-1),(a[l[r][0]]-o[l[r][0]]+parseInt(s["border"+l[r][1]+"Width"],10))*c+(n||0)+"px"}resizeArea(){[{area:this.forwardScrollArea,orientation:0},{area:this.backwardScrollArea,orientation:1}].forEach(e=>{this.setAreaSize(e.area,this.direction,e.orientation),this.setAreaStyleLayout(e.area,this.direction,e.orientation)})}toggleScrollToOneEnd(e,t,r,n){const s=r==="v"?"scrollTop":"scrollLeft",o=r==="v"?"scrollHeight":"scrollWidth",a=r==="v"?"offsetHeight":"offsetWidth",l=r==="v"?"clientHeight":"clientWidth",c=r==="v"?"height":"width";e[s]===0&&n===1||Math.abs(e[s]+e.getBoundingClientRect()[c]-e[o]-e[a]+e[l])<1&&n===0?(t.style.pointerEvents="none",this.toggleActiveClass(t,!1)):(t.style.pointerEvents="auto",this.toggleActiveClass(t,!0))}cleanLastScrollTime(){this.animationFrameId&&typeof window!="undefined"&&(window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0),this.lastScrollTime=void 0}toggleActiveClass(e,t){t?(e.classList.remove("inactive"),e.classList.add("active")):(e.classList.remove("active"),e.classList.add("inactive"))}allowScroll(){if(!this.dropScrollScope)return!0;let e=!1;return typeof this.dropScrollScope=="string"&&(typeof this.dragDropService.scope=="string"&&(e=this.dragDropService.scope===this.dropScrollScope),this.dragDropService.scope instanceof Array&&(e=this.dragDropService.scope.indexOf(this.dropScrollScope)>-1)),this.dropScrollScope instanceof Array&&(typeof this.dragDropService.scope=="string"&&(e=this.dropScrollScope.indexOf(this.dragDropService.scope)>-1),this.dragDropService.scope instanceof Array&&(e=this.dropScrollScope.filter(t=>this.dragDropService.scope.indexOf(t)!==-1).length>0)),e}}k.INSTANCE_KEY="__vueDevuiDropScrollEnhancedDirectiveInstance";var ct={mounted(i,e,t){const r=t.ctx.provides,n=y(O.TOKEN,r),s=i[k.INSTANCE_KEY]=new k(i,n);s.setInput(e.value),s.mounted(),setTimeout(()=>{var o;(o=s.ngAfterViewInit)==null||o.call(s)},0)},updated(i,e){i[k.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[k.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class re extends k{constructor(){super(...arguments),this.inputNameMap={direction:"sideDirection"},this.sideDirection="h",this.direction="v"}ngOnInit(){this.direction=this.sideDirection==="v"?"h":"v"}}const dt={mounted(i,e,t){const r=t.ctx.provides,n=y(O.TOKEN,r),s=i[re.INSTANCE_KEY]=new re(i,n);s.setInput(e.value),s.mounted(),setTimeout(()=>{var o;(o=s.ngAfterViewInit)==null||o.call(s)},0)},updated(i,e){i[re.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[re.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class X extends M{constructor(e,t){super(),this.draggable=e,this.dragDropService=t,this.batchDragGroup="default",this.batchDragActive=!1,this.batchDragLastOneAutoActiveEventKeys=["ctrlKey"],this.batchDragStyle=["badge","stack"],this.batchDragActiveEvent=new F,this.needToRestore=!1,this.draggable.batchDraggable=this}ngOnInit(){this.initDragDataByIdentity()}ngOnDestroy(){this.draggable.batchDraggable=void 0,this.dragData&&this.dragData.draggable===this.draggable&&(this.dragData.draggable=void 0,this.dragData.identity||this.removeFromBatchGroup())}ngOnChanges(e){e.batchDragActive&&(this.initDragDataByIdentity()||(this.batchDragActive?!this.dragData&&this.allowAddToBatchGroup()&&this.addToBatchGroup():this.removeFromBatchGroup()))}ngAfterViewInit(){this.needToRestore&&(this.restoreDragDataViewAfterViewInit(),this.needToRestore=!1)}initDragDataByIdentity(){const e=this.findInBatchDragDataByIdentities();return e&&(this.batchDragActive?this.dragData||(this.addToBatchGroup(e),this.registerRestoreDragDataViewAfterViewInitWhiteDragging()):this.removeFromBatchGroup(e)),e}registerRestoreDragDataViewAfterViewInitWhiteDragging(){this.dragDropService.draggedEl&&this.dragDropService.draggedElIdentity&&this.dragDropService.draggedEl!==this.draggable.el.nativeElement&&(this.needToRestore=!0)}restoreDragDataViewAfterViewInit(){const e=this.draggable;e.originPlaceholder&&e.originPlaceholder.show!==!1&&e.insertOriginPlaceholder(!0,!1),e.el.nativeElement.style.display="none"}allowAddToBatchGroup(){return this.dragDropService.batchDragGroup?this.batchDragGroup===this.dragDropService.batchDragGroup:!0}addToBatchGroup(e){this.dragDropService.batchDragGroup=this.dragDropService.batchDragGroup||this.batchDragGroup,e?(e.draggable=this.draggable,e.dragData=this.draggable.dragData,this.dragData=e):(this.dragData=this.dragData||{identity:this.draggable.dragIdentity||void 0,draggable:this.draggable,dragData:this.draggable.dragData},this.dragDropService.batchDragData=this.addToArrayIfNotExist(this.dragDropService.batchDragData,this.dragData))}removeFromBatchGroup(e){this.deleteFromArrayIfExist(this.dragDropService.batchDragData,e||this.dragData),this.dragData=void 0,this.dragDropService.batchDragData&&this.dragDropService.batchDragData.length||(this.dragDropService.batchDragGroup=void 0)}addToArrayIfNotExist(e,t){return e=e||[],e.indexOf(t)===-1&&e.push(t),e}deleteFromArrayIfExist(e,t){if(!!e){if(e.length>0){const r=e.indexOf(t);r>-1&&e.splice(r,1)}return e}}findInBatchDragDataByIdentities(){return this.draggable.dragIdentity?this.dragDropService.batchDragData?this.dragDropService.batchDragData.filter(e=>e.identity===this.draggable.dragIdentity).pop():void 0:null}active(){this.batchDragActiveEvent.emit({el:this.draggable.el.nativeElement,data:this.draggable.dragData})}updateDragData(){!this.dragData||Object.assign(this.dragData,{identity:this.draggable.dragIdentity||void 0,draggable:this.draggable,dragData:this.draggable.dragData})}}X.INSTANCE_KEY="__vueDevuiBatchDraggableDirectiveInstance";var Sr={mounted(i,e,t){var a;const r=t.ctx.provides,n=y(O.TOKEN,r),s=y(_.TOKEN,r),o=i[X.INSTANCE_KEY]=new X(s,n);o.setInput(e.value),o.mounted(),(a=o.ngOnInit)==null||a.call(o),setTimeout(()=>{var l;(l=o.ngAfterViewInit)==null||l.call(o)},0)},updated(i,e){i[X.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[X.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class be extends M{constructor(t,r){super();Ce(this,"copyStyle",!0);this.el=t,this.dragDropService=r}ngAfterViewInit(){this.cloneNode||this.createView()}ngOnChanges(t){t.domRef&&(this.cloneNode?(this.destroyView(),this.createView()):this.createView())}ngOnDestroy(){this.cloneNode&&this.destroyView()}createView(){this.domRef&&(this.cloneNode=this.domRef.cloneNode(!0),this.copyStyle&&this.dragDropService.copyStyle(this.domRef,this.cloneNode),setTimeout(()=>{this.el.nativeElement.appendChild(this.cloneNode)},0))}destroyView(){this.cloneNode&&(this.el.nativeElement.contains(this.cloneNode)&&this.el.nativeElement.removeChild(this.cloneNode),this.cloneNode=void 0)}updateTemplate(){}}Ce(be,"NAME","d-drag-preview-clone-dom-ref");var ht=m.defineComponent({name:"DDragPreviewCloneDomRef",props:{domRef:Object,copyStyle:{type:Boolean,default:!0}},setup(i,{expose:e}){const t={nativeElement:null},r=m.inject(O.TOKEN),n=new be(t,r);return n.setInput(i),m.onMounted(()=>{n.mounted(),m.nextTick(()=>{var s;(s=n.ngAfterViewInit)==null||s.call(n)})}),m.watch(()=>i,(s,o)=>{n.updateInput(s,o)}),m.onBeforeUnmount(()=>{var s;(s=n.ngOnDestroy)==null||s.call(n)}),e({instance:n}),()=>m.createVNode("div",{ref:s=>t.nativeElement=s},null)}});function ut(i,e){e===void 0&&(e=i);for(let t=0;t<i.length;t++){let r=i[t];Array.isArray(r)?(e===i&&(e=i.slice(0,t)),ut(r,e)):e!==i&&e.push(r)}return e}function yr(){return this._results[Symbol.iterator]()}const gt=class{constructor(){this.dirty=!0,this._results=[],this.changes=new F,this.length=0;const i=Symbol.iterator,e=gt.prototype;e[i]||(e[i]=yr)}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i){this._results=ut(i),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}};let br=gt;class Ee{constructor(){this._result=[],this.changeSubject=new Pt([]),this.changes=this.changeSubject.asObservable().pipe(ur(200))}register(e){if(!e)return;this._result.indexOf(e)===-1&&(this._result.push(e),this.changeSubject.next(this._result))}unregister(e){if(!e)return;const t=this._result.indexOf(e);t>-1&&(this._result.splice(t,1),this.changeSubject.next(this._result))}queryResult(){return this._result.concat([])}}class we extends M{constructor(e){super(),this.drs=e}ngOnInit(){this.drs.register(this.descendantItem)}ngOnDestroy(){this.drs.unregister(this.descendantItem)}}class Ie extends br{constructor(e){super(),this.drs=e}on(){this.sub||(this.reset(this.drs.queryResult()),this.sub=this.drs.changes.subscribe(e=>{this.reset(e)}))}off(){this.sub&&this.sub.unsubscribe()}}class z extends Ee{}z.TOKEN=Symbol("DRAG_SYNC_DR_SERVICE");class Q extends Ee{}Q.TOKEN=Symbol("DROP_SORT_SYNC_DR_SERVICE");class j{updateDragSyncList(e){this.dragSyncList=e}getDragSyncByGroup(e){return e?[]:this.dragSyncList?this.dragSyncList.filter(t=>t.dragSyncGroup===e):[]}updateDropSyncList(e){this.dropSortSyncList=e}getDropSyncByGroup(e){return e?[]:this.dropSortSyncList?this.dropSortSyncList.filter(t=>t.dropSyncGroup===e):[]}}j.TOKEN=Symbol("DRAG_DROP_SYNC_SERVICE");class Z extends M{constructor(e,t,r){super(),this.dragDropSyncService=e,this.dragSyncDrs=t,this.dropSortSyncDrs=r,this.sub=new C}ngOnInit(){this.dragSyncList=new Ie(this.dragSyncDrs),this.dropSyncList=new Ie(this.dropSortSyncDrs)}ngAfterViewInit(){this.dragSyncList.on(),this.dropSyncList.on(),this.dragDropSyncService.updateDragSyncList(this.dragSyncList),this.dragDropSyncService.updateDropSyncList(this.dropSyncList),this.sub.add(this.dragSyncList.changes.subscribe(e=>this.dragDropSyncService.updateDragSyncList(e))),this.sub.add(this.dropSyncList.changes.subscribe(e=>this.dragDropSyncService.updateDropSyncList(e)))}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.dragSyncList.off(),this.dropSyncList.off()}}Z.INSTANCE_KEY="__vueDevuiDragDropSyncBoxDirectiveInstance";var ft={created(i,e,t){const r=t.ctx.provides,n=new j,s=new z,o=new Q;q(j.TOKEN,n,r),q(z.TOKEN,s,r),q(Q.TOKEN,o,r)},mounted(i,e,t){var l;const r=t.ctx.provides,n=y(j.TOKEN,r),s=y(z.TOKEN,r),o=y(Q.TOKEN,r),a=i[Z.INSTANCE_KEY]=new Z(n,s,o);a.setInput(e.value),a.mounted(),(l=a.ngOnInit)==null||l.call(a),setTimeout(()=>{var c;(c=a.ngAfterViewInit)==null||c.call(a)},0)},updated(i,e){i[Z.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[Z.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class J extends we{constructor(e,t,r,n,s){super(s),this.draggable=t,this.dragDropSyncService=r,this.dragDropService=n,this.inputNameMap={dragSync:"dragSyncGroup",dragSyncGroup:"dragSyncGroup"},this.dragSyncGroup="",this.subscription=new C,this.el={nativeElement:null},this.subDragElEvent=o=>{this.syncGroupDirectives.forEach(a=>this.renderDisplay(a.el.nativeElement,o))},this.el.nativeElement=e,this.descendantItem=this}ngOnInit(){this.draggable&&(this.subscription.add(this.draggable.dragElShowHideEvent.subscribe(this.subDragElEvent)),this.subscription.add(this.draggable.beforeDragStartEvent.subscribe(()=>{this.syncGroupDirectives=this.dragDropSyncService.getDragSyncByGroup(this.dragSyncGroup).filter(e=>e!==this),this.dragDropService.dragSyncGroupDirectives=this.syncGroupDirectives})),this.subscription.add(this.draggable.dropEndEvent.subscribe(()=>{this.dragDropService.dragSyncGroupDirectives=void 0,this.syncGroupDirectives=void 0}))),super.ngOnInit()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}renderDisplay(e,t){e.style.display=t?"":"none"}}J.INSTANCE_KEY="__vueDevuiDragSyncDirectiveInstance";var pt={mounted(i,e,t){var c;const r=t.ctx.provides;let n=y(_.TOKEN,r);(n==null?void 0:n.el.nativeElement)!==i&&(n=void 0);const s=y(j.TOKEN,r),o=y(O.TOKEN,r),a=y(z.TOKEN,r),l=i[J.INSTANCE_KEY]=new J(i,n,s,o,a);l.setInput(e.value),l.mounted(),(c=l.ngOnInit)==null||c.call(l)},updated(i,e){i[J.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[J.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}};class $ extends we{constructor(e,t,r,n){super(n),this.droppable=t,this.dragDropSyncService=r,this.inputNameMap={dropSortSync:"dropSyncGroup",dropSyncGroup:"dropSyncGroup",dropSyncDirection:"direction"},this.dropSyncGroup="",this.direction="v",this.subscription=new C,this.el={nativeElement:null},this.subRenderEvent=s=>{this.syncGroupDirectives=this.dragDropSyncService.getDropSyncByGroup(this.dropSyncGroup).filter(o=>o!==this),this.syncGroupDirectives.forEach(o=>{o.renderPlaceholder(s,this.droppable)})},this.subInsertionEvent=s=>{this.syncGroupDirectives=this.dragDropSyncService.getDropSyncByGroup(this.dropSyncGroup).filter(o=>o!==this),this.syncGroupDirectives.forEach(o=>{o.insertPlaceholderCommand({command:s.command,container:o.sortContainer,relatedEl:o.getChildrenElByIndex(o.sortContainer,s.index)})})},this.el.nativeElement=e,this.descendantItem=this}ngOnInit(){this.sortContainer=this.el.nativeElement,this.droppable&&(this.sortContainer=this.droppable.getSortContainer(),this.subscription.add(this.droppable.placeholderInsertionEvent.subscribe(this.subInsertionEvent)),this.subscription.add(this.droppable.placeholderRenderEvent.subscribe(this.subRenderEvent))),super.ngOnInit()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}getChildrenElByIndex(e,t){return t===void 0||e&&e.children&&e.children.length<t||t<0?null:this.sortContainer.children.item(t)}renderPlaceholder(e,t){this.placeholder||(this.placeholder=document.createElement(t.placeholderTag),this.placeholder.className="drag-placeholder",this.placeholder.classList.add("drag-sync-placeholder"),this.placeholder.innerText=t.placeholderText);const{width:r,height:n}=e;this.direction==="v"?(this.placeholder.style.width=r+"px",this.placeholder.style.height=this.sortContainer.getBoundingClientRect().height+"px"):(this.placeholder.style.height=n+"px",this.placeholder.style.width=this.sortContainer.getBoundingClientRect().width+"px"),f.addElStyles(this.placeholder,t.placeholderStyle)}insertPlaceholderCommand(e){if(e.command==="insertBefore"&&e.container){e.container.insertBefore(this.placeholder,e.relatedEl);return}if(e.command==="append"&&e.container){e.container.appendChild(this.placeholder);return}if(e.command==="remove"&&e.container){e.container.contains(this.placeholder)&&e.container.removeChild(this.placeholder);return}}}$.INSTANCE_KEY="__vueDevuiDropSortSyncDirectiveInstance";var vt={mounted(i,e,t){var l;const r=t.ctx.provides;let n=y(B.TOKEN,r);(n==null?void 0:n.el.nativeElement)!==i&&(n=void 0);const s=y(j.TOKEN,r),o=y(Q.TOKEN,r),a=i[$.INSTANCE_KEY]=new $(i,n,s,o);a.setInput(e.value),a.mounted(),(l=a.ngOnInit)==null||l.call(a)},updated(i,e){i[$.INSTANCE_KEY].updateInput(e.value,e.oldValue)},beforeUnmount(i){var t;const e=i[$.INSTANCE_KEY];(t=e.ngOnDestroy)==null||t.call(e)}},Er={title:"DragDropSync \u62D6\u62FD\u540C\u6B65",category:"\u57FA\u7840\u7EC4\u4EF6",install(i){i.directive("dDragDropSyncBox",ft),i.directive("dDragSync",pt),i.directive("dDropSortSync",vt)}},wr={title:"DragDrop 2.0 \u62D6\u62FD",category:"\u901A\u7528",status:"100%",install(i){i.directive("dDraggable",it),i.directive("dDroppable",st),i.directive("dSortable",ot),i.directive("dDropScrollEnhanced",ct),i.directive("dDropScrollEnhancedSide",dt),i.directive("dDraggableBatchDrag",Sr),i.directive("dDragPreview",mr),i.component("DDragPreviewTemplate",tt),i.component(ht.name,ht),i.provide(O.TOKEN,new O),i.use(Er)}};u.BatchDraggableDirective=X,u.DescendantChildren=we,u.DescendantRegisterService=Ee,u.DescendantRoot=Ie,u.DragDropService=O,u.DragDropSyncBox=ft,u.DragDropSyncBoxDirective=Z,u.DragDropSyncService=j,u.DragPreviewCloneDomRefComponent=be,u.DragPreviewComponent=rt,u.DragPreviewDirective=G,u.DragPreviewTemplate=tt,u.DragSync=pt,u.DragSyncDescendantRegisterService=z,u.DragSyncDirective=J,u.Draggable=it,u.DraggableDirective=_,u.DropEvent=nt,u.DropScrollEnhanceTimingFunctionGroup=lt,u.DropScrollEnhanced=ct,u.DropScrollEnhancedDirective=k,u.DropScrollEnhancedSide=dt,u.DropScrollEnhancedSideDirective=re,u.DropScrollOrientation=at,u.DropSortSync=vt,u.DropSortSyncDescendantRegisterService=Q,u.DropSortSyncDirective=$,u.Droppable=st,u.DroppableDirective=B,u.Sortable=ot,u.SortableDirective=te,u.default=wr,u.useDragDropService=vr,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
