{"version":3,"file":"editor.main-BZ_so1NV.js","names":["__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","__reExport","monaco_editor_core_exports","monaco_editor_core_star","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","__reExport","monaco_editor_core_exports","monaco_editor_core_star","LanguageServiceDefaultsImpl","optionsDefault","getMode","__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","__reExport","monaco_editor_core_exports","monaco_editor_core_star","LanguageServiceDefaultsImpl","getMode","monaco_editor_core_star","__decorate","__param","__awaiter","SelectionAnchorController","editor","Selection","_a","nls.localize","_a","editor","Selection","Range","Position","Range","Selection","editor","nls.localize","nls.localize","editor","Range","__awaiter","platform.isNative","browser.isFirefox","nls.localize","editor","platform.isWeb","__awaiter","_a","Selection","Range","__decorate","__param","MessageController","editor","MessageWidget","Range","nls.localize","dispose","__decorate","__param","__awaiter","Context","CodeMenuRenderer","_a","_b","CodeActionMenu","_c","_d","dom.addDisposableListener","element","dom.trackFocus","Position","dom.getDomNodePagePosition","__decorate","__param","LightBulbWidget","Emitter","dom.addStandardDisposableGenericMouseDownListener","dom.getDomNodePagePosition","dom.addDisposableListener","lineNumber","nls.localize","_a","__decorate","__param","__awaiter","__classPrivateFieldSet","__classPrivateFieldGet","CodeActionUi","_a","_b","_c","_d","_e","Range","Emitter","_a","__decorate","__param","__awaiter","editor","nls.localize","QuickFixController","_a","weight","Context","Extensions","nls.localize","__awaiter","provider","__decorate","__param","CodeLensCache","_a","item","Range","editor","dom.$","decoration","Range","_a","__decorate","__param","__awaiter","CodeLensContribution","dom.createStyleSheet","dom.isInShadowDOM","_a","_b","_c","promises","request","i","editor","Range","__decorate","__param","__awaiter","ColorDetector","editor","Range","decoration","Emitter","$","dom.$","dom.append","dom.addDisposableListener","Emitter","dom.getDomNodePagePosition","transparent","__decorate","__param","__awaiter","ColorHoverParticipant","Range","platform.isMacintosh","Emitter","editor","__decorate","__param","EmbeddedCodeEditorWidget","defaultOptions","Range","editor","objects.deepClone","width","Emitter","EventType","GestureEventType","Emitter","_a","_b","__decorate","__param","__awaiter","target","MenuEntryActionViewItem","_a","SubmenuEntryActionViewItem","_b","DropdownWithDefaultActionViewItem","_c","EventType","__decorate","__param","editor","nls.localize","PeekContext","PeekContextController","PeekViewWidget","Emitter","dom.$","__awaiter","_a","_b","Range","Emitter","strings.commonPrefixLength","__decorate","__param","DataSource","StringRepresentationProvider","_a","FileReferencesTemplate","dom.append","dom.$","FileReferencesRenderer","__decorate","__param","__awaiter","Range","_a","ReferenceWidget","peekView.PeekViewWidget","editor","Emitter","dom.Dimension","peekView.peekViewBorder","peekView.peekViewTitleBackground","peekView.peekViewTitleForeground","peekView.peekViewTitleInfoForeground","dom.append","dom.$","nls.localize","peekView.peekViewResultsBackground","dom.addStandardDisposableListener","peekView.IPeekViewService","__decorate","__param","__awaiter","nls.localize","ReferencesController","editor","_a","_b","Position","Range","__decorate","__param","SymbolNavigationService","_a","_b","EditorState","editor","Range","Emitter","__awaiter","model","position","__awaiter","_a","nls.localize","editor","Range","references","__decorate","__param","GotoDefinitionAtPositionEditorContribution","editor","_a","Range","nls.localize","$","dom.$","dom.append","dom.addDisposableListener","__awaiter","__asyncValues","v","Emitter","_a","_b","_c","HoverParticipantRegistry","child","parent","marker","nls.localize","Emitter","__decorate","__param","ContextScopedFindInput","ContextScopedReplaceInput","__awaiter","Context","Range","Position","_a","_b","_c","sw","editor","__decorate","__param","$","dom.$","ContentHoverController","dom.addStandardDisposableListener","Range","Position","ContentHoverWidget","_a","_b","SuggestContext","EditorHoverStatusBar","dom.append","editor","getEscapeReplacement","escape","sanitize","noopTest","lexer","Tokenizer","options","exports","list","escape$1","link","mangle","smartypants","Lexer","inline","Renderer","TextRenderer","Slugger","slug","Parser","parse","parseInline","marked","done","args","_loop","prop","_loop2","_loop3","_a","value","element","_b","DOM.addDisposableListener","DOM.hookDomPurifyHrefAndSrcSanitizer","dompurify.sanitize","__decorate","__param","__awaiter","_a","MarkdownRenderer","Emitter","_b","_c","$","dom.$","editor","dom.append","__awaiter","__decorate","__param","$","dom.$","MarkdownHoverParticipant","nls.localize","Range","Position","dom.append","__decorate","__param","MarkerList","Emitter","Range","MarkerSeverity","MarkerNavigationService","Severity","__decorate","__param","editor","dom.addStandardDisposableListener","dom.$","dom.append","MarkerSeverity","nls.localize","MarkerNavigationWidget","Emitter","Range","__decorate","__param","__awaiter","MarkerController","editor","_a","_b","_c","Range","Position","nls.localize","__decorate","__param","$","dom.$","MarkerHoverParticipant","Range","MarkerSeverity","dom.append","dom.addDisposableListener","messageElement","message","nls.localize","_a","dom.getDomNodePagePosition","__decorate","__param","ModesHoverController","editor","_a","_b","_c","_d","_e","nls.localize","Range","Range","__awaiter","_a","generateUuid","_a","Extensions","__awaiter","_a","__decorate","__param","path.basename","name","path.dirname","CommentBasedVariableResolver","nls.localize","__decorate","__param","Range","Selection","id","placeholder","_defaultOptions","SnippetSession","editor","__decorate","__param","SnippetController2","editor","_a","Position","Selection","__decorate","__param","__awaiter","CopyPasteController","editor","_a","Range","_b","_c","Extensions","nls.localize","Range","Position","Selection","strings.firstNonWhitespaceIndex","Position","Range","firstNonWhitespaceIndex","Selection","j","lenJ","editor","Range","nls.localize","__decorate","__param","ContextMenuController","editor","dom.getShadowRoot","dom.getDomNodePagePosition","actions","nls.localize","_a","CursorState","editor","nls.localize","_a","Range","Selection","editor","Position","Selection","Range","__decorate","__param","__awaiter","DropIntoEditorController","editor","edit","Range","Selection","DefaultOnDropProvider","_a","editor","Range","Range","strings.containsUppercaseCharacter","len","editor","Range","Position","Selection","editor","dom.addDisposableListener","Emitter","Range","_a","_a","_b","__awaiter","nls.localize","platform.isMacintosh","dom.trackFocus","dom.getTotalWidth","strings.format","dom.getDomNodePagePosition","dom.getTopLeftOffset","dom.isInDOM","Range","platform.isWindows","platform.isNative","platform.isLinux","dom.getComputedStyle","_a","_b","foreground","__decorate","__param","__awaiter","editor","CommonFindController","strings.escapeRegExpCharacters","FindController","nls.localize","size","Emitter","_a","_b","Emitter","Range","RangesCollector","_a","line","editor","_a","__decorate","__param","FoldingController","editor","Severity","nls.localize","options","_a","foldingModel","types.isUndefined","types.isObject","types.isNumber","types.isString","types.isArray","nls.localize","__decorate","__param","__awaiter","FormatOnType","CancellationTokenSource","FormatOnPaste","editor","nls.localize","Range","__decorate","__param","__awaiter","_a","CancellationTokenSource","provider","result","group","child","Range","Position","OutlineModelService","__awaiter","Range","editor","Emitter","strings.commonPrefixLength","strings.commonSuffixLength","Range","strings.getLeadingWhitespace","strings.splitLines","sum","maxCharCode","node","__decorate","__param","__awaiter","InlineCompletionsModel","editor","Emitter","_a","Range","__decorate","__param","SuggestMemoryService","_a","__decorate","__param","WordContextKey","_a","__decorate","__param","SuggestAlternatives","_a","editor","__awaiter","Range","Position","column","__awaiter","editor","Range","__decorate","__param","__awaiter","LineContext","editor","SuggestModel","Emitter","Selection","_a","CancellationTokenSource","completions","wordDistance","_b","model","ctx","editor","__decorate","__param","_a","SuggestWidgetStatus","dom.append","dom.$","Emitter","__decorate","__param","SuggestDetailsWidget","Emitter","dom.Dimension","dom.$","dom.append","nls.localize","_a","_b","dom.getClientArea","size","__decorate","__param","_a","nls.localize","ItemRenderer","Emitter","__decorate","__param","__awaiter","nls.localize","editor","_a","_b","size","SuggestWidget","Emitter","_c","_d","dom.Dimension","dom.append","dom.$","detail","strings.format","SuggestContext","dom.addStandardDisposableListener","dom.getClientArea","dom.getDomNodePagePosition","__decorate","__param","Range","SuggestController","editor","SuggestContext","Position","platform.isMacintosh","CancellationTokenSource","_a","nls.localize","weight","editor","Emitter","Position","Range","__decorate","__param","__awaiter","SuggestWidgetPreviewModel","editor","_a","_b","_c","__decorate","__param","__awaiter","Emitter","_a","_b","GhostTextModel","editor","Position","__decorate","__param","_a","GhostTextWidget","editor","Range","dom.addStandardDisposableListener","Position","isBasicASCII","strings.isBasicASCII","containsRTL","strings.containsRTL","foreground","__decorate","__param","__awaiter","GhostTextController","editor","Emitter","_a","_b","nls.localize","ActiveGhostTextController","__decorate","__param","_a","_b","_c","InlineCompletionsHoverParticipant","Range","nls.localize","$","dom.$","dom.append","__decorate","__param","strings.getLeadingWhitespace","Selection","adjustedLineContent","nls.localize","editor","Range","AutoIndentOnPaste","indentUtils.getSpaceCnt","indentUtils.generateIndent","__awaiter","_a","_b","Range","Position","__awaiter","_a","editor","Range","_b","dom.getDomNodePagePosition","accessor","__decorate","__param","__awaiter","hasTriggerModifier","InlayHintsController","_a","editor","CancellationTokenSource","model","Range","_b","colors.editorActiveLinkForeground","colors.editorInlayHintParameterBackground","colors.editorInlayHintParameterForeground","colors.editorInlayHintTypeBackground","colors.editorInlayHintTypeForeground","colors.editorInlayHintBackground","colors.editorInlayHintForeground","__decorate","__param","__awaiter","v","InlayHintsHover","editor","_a","platform.isMacintosh","Position","Selection","__decorate","__param","InPlaceReplaceController","editor","Range","Selection","nls.localize","nls.localize","editor","lastNonWhitespaceIndex","strings.lastNonWhitespaceIndex","Range","Range","Selection","__decorate","__param","MoveLinesCommand","Range","Selection","strings.getLeadingWhitespace","indentUtils.getSpaceCnt","indentUtils.generateIndent","strings.lastNonWhitespaceIndex","Range","editor","Range","nls.localize","Selection","Position","i","__decorate","__param","__awaiter","LinkedEditingContribution","editor","_a","commonPrefixLength","strings.commonPrefixLength","commonSuffixLength","strings.commonSuffixLength","Range","nls.localize","Position","accessor","arrays.isNonEmptyArray","__awaiter","Link","Range","__decorate","__param","__awaiter","LinkDetector","editor","resources.originalFSPath","relativePath","resources.joinPath","nls.localize","decoration","_a","platform.isMacintosh","__decorate","__param","nls.localize","editor","Selection","Range","SelectionHighlighter","__awaiter","Position","__awaiter","Emitter","editor","first","__decorate","__param","$","dom.$","nls.localize","ParameterHintsWidget","editor","dom.append","dom.addDisposableListener","_a","foreground","__decorate","__param","ParameterHintsController","editor","nls.localize","__decorate","__param","RenameInputField","_a","_b","_c","_d","Position","__decorate","__param","__awaiter","Range","nls.localize","RenameController","editor","CancellationTokenSource","_a","_b","Position","accessor","Extensions","__decorate","__param","__awaiter","StickyScrollController","editor","_a","_b","CancellationTokenSource","Position","Range","__decorate","__param","__awaiter","SmartSelectController","editor","_a","arrays.isNonEmptyArray","arrays.equals","ranges","Selection","nls.localize","Range","Position","__decorate","__param","__awaiter","InlineCompletionResults","_a","first","Range","SuggestInlineCompletions","EditorContribution","editor","nls.localize","editor","nls.localize","__decorate","__param","Link","_a","TouchEventType","__decorate","__param","BannerController","_a","Banner","__decorate","__param","__awaiter","nls.localize","UnicodeHighlighter","platform.language","decoration","DocumentUnicodeHighlighter","UnicodeHighlighterHoverParticipant","codePoint","_a","__decorate","__param","__awaiter","UnusualLineTerminatorsDetector","nls.localize","__decorate","__param","ViewportSemanticTokensContribution","editor","__decorate","__param","nls.localize","arrays.isNonEmptyArray","Range","editor","WordHighlighterContribution","editor","Position","Selection","_a","Range","nls.localize","Range","editor","nls.localize","__decorate","__param","AccessibilityHelpController","editor","strings.format","AccessibilityHelpWidget","dom.addStandardDisposableListener","platform.isMacintosh","editor","dom.addDisposableListener","__decorate","__param","InspectTokensController","editor","foreground","__decorate","__param","HelpQuickAccessProvider","_a","editor","editor","_a","_b","__decorate","__param","StandaloneGotoLineQuickAccessProvider","GotoLineAction","createFuzzyMatches","__decorate","__param","__awaiter","AbstractGotoSymbolQuickAccessProvider","editor","_a","CancellationTokenSource","Range","_b","document","__decorate","__param","StandaloneGotoSymbolQuickAccessProvider","nls.localize","arrays.coalesce","types.isString","__awaiter","_a","CancellationTokenSource","_b","_c","__decorate","__param","__awaiter","AbstractCommandsQuickAccessProvider","Severity","CommandsHistory","_a","_b","__decorate","__param","StandaloneCommandsQuickAccessProvider","StandaloneReferencesController","editor"],"sources":["../../monaco-editor/esm/vs/basic-languages/_.contribution.js","../../monaco-editor/esm/vs/basic-languages/abap/abap.contribution.js","../../monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js","../../monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js","../../monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js","../../monaco-editor/esm/vs/basic-languages/bicep/bicep.contribution.js","../../monaco-editor/esm/vs/basic-languages/cameligo/cameligo.contribution.js","../../monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js","../../monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js","../../monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js","../../monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js","../../monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js","../../monaco-editor/esm/vs/basic-languages/css/css.contribution.js","../../monaco-editor/esm/vs/basic-languages/cypher/cypher.contribution.js","../../monaco-editor/esm/vs/basic-languages/dart/dart.contribution.js","../../monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js","../../monaco-editor/esm/vs/basic-languages/ecl/ecl.contribution.js","../../monaco-editor/esm/vs/basic-languages/elixir/elixir.contribution.js","../../monaco-editor/esm/vs/basic-languages/flow9/flow9.contribution.js","../../monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js","../../monaco-editor/esm/vs/basic-languages/freemarker2/freemarker2.contribution.js","../../monaco-editor/esm/vs/basic-languages/go/go.contribution.js","../../monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js","../../monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js","../../monaco-editor/esm/vs/basic-languages/hcl/hcl.contribution.js","../../monaco-editor/esm/vs/basic-languages/html/html.contribution.js","../../monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js","../../monaco-editor/esm/vs/basic-languages/java/java.contribution.js","../../monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution.js","../../monaco-editor/esm/vs/basic-languages/julia/julia.contribution.js","../../monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js","../../monaco-editor/esm/vs/basic-languages/less/less.contribution.js","../../monaco-editor/esm/vs/basic-languages/lexon/lexon.contribution.js","../../monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js","../../monaco-editor/esm/vs/basic-languages/liquid/liquid.contribution.js","../../monaco-editor/esm/vs/basic-languages/m3/m3.contribution.js","../../monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js","../../monaco-editor/esm/vs/basic-languages/mips/mips.contribution.js","../../monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js","../../monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js","../../monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js","../../monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js","../../monaco-editor/esm/vs/basic-languages/pascaligo/pascaligo.contribution.js","../../monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js","../../monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js","../../monaco-editor/esm/vs/basic-languages/php/php.contribution.js","../../monaco-editor/esm/vs/basic-languages/pla/pla.contribution.js","../../monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js","../../monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js","../../monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js","../../monaco-editor/esm/vs/basic-languages/protobuf/protobuf.contribution.js","../../monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js","../../monaco-editor/esm/vs/basic-languages/python/python.contribution.js","../../monaco-editor/esm/vs/basic-languages/qsharp/qsharp.contribution.js","../../monaco-editor/esm/vs/basic-languages/r/r.contribution.js","../../monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js","../../monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js","../../monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js","../../monaco-editor/esm/vs/basic-languages/restructuredtext/restructuredtext.contribution.js","../../monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js","../../monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js","../../monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js","../../monaco-editor/esm/vs/basic-languages/scala/scala.contribution.js","../../monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js","../../monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js","../../monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js","../../monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js","../../monaco-editor/esm/vs/basic-languages/sophia/sophia.contribution.js","../../monaco-editor/esm/vs/basic-languages/sparql/sparql.contribution.js","../../monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js","../../monaco-editor/esm/vs/basic-languages/st/st.contribution.js","../../monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js","../../monaco-editor/esm/vs/basic-languages/systemverilog/systemverilog.contribution.js","../../monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js","../../monaco-editor/esm/vs/basic-languages/twig/twig.contribution.js","../../monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js","../../monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js","../../monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js","../../monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js","../../monaco-editor/esm/vs/language/css/monaco.contribution.js","../../monaco-editor/esm/vs/language/html/monaco.contribution.js","../../monaco-editor/esm/vs/language/json/monaco.contribution.js","../../monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../../monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../../monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../../monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/types.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../../monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionWidgetContribution.js","../../monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../../monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","../../monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js","../../monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js","../../monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js","../../monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js","../../monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js","../../monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","../../monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","../../monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js","../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","../../monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js","../../monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js","../../monaco-editor/esm/vs/base/common/marked/marked.js","../../monaco-editor/esm/vs/base/browser/markdownRenderer.js","../../monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js","../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","../../monaco-editor/esm/vs/platform/severityIcon/common/severityIcon.js","../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","../../monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js","../../monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js","../../monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../../monaco-editor/esm/vs/base/common/dataTransfer.js","../../monaco-editor/esm/vs/base/common/uuid.js","../../monaco-editor/esm/vs/platform/dnd/browser/dnd.js","../../monaco-editor/esm/vs/editor/browser/dnd.js","../../monaco-editor/esm/vs/base/common/labels.js","../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js","../../monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","../../monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteController.js","../../monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteContribution.js","../../monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../../monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../../monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../../monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../../monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js","../../monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js","../../monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js","../../monaco-editor/esm/vs/editor/contrib/dropIntoEditor/browser/dropIntoEditorContribution.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js","../../monaco-editor/esm/vs/base/common/search.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/findState.js","../../monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js","../../monaco-editor/esm/vs/editor/contrib/find/browser/findController.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js","../../monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js","../../monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","../../monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","../../monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js","../../monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/consts.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionToGhostText.js","../../monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../../monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js","../../monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../../monaco-editor/esm/vs/platform/files/common/files.js","../../monaco-editor/esm/vs/editor/common/services/getIconClasses.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetPreviewModel.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextModel.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextWidget.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextController.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextHoverParticipant.js","../../monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.contribution.js","../../monaco-editor/esm/vs/editor/contrib/indentation/browser/indentUtils.js","../../monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js","../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js","../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js","../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js","../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js","../../monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js","../../monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js","../../monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js","../../monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js","../../monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js","../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js","../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js","../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js","../../monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js","../../monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js","../../monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js","../../monaco-editor/esm/vs/editor/contrib/links/browser/links.js","../../monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js","../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js","../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js","../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js","../../monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js","../../monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js","../../monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","../../monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScroll.js","../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","../../monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","../../monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../../monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js","../../monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js","../../monaco-editor/esm/vs/platform/opener/browser/link.js","../../monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js","../../monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js","../../monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js","../../monaco-editor/esm/vs/editor/contrib/viewportSemanticTokens/browser/viewportSemanticTokens.js","../../monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js","../../monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js","../../monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js","../../monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js","../../monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js","../../monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","../../monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","../../monaco-editor/esm/vs/platform/quickinput/browser/helpQuickAccess.js","../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js","../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js","../../monaco-editor/esm/vs/base/common/fuzzyScorer.js","../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js","../../monaco-editor/esm/vs/base/common/errorMessage.js","../../monaco-editor/esm/vs/platform/quickinput/browser/pickerQuickAccess.js","../../monaco-editor/esm/vs/platform/quickinput/browser/commandsQuickAccess.js","../../monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","../../monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js","../../monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js","../../monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js"],"sourcesContent":["/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../editor/editor.api.js\";\n\n// src/basic-languages/_.contribution.ts\nvar languageDefinitions = {};\nvar lazyLanguageLoaders = {};\nvar LazyLanguageLoader = class {\n  static getOrCreate(languageId) {\n    if (!lazyLanguageLoaders[languageId]) {\n      lazyLanguageLoaders[languageId] = new LazyLanguageLoader(languageId);\n    }\n    return lazyLanguageLoaders[languageId];\n  }\n  _languageId;\n  _loadingTriggered;\n  _lazyLoadPromise;\n  _lazyLoadPromiseResolve;\n  _lazyLoadPromiseReject;\n  constructor(languageId) {\n    this._languageId = languageId;\n    this._loadingTriggered = false;\n    this._lazyLoadPromise = new Promise((resolve, reject) => {\n      this._lazyLoadPromiseResolve = resolve;\n      this._lazyLoadPromiseReject = reject;\n    });\n  }\n  load() {\n    if (!this._loadingTriggered) {\n      this._loadingTriggered = true;\n      languageDefinitions[this._languageId].loader().then((mod) => this._lazyLoadPromiseResolve(mod), (err) => this._lazyLoadPromiseReject(err));\n    }\n    return this._lazyLoadPromise;\n  }\n};\nasync function loadLanguage(languageId) {\n  await LazyLanguageLoader.getOrCreate(languageId).load();\n  const model = monaco_editor_core_exports.editor.createModel(\"\", languageId);\n  model.dispose();\n}\nfunction registerLanguage(def) {\n  const languageId = def.id;\n  languageDefinitions[languageId] = def;\n  monaco_editor_core_exports.languages.register(def);\n  const lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\n  monaco_editor_core_exports.languages.registerTokensProviderFactory(languageId, {\n    create: async () => {\n      const mod = await lazyLanguageLoader.load();\n      return mod.language;\n    }\n  });\n  monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    const mod = await lazyLanguageLoader.load();\n    monaco_editor_core_exports.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\nexport {\n  loadLanguage,\n  registerLanguage\n};\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/abap/abap.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"abap\",\n  extensions: [\".abap\"],\n  aliases: [\"abap\", \"ABAP\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/abap/abap\"], resolve, reject);\n      });\n    } else {\n      return import(\"./abap.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/apex/apex.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"apex\",\n  extensions: [\".cls\"],\n  aliases: [\"Apex\", \"apex\"],\n  mimetypes: [\"text/x-apex-source\", \"text/x-apex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/apex/apex\"], resolve, reject);\n      });\n    } else {\n      return import(\"./apex.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/azcli/azcli.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"azcli\",\n  extensions: [\".azcli\"],\n  aliases: [\"Azure CLI\", \"azcli\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/azcli/azcli\"], resolve, reject);\n      });\n    } else {\n      return import(\"./azcli.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bat/bat.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bat\",\n  extensions: [\".bat\", \".cmd\"],\n  aliases: [\"Batch\", \"bat\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bat/bat\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bat.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bicep/bicep.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bicep\",\n  extensions: [\".bicep\"],\n  aliases: [\"Bicep\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bicep/bicep\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bicep.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cameligo/cameligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cameligo\",\n  extensions: [\".mligo\"],\n  aliases: [\"Cameligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cameligo/cameligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cameligo.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/clojure/clojure.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"clojure\",\n  extensions: [\".clj\", \".cljs\", \".cljc\", \".edn\"],\n  aliases: [\"clojure\", \"Clojure\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/clojure/clojure\"], resolve, reject);\n      });\n    } else {\n      return import(\"./clojure.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/coffee/coffee.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"coffeescript\",\n  extensions: [\".coffee\"],\n  aliases: [\"CoffeeScript\", \"coffeescript\", \"coffee\"],\n  mimetypes: [\"text/x-coffeescript\", \"text/coffeescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/coffee/coffee\"], resolve, reject);\n      });\n    } else {\n      return import(\"./coffee.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cpp/cpp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"c\",\n  extensions: [\".c\", \".h\"],\n  aliases: [\"C\", \"c\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"cpp\",\n  extensions: [\".cpp\", \".cc\", \".cxx\", \".hpp\", \".hh\", \".hxx\"],\n  aliases: [\"C++\", \"Cpp\", \"cpp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csharp/csharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csharp\",\n  extensions: [\".cs\", \".csx\", \".cake\"],\n  aliases: [\"C#\", \"csharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csharp/csharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csharp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csp/csp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csp\",\n  extensions: [],\n  aliases: [\"CSP\", \"csp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csp/csp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/css/css.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"css\",\n  extensions: [\".css\"],\n  aliases: [\"CSS\", \"css\"],\n  mimetypes: [\"text/css\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/css/css\"], resolve, reject);\n      });\n    } else {\n      return import(\"./css.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cypher/cypher.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cypher\",\n  extensions: [\".cypher\", \".cyp\"],\n  aliases: [\"Cypher\", \"OpenCypher\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cypher/cypher\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cypher.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dart/dart.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dart\",\n  extensions: [\".dart\"],\n  aliases: [\"Dart\", \"dart\"],\n  mimetypes: [\"text/x-dart-source\", \"text/x-dart\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dart/dart\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dart.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dockerfile/dockerfile.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dockerfile\",\n  extensions: [\".dockerfile\"],\n  filenames: [\"Dockerfile\"],\n  aliases: [\"Dockerfile\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dockerfile/dockerfile\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dockerfile.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ecl/ecl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ecl\",\n  extensions: [\".ecl\"],\n  aliases: [\"ECL\", \"Ecl\", \"ecl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ecl/ecl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ecl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/elixir/elixir.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"elixir\",\n  extensions: [\".ex\", \".exs\"],\n  aliases: [\"Elixir\", \"elixir\", \"ex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/elixir/elixir\"], resolve, reject);\n      });\n    } else {\n      return import(\"./elixir.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/flow9/flow9.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"flow9\",\n  extensions: [\".flow\"],\n  aliases: [\"Flow9\", \"Flow\", \"flow9\", \"flow\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/flow9/flow9\"], resolve, reject);\n      });\n    } else {\n      return import(\"./flow9.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/fsharp/fsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"fsharp\",\n  extensions: [\".fs\", \".fsi\", \".ml\", \".mli\", \".fsx\", \".fsscript\"],\n  aliases: [\"F#\", \"FSharp\", \"fsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/fsharp/fsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./fsharp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/freemarker2/freemarker2.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"freemarker2\",\n  extensions: [\".ftl\", \".ftlh\", \".ftlx\"],\n  aliases: [\"FreeMarker2\", \"Apache FreeMarker2\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Angle/Dollar)\", \"Apache FreeMarker2 (Angle/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Bracket/Dollar)\", \"Apache FreeMarker2 (Bracket/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagBracketInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Angle/Bracket)\", \"Apache FreeMarker2 (Angle/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Bracket/Bracket)\", \"Apache FreeMarker2 (Bracket/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagBracketInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Auto/Dollar)\", \"Apache FreeMarker2 (Auto/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAutoInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Auto/Bracket)\", \"Apache FreeMarker2 (Auto/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAutoInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationBracket);\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/go/go.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"go\",\n  extensions: [\".go\"],\n  aliases: [\"Go\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/go/go\"], resolve, reject);\n      });\n    } else {\n      return import(\"./go.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/graphql/graphql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"graphql\",\n  extensions: [\".graphql\", \".gql\"],\n  aliases: [\"GraphQL\", \"graphql\", \"gql\"],\n  mimetypes: [\"application/graphql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/graphql/graphql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./graphql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/handlebars/handlebars.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"handlebars\",\n  extensions: [\".handlebars\", \".hbs\"],\n  aliases: [\"Handlebars\", \"handlebars\", \"hbs\"],\n  mimetypes: [\"text/x-handlebars-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/handlebars/handlebars\"], resolve, reject);\n      });\n    } else {\n      return import(\"./handlebars.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/hcl/hcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"hcl\",\n  extensions: [\".tf\", \".tfvars\", \".hcl\"],\n  aliases: [\"Terraform\", \"tf\", \"HCL\", \"hcl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/hcl/hcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./hcl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/html/html.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"html\",\n  extensions: [\".html\", \".htm\", \".shtml\", \".xhtml\", \".mdoc\", \".jsp\", \".asp\", \".aspx\", \".jshtm\"],\n  aliases: [\"HTML\", \"htm\", \"html\", \"xhtml\"],\n  mimetypes: [\"text/html\", \"text/x-jshtm\", \"text/template\", \"text/ng-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/html/html\"], resolve, reject);\n      });\n    } else {\n      return import(\"./html.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ini/ini.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ini\",\n  extensions: [\".ini\", \".properties\", \".gitconfig\"],\n  filenames: [\"config\", \".gitattributes\", \".gitconfig\", \".editorconfig\"],\n  aliases: [\"Ini\", \"ini\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ini/ini\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ini.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/java/java.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"java\",\n  extensions: [\".java\", \".jav\"],\n  aliases: [\"Java\", \"java\"],\n  mimetypes: [\"text/x-java-source\", \"text/x-java\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/java/java\"], resolve, reject);\n      });\n    } else {\n      return import(\"./java.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/javascript/javascript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"javascript\",\n  extensions: [\".js\", \".es6\", \".jsx\", \".mjs\", \".cjs\"],\n  firstLine: \"^#!.*\\\\bnode\",\n  filenames: [\"jakefile\"],\n  aliases: [\"JavaScript\", \"javascript\", \"js\"],\n  mimetypes: [\"text/javascript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/javascript/javascript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./javascript.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/julia/julia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"julia\",\n  extensions: [\".jl\"],\n  aliases: [\"julia\", \"Julia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/julia/julia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./julia.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/kotlin/kotlin.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"kotlin\",\n  extensions: [\".kt\"],\n  aliases: [\"Kotlin\", \"kotlin\"],\n  mimetypes: [\"text/x-kotlin-source\", \"text/x-kotlin\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/kotlin/kotlin\"], resolve, reject);\n      });\n    } else {\n      return import(\"./kotlin.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/less/less.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"less\",\n  extensions: [\".less\"],\n  aliases: [\"Less\", \"less\"],\n  mimetypes: [\"text/x-less\", \"text/less\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/less/less\"], resolve, reject);\n      });\n    } else {\n      return import(\"./less.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lexon/lexon.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lexon\",\n  extensions: [\".lex\"],\n  aliases: [\"Lexon\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lexon/lexon\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lexon.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lua/lua.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lua\",\n  extensions: [\".lua\"],\n  aliases: [\"Lua\", \"lua\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lua/lua\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lua.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/liquid/liquid.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"liquid\",\n  extensions: [\".liquid\", \".html.liquid\"],\n  aliases: [\"Liquid\", \"liquid\"],\n  mimetypes: [\"application/liquid\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/liquid/liquid\"], resolve, reject);\n      });\n    } else {\n      return import(\"./liquid.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/m3/m3.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"m3\",\n  extensions: [\".m3\", \".i3\", \".mg\", \".ig\"],\n  aliases: [\"Modula-3\", \"Modula3\", \"modula3\", \"m3\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/m3/m3\"], resolve, reject);\n      });\n    } else {\n      return import(\"./m3.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/markdown/markdown.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"markdown\",\n  extensions: [\".md\", \".markdown\", \".mdown\", \".mkdn\", \".mkd\", \".mdwn\", \".mdtxt\", \".mdtext\"],\n  aliases: [\"Markdown\", \"markdown\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/markdown/markdown\"], resolve, reject);\n      });\n    } else {\n      return import(\"./markdown.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mips/mips.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mips\",\n  extensions: [\".s\"],\n  aliases: [\"MIPS\", \"MIPS-V\"],\n  mimetypes: [\"text/x-mips\", \"text/mips\", \"text/plaintext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mips/mips\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mips.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/msdax/msdax.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"msdax\",\n  extensions: [\".dax\", \".msdax\"],\n  aliases: [\"DAX\", \"MSDAX\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/msdax/msdax\"], resolve, reject);\n      });\n    } else {\n      return import(\"./msdax.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mysql/mysql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mysql\",\n  extensions: [],\n  aliases: [\"MySQL\", \"mysql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mysql/mysql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mysql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/objective-c/objective-c.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"objective-c\",\n  extensions: [\".m\"],\n  aliases: [\"Objective-C\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/objective-c/objective-c\"], resolve, reject);\n      });\n    } else {\n      return import(\"./objective-c.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascal/pascal.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascal\",\n  extensions: [\".pas\", \".p\", \".pp\"],\n  aliases: [\"Pascal\", \"pas\"],\n  mimetypes: [\"text/x-pascal-source\", \"text/x-pascal\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascal/pascal\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascal.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascaligo/pascaligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascaligo\",\n  extensions: [\".ligo\"],\n  aliases: [\"Pascaligo\", \"ligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascaligo/pascaligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascaligo.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/perl/perl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"perl\",\n  extensions: [\".pl\"],\n  aliases: [\"Perl\", \"pl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/perl/perl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./perl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pgsql/pgsql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pgsql\",\n  extensions: [],\n  aliases: [\"PostgreSQL\", \"postgres\", \"pg\", \"postgre\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pgsql/pgsql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pgsql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/php/php.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"php\",\n  extensions: [\".php\", \".php4\", \".php5\", \".phtml\", \".ctp\"],\n  aliases: [\"PHP\", \"php\"],\n  mimetypes: [\"application/x-php\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/php/php\"], resolve, reject);\n      });\n    } else {\n      return import(\"./php.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pla/pla.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pla\",\n  extensions: [\".pla\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pla/pla\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pla.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/postiats/postiats.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"postiats\",\n  extensions: [\".dats\", \".sats\", \".hats\"],\n  aliases: [\"ATS\", \"ATS/Postiats\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/postiats/postiats\"], resolve, reject);\n      });\n    } else {\n      return import(\"./postiats.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powerquery/powerquery.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powerquery\",\n  extensions: [\".pq\", \".pqm\"],\n  aliases: [\"PQ\", \"M\", \"Power Query\", \"Power Query M\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powerquery/powerquery\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powerquery.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powershell/powershell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powershell\",\n  extensions: [\".ps1\", \".psm1\", \".psd1\"],\n  aliases: [\"PowerShell\", \"powershell\", \"ps\", \"ps1\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powershell/powershell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powershell.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/protobuf/protobuf.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"proto\",\n  extensions: [\".proto\"],\n  aliases: [\"protobuf\", \"Protocol Buffers\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/protobuf/protobuf\"], resolve, reject);\n      });\n    } else {\n      return import(\"./protobuf.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pug/pug.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pug\",\n  extensions: [\".jade\", \".pug\"],\n  aliases: [\"Pug\", \"Jade\", \"jade\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pug/pug\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pug.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/python/python.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"python\",\n  extensions: [\".py\", \".rpy\", \".pyw\", \".cpy\", \".gyp\", \".gypi\"],\n  aliases: [\"Python\", \"py\"],\n  firstLine: \"^#!/.*\\\\bpython[0-9.-]*\\\\b\",\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/python/python\"], resolve, reject);\n      });\n    } else {\n      return import(\"./python.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/qsharp/qsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"qsharp\",\n  extensions: [\".qs\"],\n  aliases: [\"Q#\", \"qsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/qsharp/qsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./qsharp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/r/r.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"r\",\n  extensions: [\".r\", \".rhistory\", \".rmd\", \".rprofile\", \".rt\"],\n  aliases: [\"R\", \"r\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/r/r\"], resolve, reject);\n      });\n    } else {\n      return import(\"./r.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/razor/razor.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"razor\",\n  extensions: [\".cshtml\"],\n  aliases: [\"Razor\", \"razor\"],\n  mimetypes: [\"text/x-cshtml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/razor/razor\"], resolve, reject);\n      });\n    } else {\n      return import(\"./razor.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redis/redis.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redis\",\n  extensions: [\".redis\"],\n  aliases: [\"redis\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redis/redis\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redis.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redshift/redshift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redshift\",\n  extensions: [],\n  aliases: [\"Redshift\", \"redshift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redshift/redshift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redshift.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/restructuredtext/restructuredtext.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"restructuredtext\",\n  extensions: [\".rst\"],\n  aliases: [\"reStructuredText\", \"restructuredtext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/restructuredtext/restructuredtext\"], resolve, reject);\n      });\n    } else {\n      return import(\"./restructuredtext.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ruby/ruby.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ruby\",\n  extensions: [\".rb\", \".rbx\", \".rjs\", \".gemspec\", \".pp\"],\n  filenames: [\"rakefile\", \"Gemfile\"],\n  aliases: [\"Ruby\", \"rb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ruby/ruby\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ruby.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/rust/rust.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"rust\",\n  extensions: [\".rs\", \".rlib\"],\n  aliases: [\"Rust\", \"rust\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/rust/rust\"], resolve, reject);\n      });\n    } else {\n      return import(\"./rust.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sb/sb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sb\",\n  extensions: [\".sb\"],\n  aliases: [\"Small Basic\", \"sb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sb/sb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sb.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scala/scala.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scala\",\n  extensions: [\".scala\", \".sc\", \".sbt\"],\n  aliases: [\"Scala\", \"scala\", \"SBT\", \"Sbt\", \"sbt\", \"Dotty\", \"dotty\"],\n  mimetypes: [\"text/x-scala-source\", \"text/x-scala\", \"text/x-sbt\", \"text/x-dotty\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scala/scala\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scala.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scheme/scheme.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scheme\",\n  extensions: [\".scm\", \".ss\", \".sch\", \".rkt\"],\n  aliases: [\"scheme\", \"Scheme\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scheme/scheme\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scheme.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scss/scss.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scss\",\n  extensions: [\".scss\"],\n  aliases: [\"Sass\", \"sass\", \"scss\"],\n  mimetypes: [\"text/x-scss\", \"text/scss\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scss/scss\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scss.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/shell/shell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"shell\",\n  extensions: [\".sh\", \".bash\"],\n  aliases: [\"Shell\", \"sh\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/shell/shell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./shell.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/solidity/solidity.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sol\",\n  extensions: [\".sol\"],\n  aliases: [\"sol\", \"solidity\", \"Solidity\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/solidity/solidity\"], resolve, reject);\n      });\n    } else {\n      return import(\"./solidity.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sophia/sophia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"aes\",\n  extensions: [\".aes\"],\n  aliases: [\"aes\", \"sophia\", \"Sophia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sophia/sophia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sophia.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sparql/sparql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sparql\",\n  extensions: [\".rq\"],\n  aliases: [\"sparql\", \"SPARQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sparql/sparql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sparql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sql/sql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sql\",\n  extensions: [\".sql\"],\n  aliases: [\"SQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sql/sql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/st/st.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"st\",\n  extensions: [\".st\", \".iecst\", \".iecplc\", \".lc3lib\"],\n  aliases: [\"StructuredText\", \"scl\", \"stl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/st/st\"], resolve, reject);\n      });\n    } else {\n      return import(\"./st.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/swift/swift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"swift\",\n  aliases: [\"Swift\", \"swift\"],\n  extensions: [\".swift\"],\n  mimetypes: [\"text/swift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/swift/swift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./swift.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/systemverilog/systemverilog.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"systemverilog\",\n  extensions: [\".sv\", \".svh\"],\n  aliases: [\"SV\", \"sv\", \"SystemVerilog\", \"systemverilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"verilog\",\n  extensions: [\".v\", \".vh\"],\n  aliases: [\"V\", \"v\", \"Verilog\", \"verilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/tcl/tcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"tcl\",\n  extensions: [\".tcl\"],\n  aliases: [\"tcl\", \"Tcl\", \"tcltk\", \"TclTk\", \"tcl/tk\", \"Tcl/Tk\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/tcl/tcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./tcl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/twig/twig.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"twig\",\n  extensions: [\".twig\"],\n  aliases: [\"Twig\", \"twig\"],\n  mimetypes: [\"text/x-twig\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/twig/twig\"], resolve, reject);\n      });\n    } else {\n      return import(\"./twig.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/typescript/typescript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"typescript\",\n  extensions: [\".ts\", \".tsx\"],\n  aliases: [\"TypeScript\", \"ts\", \"typescript\"],\n  mimetypes: [\"text/typescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/typescript/typescript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./typescript.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/vb/vb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"vb\",\n  extensions: [\".vb\"],\n  aliases: [\"Visual Basic\", \"vb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/vb/vb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./vb.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/xml/xml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"xml\",\n  extensions: [\n    \".xml\",\n    \".dtd\",\n    \".ascx\",\n    \".csproj\",\n    \".config\",\n    \".wxi\",\n    \".wxl\",\n    \".wxs\",\n    \".xaml\",\n    \".svg\",\n    \".svgz\",\n    \".opf\",\n    \".xsl\"\n  ],\n  firstLine: \"(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)\",\n  aliases: [\"XML\", \"xml\"],\n  mimetypes: [\"text/xml\", \"application/xml\", \"application/xaml+xml\", \"application/xml-dtd\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/xml/xml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./xml.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/yaml/yaml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"yaml\",\n  extensions: [\".yaml\", \".yml\"],\n  aliases: [\"YAML\", \"yaml\", \"YML\", \"yml\"],\n  mimetypes: [\"application/x-yaml\", \"text/x-yaml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/yaml/yaml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./yaml.js\");\n    }\n  }\n});\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/css/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this.options;\n  }\n  get options() {\n    return this._options;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setDiagnosticsOptions(options) {\n    this.setOptions(options);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar optionsDefault = {\n  validate: true,\n  lint: {\n    compatibleVendorPrefixes: \"ignore\",\n    vendorPrefix: \"warning\",\n    duplicateProperties: \"warning\",\n    emptyRules: \"warning\",\n    importStatement: \"ignore\",\n    boxModel: \"ignore\",\n    universalSelector: \"ignore\",\n    zeroUnits: \"ignore\",\n    fontFaceProperties: \"warning\",\n    hexColorLength: \"error\",\n    argumentsInColorFunction: \"error\",\n    unknownProperties: \"warning\",\n    ieHack: \"ignore\",\n    unknownVendorSpecificProperties: \"ignore\",\n    propertyIgnoredDueToDisplay: \"warning\",\n    important: \"ignore\",\n    float: \"ignore\",\n    idSelector: \"ignore\"\n  },\n  data: { useDefaultDataProvider: true },\n  format: {\n    newlineBetweenSelectors: true,\n    newlineBetweenRules: true,\n    spaceAroundSelectorSeparator: false,\n    braceStyle: \"collapse\",\n    maxPreserveNewLines: void 0,\n    preserveNewLines: true\n  }\n};\nvar modeConfigurationDefault = {\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  definitions: true,\n  references: true,\n  documentHighlights: true,\n  rename: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true,\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true\n};\nvar cssDefaults = new LanguageServiceDefaultsImpl(\"css\", optionsDefault, modeConfigurationDefault);\nvar scssDefaults = new LanguageServiceDefaultsImpl(\"scss\", optionsDefault, modeConfigurationDefault);\nvar lessDefaults = new LanguageServiceDefaultsImpl(\"less\", optionsDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.css = { cssDefaults, lessDefaults, scssDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/css/cssMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./cssMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.onLanguage(\"less\", () => {\n  getMode().then((mode) => mode.setupMode(lessDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"scss\", () => {\n  getMode().then((mode) => mode.setupMode(scssDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"css\", () => {\n  getMode().then((mode) => mode.setupMode(cssDefaults));\n});\nexport {\n  cssDefaults,\n  lessDefaults,\n  scssDefaults\n};\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/html/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get options() {\n    return this._options;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar formatDefaults = {\n  tabSize: 4,\n  insertSpaces: false,\n  wrapLineLength: 120,\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\n  contentUnformatted: \"pre\",\n  indentInnerHtml: false,\n  preserveNewLines: true,\n  maxPreserveNewLines: void 0,\n  indentHandlebars: false,\n  endWithNewline: false,\n  extraLiners: \"head, body, /html\",\n  wrapAttributes: \"auto\"\n};\nvar optionsDefault = {\n  format: formatDefaults,\n  suggest: {},\n  data: { useDefaultDataProvider: true }\n};\nfunction getConfigurationDefault(languageId) {\n  return {\n    completionItems: true,\n    hovers: true,\n    documentSymbols: true,\n    links: true,\n    documentHighlights: true,\n    rename: true,\n    colors: true,\n    foldingRanges: true,\n    selectionRanges: true,\n    diagnostics: languageId === htmlLanguageId,\n    documentFormattingEdits: languageId === htmlLanguageId,\n    documentRangeFormattingEdits: languageId === htmlLanguageId\n  };\n}\nvar htmlLanguageId = \"html\";\nvar handlebarsLanguageId = \"handlebars\";\nvar razorLanguageId = \"razor\";\nvar htmlLanguageService = registerHTMLLanguageService(htmlLanguageId, optionsDefault, getConfigurationDefault(htmlLanguageId));\nvar htmlDefaults = htmlLanguageService.defaults;\nvar handlebarLanguageService = registerHTMLLanguageService(handlebarsLanguageId, optionsDefault, getConfigurationDefault(handlebarsLanguageId));\nvar handlebarDefaults = handlebarLanguageService.defaults;\nvar razorLanguageService = registerHTMLLanguageService(razorLanguageId, optionsDefault, getConfigurationDefault(razorLanguageId));\nvar razorDefaults = razorLanguageService.defaults;\nmonaco_editor_core_exports.languages.html = {\n  htmlDefaults,\n  razorDefaults,\n  handlebarDefaults,\n  htmlLanguageService,\n  handlebarLanguageService,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/html/htmlMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./htmlMode.js\");\n  }\n}\nfunction registerHTMLLanguageService(languageId, options = optionsDefault, modeConfiguration = getConfigurationDefault(languageId)) {\n  const defaults = new LanguageServiceDefaultsImpl(languageId, options, modeConfiguration);\n  let mode;\n  const onLanguageListener = monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    mode = (await getMode()).setupMode(defaults);\n  });\n  return {\n    defaults,\n    dispose() {\n      onLanguageListener.dispose();\n      mode?.dispose();\n      mode = void 0;\n    }\n  };\n}\nexport {\n  handlebarDefaults,\n  handlebarLanguageService,\n  htmlDefaults,\n  htmlLanguageService,\n  razorDefaults,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.0(9d278685b078158491964f8fd7ac9628fffa0f30)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/json/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _diagnosticsOptions;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, diagnosticsOptions, modeConfiguration) {\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this._diagnosticsOptions;\n  }\n  setDiagnosticsOptions(options) {\n    this._diagnosticsOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar diagnosticDefault = {\n  validate: true,\n  allowComments: true,\n  schemas: [],\n  enableSchemaRequest: false,\n  schemaRequest: \"warning\",\n  schemaValidation: \"warning\",\n  comments: \"error\",\n  trailingCommas: \"error\"\n};\nvar modeConfigurationDefault = {\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true,\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  tokens: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true\n};\nvar jsonDefaults = new LanguageServiceDefaultsImpl(\"json\", diagnosticDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.json = { jsonDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/json/jsonMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./jsonMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.register({\n  id: \"json\",\n  extensions: [\".json\", \".bowerrc\", \".jshintrc\", \".jscsrc\", \".eslintrc\", \".babelrc\", \".har\"],\n  aliases: [\"JSON\", \"json\"],\n  mimetypes: [\"application/json\"]\n});\nmonaco_editor_core_exports.languages.onLanguage(\"json\", () => {\n  getMode().then((mode) => mode.setupMode(jsonDefaults));\n});\nexport {\n  jsonDefaults\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 88 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(66 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant((theme, collector) => {\n    const bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n    if (bracketMatchBackground) {\n        collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);\n    }\n    const bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n    if (bracketMatchBorder) {\n        collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`);\n    }\n});\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from './types.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const refactorPreviewCommandId = 'editor.action.refactor.preview';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\nclass ManagedCodeActionSet extends Disposable {\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            if (isNonEmptyArray(b.diagnostics)) {\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return 0; // both have no diagnostics\n        }\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    const filter = trigger.filter || {};\n    const codeActionContext = {\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    const providers = getCodeActionProviders(registry, model, filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            progress.report(provider);\n            const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentation(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    }));\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    return Promise.all(promises).then(actions => {\n        const allActions = actions.map(x => x.actions).flat();\n        const allDocumentation = coalesce(actions.map(x => x.documentation));\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    })\n        .finally(() => {\n        listener.dispose();\n        cts.dispose();\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction getDocumentation(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet MessageController = class MessageController {\n    constructor(editor, contextKeyService) {\n        this._messageWidget = new MutableDisposable();\n        this._messageListeners = new DisposableStore();\n        this._editor = editor;\n        this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MessageController.ID);\n    }\n    dispose() {\n        this._messageListeners.dispose();\n        this._messageWidget.dispose();\n        this._visible.reset();\n    }\n    showMessage(message, position) {\n        alert(message);\n        this._visible.set(true);\n        this._messageWidget.clear();\n        this._messageListeners.clear();\n        this._messageWidget.value = new MessageWidget(this._editor, position, message);\n        // close on blur, cursor, model change, dispose\n        this._messageListeners.add(this._editor.onDidBlurEditorText(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n        // 3sec\n        this._messageListeners.add(new TimeoutTimer(() => this.closeMessage(), 3000));\n        // close on mouse move\n        let bounds;\n        this._messageListeners.add(this._editor.onMouseMove(e => {\n            // outside the text area\n            if (!e.target.position) {\n                return;\n            }\n            if (!bounds) {\n                // define bounding box around position and first mouse occurance\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n            }\n            else if (!bounds.containsPosition(e.target.position)) {\n                // check if position is still in bounds\n                this.closeMessage();\n            }\n        }));\n    }\n    closeMessage() {\n        this._visible.reset();\n        this._messageListeners.clear();\n        if (this._messageWidget.value) {\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n        }\n    }\n};\nMessageController.ID = 'editor.contrib.messageController';\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\nMessageController = __decorate([\n    __param(1, IContextKeyService)\n], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n    id: 'leaveEditorMessage',\n    precondition: MessageController.MESSAGE_VISIBLE,\n    handler: c => c.closeMessage(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        primary: 9 /* KeyCode.Escape */\n    }\n}));\nclass MessageWidget {\n    constructor(editor, { lineNumber, column }, text) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._editor = editor;\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\n        this._position = { lineNumber, column };\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('monaco-editor-overlaymessage');\n        this._domNode.style.marginLeft = '-6px';\n        const anchorTop = document.createElement('div');\n        anchorTop.classList.add('anchor', 'top');\n        this._domNode.appendChild(anchorTop);\n        const message = document.createElement('div');\n        message.classList.add('message');\n        message.textContent = text;\n        this._domNode.appendChild(message);\n        const anchorBottom = document.createElement('div');\n        anchorBottom.classList.add('anchor', 'below');\n        this._domNode.appendChild(anchorBottom);\n        this._editor.addContentWidget(this);\n        this._domNode.classList.add('fadeIn');\n    }\n    static fadeOut(messageWidget) {\n        const dispose = () => {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\n        };\n        const handle = setTimeout(dispose, 110);\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\n        messageWidget.getDomNode().classList.add('fadeOut');\n        return { dispose };\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'messageoverlay';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._position,\n            preference: [\n                1 /* ContentWidgetPositionPreference.ABOVE */,\n                2 /* ContentWidgetPositionPreference.BELOW */,\n            ],\n            positionAffinity: 1 /* PositionAffinity.Right */,\n        };\n    }\n    afterRender(position) {\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\n    }\n}\nregisterEditorContribution(MessageController.ID, MessageController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { canceled } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, dispose, MutableDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './media/action.css';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, CodeActionItem, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const Context = {\n    Visible: new RawContextKey('CodeActionMenuVisible', false, localize('CodeActionMenuVisible', \"Whether the code action list widget is visible\"))\n};\nclass CodeActionAction extends Action {\n    constructor(action, callback) {\n        super(action.command ? action.command.id : action.title, stripNewlines(action.title), undefined, !action.disabled, callback);\n        this.action = action;\n    }\n}\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\nconst TEMPLATE_ID = 'codeActionWidget';\nconst codeActionLineHeight = 26;\nlet CodeMenuRenderer = class CodeMenuRenderer {\n    constructor(acceptKeybindings, keybindingService) {\n        this.acceptKeybindings = acceptKeybindings;\n        this.keybindingService = keybindingService;\n    }\n    get templateId() { return TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = [];\n        data.root = container;\n        data.text = document.createElement('span');\n        // data.detail = document.createElement('');\n        container.append(data.text);\n        // container.append(data.detail);\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.title;\n        // const detail = element.detail;\n        const isEnabled = element.isEnabled;\n        const isSeparator = element.isSeparator;\n        const isDocumentation = element.isDocumentation;\n        data.text.textContent = text;\n        // data.detail.textContent = detail;\n        if (!isEnabled) {\n            data.root.classList.add('option-disabled');\n            data.root.style.backgroundColor = 'transparent !important';\n        }\n        else {\n            data.root.classList.remove('option-disabled');\n        }\n        if (isSeparator) {\n            data.root.classList.add('separator');\n            data.root.style.height = '10px';\n        }\n        if (!isDocumentation) {\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this.acceptKeybindings;\n                data.root.title = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Refactor, Shift+F2 to Preview\"'] }, \"{0} to Refactor, {1} to Preview\", (_a = this.keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this.keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n                // data.root.title = this.keybindingService.lookupKeybinding(accept)?.getLabel() + ' to Refactor, ' + this.keybindingService.lookupKeybinding(preview)?.getLabel() + ' to Preview';\n            };\n            updateLabel();\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables = dispose(templateData.disposables);\n    }\n};\nCodeMenuRenderer = __decorate([\n    __param(1, IKeybindingService)\n], CodeMenuRenderer);\nlet CodeActionMenu = class CodeActionMenu extends Disposable {\n    constructor(_editor, _delegate, _contextMenuService, keybindingService, _languageFeaturesService, _telemetryService, _themeService, _configurationService, _contextViewService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._delegate = _delegate;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._telemetryService = _telemetryService;\n        this._configurationService = _configurationService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._showingActions = this._register(new MutableDisposable());\n        this.codeActionList = this._register(new MutableDisposable());\n        this.options = [];\n        this._visible = false;\n        this.viewItems = [];\n        this.hasSeperator = false;\n        this._keybindingResolver = new CodeActionKeybindingResolver({\n            getKeybindings: () => keybindingService.getKeybindings()\n        });\n        this._ctxMenuWidgetVisible = Context.Visible.bindTo(this._contextKeyService);\n        this.listRenderer = new CodeMenuRenderer([`onEnterSelectCodeAction`, `onEnterSelectCodeActionWithPreview`], keybindingService);\n    }\n    get isVisible() {\n        return this._visible;\n    }\n    isCodeActionWidgetEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.useCustomCodeActionMenu', {\n            resource: model.uri\n        });\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            e.elements.forEach(element => {\n                if (element.isEnabled) {\n                    element.action.run();\n                    this.hideCodeActionWidget();\n                }\n            });\n        }\n    }\n    _onListHover(e) {\n        var _a, _b, _c, _d;\n        if (!e.element) {\n            this.currSelectedItem = undefined;\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([]);\n        }\n        else {\n            if ((_b = e.element) === null || _b === void 0 ? void 0 : _b.isEnabled) {\n                (_c = this.codeActionList.value) === null || _c === void 0 ? void 0 : _c.setFocus([e.element.index]);\n                this.focusedEnabledItem = this.viewItems.indexOf(e.element);\n                this.currSelectedItem = e.element.index;\n            }\n            else {\n                this.currSelectedItem = undefined;\n                (_d = this.codeActionList.value) === null || _d === void 0 ? void 0 : _d.setFocus([e.element.index]);\n            }\n        }\n    }\n    renderCodeActionMenuList(element, inputArray) {\n        var _a;\n        const renderDisposables = new DisposableStore();\n        const renderMenu = document.createElement('div');\n        // Render invisible div to block mouse interaction in the rest of the UI\n        const menuBlock = document.createElement('div');\n        this.block = element.appendChild(menuBlock);\n        this.block.classList.add('context-view-block');\n        this.block.style.position = 'fixed';\n        this.block.style.cursor = 'initial';\n        this.block.style.left = '0';\n        this.block.style.top = '0';\n        this.block.style.width = '100%';\n        this.block.style.height = '100%';\n        this.block.style.zIndex = '-1';\n        renderDisposables.add(dom.addDisposableListener(this.block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\n        renderMenu.id = 'codeActionMenuWidget';\n        renderMenu.classList.add('codeActionMenuWidget');\n        element.appendChild(renderMenu);\n        this.codeActionList.value = new List('codeActionWidget', renderMenu, {\n            getHeight(element) {\n                if (element.isSeparator) {\n                    return 10;\n                }\n                return codeActionLineHeight;\n            },\n            getTemplateId(element) {\n                return 'codeActionWidget';\n            }\n        }, [this.listRenderer], { keyboardSupport: false });\n        renderDisposables.add(this.codeActionList.value.onMouseOver(e => this._onListHover(e)));\n        renderDisposables.add(this.codeActionList.value.onDidChangeFocus(e => { var _a; return (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.domFocus(); }));\n        renderDisposables.add(this.codeActionList.value.onDidChangeSelection(e => this._onListSelection(e)));\n        renderDisposables.add(this._editor.onDidLayoutChange(e => this.hideCodeActionWidget()));\n        // Populating the list widget and tracking enabled options.\n        inputArray.forEach((item, index) => {\n            const currIsSeparator = item.class === 'separator';\n            let isDocumentation = false;\n            if (item instanceof CodeActionAction) {\n                isDocumentation = item.action.kind === CodeActionMenu.documentationID;\n            }\n            if (currIsSeparator) {\n                // set to true forever\n                this.hasSeperator = true;\n            }\n            const menuItem = { title: item.label, detail: item.tooltip, action: inputArray[index], isEnabled: item.enabled, isSeparator: currIsSeparator, index, isDocumentation };\n            if (item.enabled) {\n                this.viewItems.push(menuItem);\n            }\n            this.options.push(menuItem);\n        });\n        this.codeActionList.value.splice(0, this.codeActionList.value.length, this.options);\n        const height = this.hasSeperator ? (inputArray.length - 1) * codeActionLineHeight + 10 : inputArray.length * codeActionLineHeight;\n        renderMenu.style.height = String(height) + 'px';\n        this.codeActionList.value.layout(height);\n        // For finding width dynamically (not using resize observer)\n        const arr = [];\n        this.options.forEach((item, index) => {\n            var _a, _b;\n            if (!this.codeActionList.value) {\n                return;\n            }\n            const element = (_b = document.getElementById((_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.getElementID(index))) === null || _b === void 0 ? void 0 : _b.getElementsByTagName('span')[0].offsetWidth;\n            arr.push(Number(element));\n        });\n        // resize observer - can be used in the future since list widget supports dynamic height but not width\n        const maxWidth = Math.max(...arr);\n        // 40 is the additional padding for the list widget (20 left, 20 right)\n        renderMenu.style.width = maxWidth + 52 + 'px';\n        (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.layout(height, maxWidth);\n        // List selection\n        if (this.viewItems.length < 1 || this.viewItems.every(item => item.isDocumentation)) {\n            this.currSelectedItem = undefined;\n        }\n        else {\n            this.focusedEnabledItem = 0;\n            this.currSelectedItem = this.viewItems[0].index;\n            this.codeActionList.value.setFocus([this.currSelectedItem]);\n        }\n        // List Focus\n        this.codeActionList.value.domFocus();\n        const focusTracker = dom.trackFocus(element);\n        const blurListener = focusTracker.onDidBlur(() => {\n            this.hideCodeActionWidget();\n            // this._contextViewService.hideContextView({ source: this });\n        });\n        renderDisposables.add(blurListener);\n        renderDisposables.add(focusTracker);\n        this._ctxMenuWidgetVisible.set(true);\n        return renderDisposables;\n    }\n    focusPrevious() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems[0].index;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = this.focusedEnabledItem - 1;\n            if (this.focusedEnabledItem < 0) {\n                this.focusedEnabledItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    focusNext() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = (this.focusedEnabledItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    navigateListWithKeysUp() {\n        this.focusPrevious();\n    }\n    navigateListWithKeysDown() {\n        this.focusNext();\n    }\n    onEnterSet() {\n        var _a;\n        if (typeof this.currSelectedItem === 'number') {\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setSelection([this.currSelectedItem]);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        this._ctxMenuWidgetVisible.reset();\n        this.options = [];\n        this.viewItems = [];\n        this.focusedEnabledItem = 0;\n        this.currSelectedItem = undefined;\n        this.hasSeperator = false;\n        this._contextViewService.hideContextView({ source: this });\n    }\n    codeActionTelemetry(openedFromString, didCancel, CodeActions) {\n        this._telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionFrom: openedFromString,\n            validCodeActions: CodeActions.validActions.length,\n            cancelled: didCancel,\n        });\n    }\n    show(trigger, codeActions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\n            if (!actionsToShow.length) {\n                this._visible = false;\n                return;\n            }\n            if (!this._editor.getDomNode()) {\n                // cancel when editor went off-dom\n                this._visible = false;\n                throw canceled();\n            }\n            this._visible = true;\n            this._showingActions.value = codeActions;\n            const menuActions = this.getMenuActions(trigger, actionsToShow, codeActions.documentation);\n            const anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\n            const resolver = this._keybindingResolver.getResolver();\n            const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */);\n            if (this.isCodeActionWidgetEnabled(model)) {\n                this._contextViewService.showContextView({\n                    getAnchor: () => anchor,\n                    render: (container) => this.renderCodeActionMenuList(container, menuActions),\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                }, this._editor.getDomNode(), false);\n            }\n            else {\n                this._contextMenuService.showContextMenu({\n                    domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n                    getAnchor: () => anchor,\n                    getActions: () => menuActions,\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                    autoSelectFirstItem: true,\n                    getKeyBinding: action => action instanceof CodeActionAction ? resolver(action.action) : undefined,\n                });\n            }\n        });\n    }\n    getMenuActions(trigger, actionsToShow, documentation) {\n        var _a, _b;\n        const toCodeActionAction = (item) => new CodeActionAction(item.action, () => this._delegate.onSelectCodeAction(item, trigger));\n        const result = actionsToShow\n            .map(toCodeActionAction);\n        const allDocumentation = [...documentation];\n        const model = this._editor.getModel();\n        if (model && result.length) {\n            for (const provider of this._languageFeaturesService.codeActionProvider.all(model)) {\n                if (provider._getAdditionalMenuItems) {\n                    allDocumentation.push(...provider._getAdditionalMenuItems({ trigger: trigger.type, only: (_b = (_a = trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.value }, actionsToShow.map(item => item.action)));\n                }\n            }\n        }\n        if (allDocumentation.length) {\n            result.push(new Separator(), ...allDocumentation.map(command => toCodeActionAction(new CodeActionItem({\n                title: command.title,\n                command: command,\n                kind: CodeActionMenu.documentationID\n            }, undefined))));\n        }\n        return result;\n    }\n    _toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n};\nCodeActionMenu.documentationID = '_documentation';\nCodeActionMenu = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IKeybindingService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ITelemetryService),\n    __param(6, IThemeService),\n    __param(7, IConfigurationService),\n    __param(8, IContextViewService),\n    __param(9, IContextKeyService)\n], CodeActionMenu);\nexport { CodeActionMenu };\nexport class CodeActionKeybindingResolver {\n    constructor(_keybindingProvider) {\n        this._keybindingProvider = _keybindingProvider;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this._keybindingProvider.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n}\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorBackground, editorLightBulbAutoFixForeground, editorLightBulbForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._quickFixActionId = _quickFixActionId;\n        this._preferredFixActionId = _preferredFixActionId;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = document.createElement('div');\n        this._domNode.className = Codicon.lightBulb.classNames;\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        Gesture.ignoreTarget(this._domNode);\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(59 /* EditorOption.lightbulb */) && !this._editor.getOption(59 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._updateLightBulbTitleAndIcon();\n        this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon, this));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(59 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...Codicon.lightBulb.classNamesArray);\n            this._domNode.classList.add(...Codicon.lightbulbAutofix.classNamesArray);\n            const preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\n            if (preferredKb) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", preferredKb.getLabel());\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...Codicon.lightbulbAutofix.classNamesArray);\n        this._domNode.classList.add(...Codicon.lightBulb.classNamesArray);\n        const kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\n        if (kb) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", kb.getLabel());\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\nregisterThemingParticipant((theme, collector) => {\n    var _a;\n    const editorBackgroundColor = (_a = theme.getColor(editorBackground)) === null || _a === void 0 ? void 0 : _a.transparent(0.7);\n    // Lightbulb Icon\n    const editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n    if (editorLightBulbForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n    // Lightbulb Auto Fix Icon\n    const editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n    if (editorLightBulbAutoFixForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CodeActionMenu } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        this.previewOn = false;\n        _CodeActionUi_disposed.set(this, false);\n        this._codeActionWidget = new Lazy(() => {\n            return this._register(instantiationService.createInstance(CodeActionMenu, this._editor, {\n                onSelectCodeAction: (action, trigger) => __awaiter(this, void 0, void 0, function* () {\n                    if (this.previewOn) {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(this.previewOn));\n                    }\n                    else {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(trigger.preview));\n                    }\n                    this.previewOn = false;\n                })\n            }));\n        });\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.trigger, e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            return widget;\n        });\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().hideCodeActionWidget();\n        }\n    }\n    onEnter() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().onEnterSet();\n        }\n    }\n    onPreviewEnter() {\n        this.previewOn = true;\n        this.onEnter();\n    }\n    navigateList(navUp) {\n        if (this._codeActionWidget.hasValue()) {\n            if (navUp) {\n                this._codeActionWidget.getValue().navigateListWithKeysUp();\n            }\n            else {\n                this._codeActionWidget.getValue().navigateListWithKeysDown();\n            }\n        }\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.getValue().update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.getValue().hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this._codeActionWidget.getValue().show(newState.trigger, actions, newState.position, { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._codeActionWidget.getValue().isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(trigger, actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._codeActionWidget.getValue().show(trigger, actions, at, options);\n        });\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService)\n], CodeActionUi);\nexport { CodeActionUi };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nimport { CodeActionTriggerSource } from './types.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfMarker(selection) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        for (const marker of this._markerService.read({ resource: model.uri })) {\n            const markerRange = model.validateRange(marker);\n            if (Range.intersectRanges(markerRange, selection)) {\n                return Range.lift(markerRange);\n            }\n        }\n        return undefined;\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const markerRange = this._getRangeOfMarker(selection);\n        const position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n        const e = {\n            trigger,\n            selection,\n            position\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, refactorPreviewCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { Context } from './codeActionMenu.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nfunction refactorTrigger(editor, userArgs, preview, codeActionFrom) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n        kind: CodeActionKind.Refactor,\n        apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n        ? args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n            : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n        : args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n            : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n        include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n        onlyIncludePreferredActions: args.preferred\n    }, args.apply, preview, codeActionFrom);\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet QuickFixController = class QuickFixController extends Disposable {\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger, preview) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action, preview);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                    }\n                }\n            })\n        }, this._instantiationService)));\n    }\n    static get(editor) {\n        return editor.getContribution(QuickFixController.ID);\n    }\n    update(newState) {\n        this._ui.getValue().update(newState);\n    }\n    hideCodeActionMenu() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().hideCodeActionWidget();\n        }\n    }\n    navigateCodeActionList(navUp) {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().navigateList(navUp);\n        }\n    }\n    selectedOption() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onEnter();\n        }\n    }\n    selectedOptionWithPreview() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onPreviewEnter();\n        }\n    }\n    showCodeActions(trigger, actions, at) {\n        return this._ui.getValue().showCodeActionList(trigger, actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition }, preview });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, preview) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n    }\n};\nQuickFixController.ID = 'editor.contrib.quickFixController';\nQuickFixController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], QuickFixController);\nexport { QuickFixController };\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(CancellationToken.None);\n        if (item.action.edit) {\n            yield bulkEditService.apply(ResourceEdit.convert(item.action.edit), {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: true,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, preview = false, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = QuickFixController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, false, CodeActionTriggerSource.QuickFix);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, false, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class RefactorPreview extends EditorAction {\n    constructor() {\n        super({\n            id: refactorPreviewCommandId,\n            label: nls.localize('refactor.preview.label', \"Refactor with Preview...\"),\n            alias: 'Refactor Preview...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Refactor Preview...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, true, CodeActionTriggerSource.RefactorPreview);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, undefined, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 84 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.AutoFix);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\nconst CodeActionContribution = EditorCommand.bindToContribution(QuickFixController.get);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nregisterEditorCommand(new CodeActionContribution({\n    id: 'hideCodeActionMenuWidget',\n    precondition: Context.Visible,\n    handler(x) {\n        x.hideCodeActionMenu();\n    },\n    kbOpts: {\n        weight: weight,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusPreviousCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(true);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusNextCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(false);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOption();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeActionWithPreview',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOptionWithPreview();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.useCustomCodeActionMenu': {\n            type: 'boolean',\n            tags: ['experimental'],\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('codeActionWidget', \"Enabling this adjusts how the code action menu is rendered.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, RefactorPreview, SourceAction } from './codeActionCommands.js';\nimport './codeActionWidgetContribution.js';\nregisterEditorContribution(QuickFixController.ID, QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(RefactorPreview);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, className, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration ${className}`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nexport class CodeLensWidget {\n    constructor(data, editor, className, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._className = className;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._className, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(16 /* EditorOption.codeLensFontSize */) || e.hasChanged(15 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._styleClassName = '_' + hash(this._editor.getId()).toString(16);\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\n            ? this._editor.getContainerDomNode()\n            : undefined);\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styleElement.remove();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(61 /* EditorOption.lineHeight */) / this._editor.getOption(48 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(16 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(48 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n        const fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n        let newStyle = `\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n        if (fontFamily) {\n            newStyle += `.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n        }\n        this._styleElement.textContent = newStyle;\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily !== null && fontFamily !== void 0 ? fontFamily : 'inherit');\n        this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nconst MAX_DECORATORS = 500;\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration(() => {\n            const prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            if (prevIsEnabled !== this._isEnabled) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        for (let i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                this.presentationIndex = i;\n                this._onDidChangePresentation.fire(this.presentation);\n                break;\n            }\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(registerThemingParticipant((theme, collector) => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(131 /* EditorOption.pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor) {\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._opts = createOptions(this._editor.getOption(72 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(72 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(72 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nconst defaultColor = new Color(new RGBA(0, 122, 204));\nconst defaultOptions = {\n    showArrow: true,\n    showFrame: true,\n    className: '',\n    frameColor: defaultColor,\n    arrowColor: defaultColor,\n    keepEditorSelection: false\n};\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\nexport class ViewZoneDelegate {\n    constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\n        this.id = ''; // A valid zone id should be greater than 0\n        this.domNode = domNode;\n        this.afterLineNumber = afterLineNumber;\n        this.afterColumn = afterColumn;\n        this.heightInLines = heightInLines;\n        this._onDomNodeTop = onDomNodeTop;\n        this._onComputedHeight = onComputedHeight;\n    }\n    onDomNodeTop(top) {\n        this._onDomNodeTop(top);\n    }\n    onComputedHeight(height) {\n        this._onComputedHeight(height);\n    }\n}\nexport class OverlayWidgetDelegate {\n    constructor(id, domNode) {\n        this._id = id;\n        this._domNode = domNode;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return null;\n    }\n}\nclass Arrow {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._ruleName = Arrow._IdGenerator.nextId();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._color = null;\n        this._height = -1;\n    }\n    dispose() {\n        this.hide();\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n    }\n    set color(value) {\n        if (this._color !== value) {\n            this._color = value;\n            this._updateStyle();\n        }\n    }\n    set height(value) {\n        if (this._height !== value) {\n            this._height = value;\n            this._updateStyle();\n        }\n    }\n    _updateStyle() {\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n        dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `);\n    }\n    show(where) {\n        if (where.column === 1) {\n            // the arrow isn't pretty at column 1 and we need to push it out a little\n            where = { lineNumber: where.lineNumber, column: 2 };\n        }\n        this._decorations.set([{\n                range: Range.fromPositions(where),\n                options: {\n                    description: 'zone-widget-arrow',\n                    className: this._ruleName,\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n                }\n            }]);\n    }\n    hide() {\n        this._decorations.clear();\n    }\n}\nArrow._IdGenerator = new IdGenerator('.arrow-decoration-');\nexport class ZoneWidget {\n    constructor(editor, options = {}) {\n        this._arrow = null;\n        this._overlayWidget = null;\n        this._resizeSash = null;\n        this._viewZone = null;\n        this._disposables = new DisposableStore();\n        this.container = null;\n        this._isShowing = false;\n        this.editor = editor;\n        this._positionMarkerId = this.editor.createDecorationsCollection();\n        this.options = objects.deepClone(options);\n        objects.mixin(this.options, defaultOptions, false);\n        this.domNode = document.createElement('div');\n        if (!this.options.isAccessible) {\n            this.domNode.setAttribute('aria-hidden', 'true');\n            this.domNode.setAttribute('role', 'presentation');\n        }\n        this._disposables.add(this.editor.onDidLayoutChange((info) => {\n            const width = this._getWidth(info);\n            this.domNode.style.width = width + 'px';\n            this.domNode.style.left = this._getLeft(info) + 'px';\n            this._onWidth(width);\n        }));\n    }\n    dispose() {\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n                this._viewZone = null;\n            });\n        }\n        this._positionMarkerId.clear();\n        this._disposables.dispose();\n    }\n    create() {\n        this.domNode.classList.add('zone-widget');\n        if (this.options.className) {\n            this.domNode.classList.add(this.options.className);\n        }\n        this.container = document.createElement('div');\n        this.container.classList.add('zone-widget-container');\n        this.domNode.appendChild(this.container);\n        if (this.options.showArrow) {\n            this._arrow = new Arrow(this.editor);\n            this._disposables.add(this._arrow);\n        }\n        this._fillContainer(this.container);\n        this._initSash();\n        this._applyStyles();\n    }\n    style(styles) {\n        if (styles.frameColor) {\n            this.options.frameColor = styles.frameColor;\n        }\n        if (styles.arrowColor) {\n            this.options.arrowColor = styles.arrowColor;\n        }\n        this._applyStyles();\n    }\n    _applyStyles() {\n        if (this.container && this.options.frameColor) {\n            const frameColor = this.options.frameColor.toString();\n            this.container.style.borderTopColor = frameColor;\n            this.container.style.borderBottomColor = frameColor;\n        }\n        if (this._arrow && this.options.arrowColor) {\n            const arrowColor = this.options.arrowColor.toString();\n            this._arrow.color = arrowColor;\n        }\n    }\n    _getWidth(info) {\n        return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n    }\n    _getLeft(info) {\n        // If minimap is to the left, we move beyond it\n        if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n            return info.minimap.minimapWidth;\n        }\n        return 0;\n    }\n    _onViewZoneTop(top) {\n        this.domNode.style.top = top + 'px';\n    }\n    _onViewZoneHeight(height) {\n        this.domNode.style.height = `${height}px`;\n        if (this.container) {\n            const containerHeight = height - this._decoratingElementsHeight();\n            this.container.style.height = `${containerHeight}px`;\n            const layoutInfo = this.editor.getLayoutInfo();\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\n        }\n        if (this._resizeSash) {\n            this._resizeSash.layout();\n        }\n    }\n    get position() {\n        const range = this._positionMarkerId.getRange(0);\n        if (!range) {\n            return undefined;\n        }\n        return range.getStartPosition();\n    }\n    show(rangeOrPos, heightInLines) {\n        const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n        this._isShowing = true;\n        this._showImpl(range, heightInLines);\n        this._isShowing = false;\n        this._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\n    }\n    hide() {\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n            });\n            this._viewZone = null;\n        }\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._arrow) {\n            this._arrow.hide();\n        }\n    }\n    _decoratingElementsHeight() {\n        const lineHeight = this.editor.getOption(61 /* EditorOption.lineHeight */);\n        let result = 0;\n        if (this.options.showArrow) {\n            const arrowHeight = Math.round(lineHeight / 3);\n            result += 2 * arrowHeight;\n        }\n        if (this.options.showFrame) {\n            const frameThickness = Math.round(lineHeight / 9);\n            result += 2 * frameThickness;\n        }\n        return result;\n    }\n    _showImpl(where, heightInLines) {\n        const position = where.getStartPosition();\n        const layoutInfo = this.editor.getLayoutInfo();\n        const width = this._getWidth(layoutInfo);\n        this.domNode.style.width = `${width}px`;\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n        // Render the widget as zone (rendering) and widget (lifecycle)\n        const viewZoneDomNode = document.createElement('div');\n        viewZoneDomNode.style.overflow = 'hidden';\n        const lineHeight = this.editor.getOption(61 /* EditorOption.lineHeight */);\n        // adjust heightInLines to viewport\n        const maxHeightInLines = Math.max(12, (this.editor.getLayoutInfo().height / lineHeight) * 0.8);\n        heightInLines = Math.min(heightInLines, maxHeightInLines);\n        let arrowHeight = 0;\n        let frameThickness = 0;\n        // Render the arrow one 1/3 of an editor line height\n        if (this._arrow && this.options.showArrow) {\n            arrowHeight = Math.round(lineHeight / 3);\n            this._arrow.height = arrowHeight;\n            this._arrow.show(position);\n        }\n        // Render the frame as 1/9 of an editor line height\n        if (this.options.showFrame) {\n            frameThickness = Math.round(lineHeight / 9);\n        }\n        // insert zone widget\n        this.editor.changeViewZones((accessor) => {\n            if (this._viewZone) {\n                accessor.removeZone(this._viewZone.id);\n            }\n            if (this._overlayWidget) {\n                this.editor.removeOverlayWidget(this._overlayWidget);\n                this._overlayWidget = null;\n            }\n            this.domNode.style.top = '-1000px';\n            this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, (top) => this._onViewZoneTop(top), (height) => this._onViewZoneHeight(height));\n            this._viewZone.id = accessor.addZone(this._viewZone);\n            this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n            this.editor.addOverlayWidget(this._overlayWidget);\n        });\n        if (this.container && this.options.showFrame) {\n            const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n            this.container.style.borderTopWidth = width + 'px';\n            this.container.style.borderBottomWidth = width + 'px';\n        }\n        const containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n        if (this.container) {\n            this.container.style.top = arrowHeight + 'px';\n            this.container.style.height = containerHeight + 'px';\n            this.container.style.overflow = 'hidden';\n        }\n        this._doLayout(containerHeight, width);\n        if (!this.options.keepEditorSelection) {\n            this.editor.setSelection(where);\n        }\n        const model = this.editor.getModel();\n        if (model) {\n            const revealLine = where.endLineNumber + 1;\n            if (revealLine <= model.getLineCount()) {\n                // reveal line below the zone widget\n                this.revealLine(revealLine, false);\n            }\n            else {\n                // reveal last line atop\n                this.revealLine(model.getLineCount(), true);\n            }\n        }\n    }\n    revealLine(lineNumber, isLastLine) {\n        if (isLastLine) {\n            this.editor.revealLineInCenter(lineNumber, 0 /* ScrollType.Smooth */);\n        }\n        else {\n            this.editor.revealLine(lineNumber, 0 /* ScrollType.Smooth */);\n        }\n    }\n    setCssClass(className, classToReplace) {\n        if (!this.container) {\n            return;\n        }\n        if (classToReplace) {\n            this.container.classList.remove(classToReplace);\n        }\n        this.container.classList.add(className);\n    }\n    _onWidth(widthInPixel) {\n        // implement in subclass\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        // implement in subclass\n    }\n    _relayout(newHeightInLines) {\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    this._viewZone.heightInLines = newHeightInLines;\n                    accessor.layoutZone(this._viewZone.id);\n                }\n            });\n        }\n    }\n    // --- sash\n    _initSash() {\n        if (this._resizeSash) {\n            return;\n        }\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* Orientation.HORIZONTAL */ }));\n        if (!this.options.isResizeable) {\n            this._resizeSash.state = 0 /* SashState.Disabled */;\n        }\n        let data;\n        this._disposables.add(this._resizeSash.onDidStart((e) => {\n            if (this._viewZone) {\n                data = {\n                    startY: e.startY,\n                    heightInLines: this._viewZone.heightInLines,\n                };\n            }\n        }));\n        this._disposables.add(this._resizeSash.onDidEnd(() => {\n            data = undefined;\n        }));\n        this._disposables.add(this._resizeSash.onDidChange((evt) => {\n            if (data) {\n                const lineDelta = (evt.currentY - data.startY) / this.editor.getOption(61 /* EditorOption.lineHeight */);\n                const roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n                const newHeightInLines = data.heightInLines + roundedLineDelta;\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\n                    this._relayout(newHeightInLines);\n                }\n            }\n        }));\n    }\n    getHorizontalSashLeft() {\n        return 0;\n    }\n    getHorizontalSashTop() {\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\n    }\n    getHorizontalSashWidth() {\n        const layoutInfo = this.editor.getLayoutInfo();\n        return layoutInfo.width - layoutInfo.minimap.minimapWidth;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (e instanceof MouseEvent && (e.detail > 1 || e.button !== 0)) {\n                    // prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n                    // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                    return;\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, options) {\n        super(container, options);\n        this._actions = [];\n        this._contextMenuProvider = options.contextMenuProvider;\n        this.actions = options.actions || [];\n        this.actionProvider = options.actionProvider;\n        this.menuClassName = options.menuClassName || '';\n        this.menuAsChild = !!options.menuAsChild;\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this.actionProvider) {\n            return this.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: action => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this.menuClassName,\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* AnchorAlignment.LEFT */,\n            domForShadowRoot: this.menuAsChild ? this.element : undefined\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            this.element.title = this._action.label || '';\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = Object.assign(Object.assign({}, this.dropdownMenu.menuOptions), { get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                } });\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (this.getAction().label) {\n            title = this.getAction().label;\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.getAction().enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, append, asCSSUrl, EventType, ModifierKeyEmitter, prepend } from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from '../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { ActionRunner, Separator, SubmenuAction } from '../../../base/common/actions.js';\nimport { UILabelProvider } from '../../../base/common/keybindingLabels.js';\nimport { combinedDisposable, DisposableStore, MutableDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { isLinux, isWindows, OS } from '../../../base/common/platform.js';\nimport './menuEntryActionViewItem.css';\nimport { localize } from '../../../nls.js';\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IThemeService, ThemeIcon } from '../../theme/common/themeService.js';\nimport { isDark } from '../../theme/common/theme.js';\nimport { assertType } from '../../../base/common/types.js';\nexport function createAndFillInActionBarActions(menu, options, target, primaryGroup, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions) {\n    const groups = menu.getActions(options);\n    const isPrimaryAction = typeof primaryGroup === 'string' ? (actionGroup) => actionGroup === primaryGroup : primaryGroup;\n    // Action bars handle alternative actions on their own so the alternative actions should be ignored\n    fillInActions(groups, target, false, isPrimaryAction, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions);\n    return asDisposable(groups);\n}\nfunction asDisposable(groups) {\n    const disposables = new DisposableStore();\n    for (const [, actions] of groups) {\n        for (const action of actions) {\n            disposables.add(action);\n        }\n    }\n    return disposables;\n}\nfunction fillInActions(groups, target, useAlternativeActions, isPrimaryAction = actionGroup => actionGroup === 'navigation', primaryMaxCount = Number.MAX_SAFE_INTEGER, shouldInlineSubmenu = () => false, useSeparatorsInPrimaryActions = false) {\n    let primaryBucket;\n    let secondaryBucket;\n    if (Array.isArray(target)) {\n        primaryBucket = target;\n        secondaryBucket = target;\n    }\n    else {\n        primaryBucket = target.primary;\n        secondaryBucket = target.secondary;\n    }\n    const submenuInfo = new Set();\n    for (const [group, actions] of groups) {\n        let target;\n        if (isPrimaryAction(group)) {\n            target = primaryBucket;\n            if (target.length > 0 && useSeparatorsInPrimaryActions) {\n                target.push(new Separator());\n            }\n        }\n        else {\n            target = secondaryBucket;\n            if (target.length > 0) {\n                target.push(new Separator());\n            }\n        }\n        for (let action of actions) {\n            if (useAlternativeActions) {\n                action = action instanceof MenuItemAction && action.alt ? action.alt : action;\n            }\n            const newLen = target.push(action);\n            // keep submenu info for later inlining\n            if (action instanceof SubmenuAction) {\n                submenuInfo.add({ group, action, index: newLen - 1 });\n            }\n        }\n    }\n    // ask the outside if submenu should be inlined or not. only ask when\n    // there would be enough space\n    for (const { group, action, index } of submenuInfo) {\n        const target = isPrimaryAction(group) ? primaryBucket : secondaryBucket;\n        // inlining submenus with length 0 or 1 is easy,\n        // larger submenus need to be checked with the overall limit\n        const submenuActions = action.actions;\n        if ((submenuActions.length <= 1 || target.length + submenuActions.length - 2 <= primaryMaxCount) && shouldInlineSubmenu(action, group, target.length)) {\n            target.splice(index, 1, ...submenuActions);\n        }\n    }\n    // overflow items from the primary group into the secondary bucket\n    if (primaryBucket !== secondaryBucket && primaryBucket.length > primaryMaxCount) {\n        const overflow = primaryBucket.splice(primaryMaxCount, primaryBucket.length - primaryMaxCount);\n        secondaryBucket.unshift(...overflow, new Separator());\n    }\n}\nlet MenuEntryActionViewItem = class MenuEntryActionViewItem extends ActionViewItem {\n    constructor(action, options, _keybindingService, _notificationService, _contextKeyService, _themeService, _contextMenuService) {\n        super(undefined, action, { icon: !!(action.class || action.item.icon), label: !action.class && !action.item.icon, draggable: options === null || options === void 0 ? void 0 : options.draggable, keybinding: options === null || options === void 0 ? void 0 : options.keybinding, hoverDelegate: options === null || options === void 0 ? void 0 : options.hoverDelegate });\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextKeyService = _contextKeyService;\n        this._themeService = _themeService;\n        this._contextMenuService = _contextMenuService;\n        this._wantsAltCommand = false;\n        this._itemClassDispose = this._register(new MutableDisposable());\n        this._altKey = ModifierKeyEmitter.getInstance();\n    }\n    get _menuItemAction() {\n        return this._action;\n    }\n    get _commandAction() {\n        return this._wantsAltCommand && this._menuItemAction.alt || this._menuItemAction;\n    }\n    onClick(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            event.stopPropagation();\n            try {\n                yield this.actionRunner.run(this._commandAction, this._context);\n            }\n            catch (err) {\n                this._notificationService.error(err);\n            }\n        });\n    }\n    render(container) {\n        super.render(container);\n        container.classList.add('menu-entry');\n        this._updateItemClass(this._menuItemAction.item);\n        let mouseOver = false;\n        let alternativeKeyDown = this._altKey.keyStatus.altKey || ((isWindows || isLinux) && this._altKey.keyStatus.shiftKey);\n        const updateAltState = () => {\n            var _a;\n            const wantsAltCommand = mouseOver && alternativeKeyDown && !!((_a = this._commandAction.alt) === null || _a === void 0 ? void 0 : _a.enabled);\n            if (wantsAltCommand !== this._wantsAltCommand) {\n                this._wantsAltCommand = wantsAltCommand;\n                this.updateLabel();\n                this.updateTooltip();\n                this.updateClass();\n            }\n        };\n        if (this._menuItemAction.alt) {\n            this._register(this._altKey.event(value => {\n                alternativeKeyDown = value.altKey || ((isWindows || isLinux) && value.shiftKey);\n                updateAltState();\n            }));\n        }\n        this._register(addDisposableListener(container, 'mouseleave', _ => {\n            mouseOver = false;\n            updateAltState();\n        }));\n        this._register(addDisposableListener(container, 'mouseenter', _ => {\n            mouseOver = true;\n            updateAltState();\n        }));\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this._commandAction.label;\n        }\n    }\n    getTooltip() {\n        var _a;\n        const keybinding = this._keybindingService.lookupKeybinding(this._commandAction.id, this._contextKeyService);\n        const keybindingLabel = keybinding && keybinding.getLabel();\n        const tooltip = this._commandAction.tooltip || this._commandAction.label;\n        let title = keybindingLabel\n            ? localize('titleAndKb', \"{0} ({1})\", tooltip, keybindingLabel)\n            : tooltip;\n        if (!this._wantsAltCommand && ((_a = this._menuItemAction.alt) === null || _a === void 0 ? void 0 : _a.enabled)) {\n            const altTooltip = this._menuItemAction.alt.tooltip || this._menuItemAction.alt.label;\n            const altKeybinding = this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id, this._contextKeyService);\n            const altKeybindingLabel = altKeybinding && altKeybinding.getLabel();\n            const altTitleSection = altKeybindingLabel\n                ? localize('titleAndKb', \"{0} ({1})\", altTooltip, altKeybindingLabel)\n                : altTooltip;\n            title = localize('titleAndKbAndAlt', \"{0}\\n[{1}] {2}\", title, UILabelProvider.modifierLabels[OS].altKey, altTitleSection);\n        }\n        return title;\n    }\n    updateClass() {\n        if (this.options.icon) {\n            if (this._commandAction !== this._menuItemAction) {\n                if (this._menuItemAction.alt) {\n                    this._updateItemClass(this._menuItemAction.alt.item);\n                }\n            }\n            else {\n                this._updateItemClass(this._menuItemAction.item);\n            }\n        }\n    }\n    _updateItemClass(item) {\n        var _a;\n        this._itemClassDispose.value = undefined;\n        const { element, label } = this;\n        if (!element || !label) {\n            return;\n        }\n        const icon = this._commandAction.checked && ((_a = item.toggled) === null || _a === void 0 ? void 0 : _a.icon) ? item.toggled.icon : item.icon;\n        if (!icon) {\n            return;\n        }\n        if (ThemeIcon.isThemeIcon(icon)) {\n            // theme icons\n            const iconClasses = ThemeIcon.asClassNameArray(icon);\n            label.classList.add(...iconClasses);\n            this._itemClassDispose.value = toDisposable(() => {\n                label.classList.remove(...iconClasses);\n            });\n        }\n        else {\n            // icon path/url\n            label.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                ? asCSSUrl(icon.dark)\n                : asCSSUrl(icon.light));\n            label.classList.add('icon');\n            this._itemClassDispose.value = combinedDisposable(toDisposable(() => {\n                label.style.backgroundImage = '';\n                label.classList.remove('icon');\n            }), this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                this.updateClass();\n            }));\n        }\n    }\n};\nMenuEntryActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextKeyService),\n    __param(5, IThemeService),\n    __param(6, IContextMenuService)\n], MenuEntryActionViewItem);\nexport { MenuEntryActionViewItem };\nlet SubmenuEntryActionViewItem = class SubmenuEntryActionViewItem extends DropdownMenuActionViewItem {\n    constructor(action, options, _contextMenuService, _themeService) {\n        var _a, _b;\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : false,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : (ThemeIcon.isThemeIcon(action.item.icon) ? ThemeIcon.asClassName(action.item.icon) : undefined),\n        });\n        super(action, { getActions: () => action.actions }, _contextMenuService, dropdownOptions);\n        this._contextMenuService = _contextMenuService;\n        this._themeService = _themeService;\n    }\n    render(container) {\n        super.render(container);\n        assertType(this.element);\n        container.classList.add('menu-entry');\n        const action = this._action;\n        const { icon } = action.item;\n        if (icon && !ThemeIcon.isThemeIcon(icon)) {\n            this.element.classList.add('icon');\n            const setBackgroundImage = () => {\n                if (this.element) {\n                    this.element.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                        ? asCSSUrl(icon.dark)\n                        : asCSSUrl(icon.light));\n                }\n            };\n            setBackgroundImage();\n            this._register(this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                setBackgroundImage();\n            }));\n        }\n    }\n};\nSubmenuEntryActionViewItem = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IThemeService)\n], SubmenuEntryActionViewItem);\nexport { SubmenuEntryActionViewItem };\nlet DropdownWithDefaultActionViewItem = class DropdownWithDefaultActionViewItem extends BaseActionViewItem {\n    constructor(submenuAction, options, _keybindingService, _notificationService, _contextMenuService, _menuService, _instaService, _storageService) {\n        var _a, _b, _c;\n        super(null, submenuAction);\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextMenuService = _contextMenuService;\n        this._menuService = _menuService;\n        this._instaService = _instaService;\n        this._storageService = _storageService;\n        this._container = null;\n        this._options = options;\n        this._storageKey = `${submenuAction.item.submenu.id}_lastActionId`;\n        // determine default action\n        let defaultAction;\n        const defaultActionId = _storageService.get(this._storageKey, 1 /* StorageScope.WORKSPACE */);\n        if (defaultActionId) {\n            defaultAction = submenuAction.actions.find(a => defaultActionId === a.id);\n        }\n        if (!defaultAction) {\n            defaultAction = submenuAction.actions[0];\n        }\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, defaultAction, { keybinding: this._getDefaultActionKeybindingLabel(defaultAction) });\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : true,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : ['codicon', 'codicon-chevron-down'],\n            actionRunner: (_c = options === null || options === void 0 ? void 0 : options.actionRunner) !== null && _c !== void 0 ? _c : new ActionRunner()\n        });\n        this._dropdown = new DropdownMenuActionViewItem(submenuAction, submenuAction.actions, this._contextMenuService, dropdownOptions);\n        this._dropdown.actionRunner.onDidRun((e) => {\n            if (e.action instanceof MenuItemAction) {\n                this.update(e.action);\n            }\n        });\n    }\n    update(lastAction) {\n        this._storageService.store(this._storageKey, lastAction.id, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        this._defaultAction.dispose();\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, lastAction, { keybinding: this._getDefaultActionKeybindingLabel(lastAction) });\n        this._defaultAction.actionRunner = new class extends ActionRunner {\n            runAction(action, context) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    yield action.run(undefined);\n                });\n            }\n        }();\n        if (this._container) {\n            this._defaultAction.render(prepend(this._container, $('.action-container')));\n        }\n    }\n    _getDefaultActionKeybindingLabel(defaultAction) {\n        var _a;\n        let defaultActionKeybinding;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.renderKeybindingWithDefaultActionLabel) {\n            const kb = this._keybindingService.lookupKeybinding(defaultAction.id);\n            if (kb) {\n                defaultActionKeybinding = `(${kb.getLabel()})`;\n            }\n        }\n        return defaultActionKeybinding;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        this._defaultAction.setActionContext(newContext);\n        this._dropdown.setActionContext(newContext);\n    }\n    render(container) {\n        this._container = container;\n        super.render(this._container);\n        this._container.classList.add('monaco-dropdown-with-default');\n        const primaryContainer = $('.action-container');\n        this._defaultAction.render(append(this._container, primaryContainer));\n        this._register(addDisposableListener(primaryContainer, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */)) {\n                this._defaultAction.element.tabIndex = -1;\n                this._dropdown.focus();\n                event.stopPropagation();\n            }\n        }));\n        const dropdownContainer = $('.dropdown-action-container');\n        this._dropdown.render(append(this._container, dropdownContainer));\n        this._register(addDisposableListener(dropdownContainer, EventType.KEY_DOWN, (e) => {\n            var _a;\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                this._defaultAction.element.tabIndex = 0;\n                this._dropdown.setFocusable(false);\n                (_a = this._defaultAction.element) === null || _a === void 0 ? void 0 : _a.focus();\n                event.stopPropagation();\n            }\n        }));\n    }\n    focus(fromRight) {\n        if (fromRight) {\n            this._dropdown.focus();\n        }\n        else {\n            this._defaultAction.element.tabIndex = 0;\n            this._defaultAction.element.focus();\n        }\n    }\n    blur() {\n        this._defaultAction.element.tabIndex = -1;\n        this._dropdown.blur();\n        this._container.blur();\n    }\n    setFocusable(focusable) {\n        if (focusable) {\n            this._defaultAction.element.tabIndex = 0;\n        }\n        else {\n            this._defaultAction.element.tabIndex = -1;\n            this._dropdown.setFocusable(false);\n        }\n    }\n    dispose() {\n        this._defaultAction.dispose();\n        this._dropdown.dispose();\n        super.dispose();\n    }\n};\nDropdownWithDefaultActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextMenuService),\n    __param(5, IMenuService),\n    __param(6, IInstantiationService),\n    __param(7, IStorageService)\n], DropdownWithDefaultActionViewItem);\nexport { DropdownWithDefaultActionViewItem };\n/**\n * Creates action view items for menu actions or submenu actions.\n */\nexport function createActionViewItem(instaService, action, options) {\n    if (action instanceof MenuItemAction) {\n        return instaService.createInstance(MenuEntryActionViewItem, action, options);\n    }\n    else if (action instanceof SubmenuItemAction) {\n        if (action.item.rememberDefaultAction) {\n            return instaService.createInstance(DropdownWithDefaultActionViewItem, action, options);\n        }\n        else {\n            return instaService.createInstance(SubmenuEntryActionViewItem, action, options);\n        }\n    }\n    else {\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n    constructor() {\n        this._widgets = new Map();\n    }\n    addExclusiveWidget(editor, widget) {\n        const existing = this._widgets.get(editor);\n        if (existing) {\n            existing.listener.dispose();\n            existing.widget.dispose();\n        }\n        const remove = () => {\n            const data = this._widgets.get(editor);\n            if (data && data.widget === widget) {\n                data.listener.dispose();\n                this._widgets.delete(editor);\n            }\n        };\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\n    }\n});\nexport var PeekContext;\n(function (PeekContext) {\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n    constructor(editor, contextKeyService) {\n        if (editor instanceof EmbeddedCodeEditorWidget) {\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\n        }\n    }\n    dispose() { }\n};\nPeekContextController.ID = 'editor.contrib.referenceController';\nPeekContextController = __decorate([\n    __param(1, IContextKeyService)\n], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\nexport function getOuterEditor(accessor) {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n        return editor.getParentEditor();\n    }\n    return editor;\n}\nconst defaultOptions = {\n    headerBackgroundColor: Color.white,\n    primaryHeadingColor: Color.fromHex('#333333'),\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n    constructor(editor, options, instantiationService) {\n        super(editor, options);\n        this.instantiationService = instantiationService;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        objects.mixin(this.options, defaultOptions, false);\n    }\n    dispose() {\n        if (!this.disposed) {\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n            super.dispose();\n            this._onDidClose.fire(this);\n        }\n    }\n    style(styles) {\n        const options = this.options;\n        if (styles.headerBackgroundColor) {\n            options.headerBackgroundColor = styles.headerBackgroundColor;\n        }\n        if (styles.primaryHeadingColor) {\n            options.primaryHeadingColor = styles.primaryHeadingColor;\n        }\n        if (styles.secondaryHeadingColor) {\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\n        }\n        super.style(styles);\n    }\n    _applyStyles() {\n        super._applyStyles();\n        const options = this.options;\n        if (this._headElement && options.headerBackgroundColor) {\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n        }\n        if (this._primaryHeading && options.primaryHeadingColor) {\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n        }\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n        }\n        if (this._bodyElement && options.frameColor) {\n            this._bodyElement.style.borderColor = options.frameColor.toString();\n        }\n    }\n    _fillContainer(container) {\n        this.setCssClass('peekview-widget');\n        this._headElement = dom.$('.head');\n        this._bodyElement = dom.$('.body');\n        this._fillHead(this._headElement);\n        this._fillBody(this._bodyElement);\n        container.appendChild(this._headElement);\n        container.appendChild(this._bodyElement);\n    }\n    _fillHead(container, noCloseAction) {\n        const titleElement = dom.$('.peekview-title');\n        if (this.options.supportOnTitleClick) {\n            titleElement.classList.add('clickable');\n            dom.addStandardDisposableListener(titleElement, 'click', event => this._onTitleClick(event));\n        }\n        dom.append(this._headElement, titleElement);\n        this._fillTitleIcon(titleElement);\n        this._primaryHeading = dom.$('span.filename');\n        this._secondaryHeading = dom.$('span.dirname');\n        this._metaHeading = dom.$('span.meta');\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n        const actionsContainer = dom.$('.peekview-actions');\n        dom.append(this._headElement, actionsContainer);\n        const actionBarOptions = this._getActionBarOptions();\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n        this._disposables.add(this._actionbarWidget);\n        if (!noCloseAction) {\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), Codicon.close.classNames, true, () => {\n                this.dispose();\n                return Promise.resolve();\n            }), { label: false, icon: true });\n        }\n    }\n    _fillTitleIcon(container) {\n    }\n    _getActionBarOptions() {\n        return {\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\n        };\n    }\n    _onTitleClick(event) {\n        // implement me if supportOnTitleClick option is set\n    }\n    setTitle(primaryHeading, secondaryHeading) {\n        if (this._primaryHeading && this._secondaryHeading) {\n            this._primaryHeading.innerText = primaryHeading;\n            this._primaryHeading.setAttribute('title', primaryHeading);\n            if (secondaryHeading) {\n                this._secondaryHeading.innerText = secondaryHeading;\n            }\n            else {\n                dom.clearNode(this._secondaryHeading);\n            }\n        }\n    }\n    setMetaTitle(value) {\n        if (this._metaHeading) {\n            if (value) {\n                this._metaHeading.innerText = value;\n                dom.show(this._metaHeading);\n            }\n            else {\n                dom.hide(this._metaHeading);\n            }\n        }\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        if (!this._isShowing && heightInPixel < 0) {\n            // Looks like the view zone got folded away!\n            this.dispose();\n            return;\n        }\n        const headHeight = Math.ceil(this.editor.getOption(61 /* EditorOption.lineHeight */) * 1.2);\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n        this._doLayoutHead(headHeight, widthInPixel);\n        this._doLayoutBody(bodyHeight, widthInPixel);\n    }\n    _doLayoutHead(heightInPixel, widthInPixel) {\n        if (this._headElement) {\n            this._headElement.style.height = `${heightInPixel}px`;\n            this._headElement.style.lineHeight = this._headElement.style.height;\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        if (this._bodyElement) {\n            this._bodyElement.style.height = `${heightInPixel}px`;\n        }\n    }\n};\nPeekViewWidget = __decorate([\n    __param(2, IInstantiationService)\n], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: transparent(editorInfoForeground, .1), light: transparent(editorInfoForeground, .1), hcDark: null, hcLight: null }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"symbol in {0} on line {1} at column {2}, {3}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn, preview.value);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { attachBadgeStyler } from '../../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService, themeService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n        this._register(attachBadgeStyler(this.badge, themeService));\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService),\n    __param(2, IThemeService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = class ReferencesController {\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(ReferencesController.ID);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(79 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref) {\n        if (this._widget) {\n            this._widget.hide();\n        }\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */ }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, true);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    const provider = registry.ordered(model);\n    // get results\n    const promises = provider.map((provider) => {\n        return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n            onUnexpectedExternalError(err);\n            return undefined;\n        });\n    });\n    return Promise.all(promises).then(values => {\n        const result = [];\n        for (const value of values) {\n            if (Array.isArray(value)) {\n                result.push(...value);\n            }\n            else if (value) {\n                result.push(value);\n            }\n        }\n        return result;\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { isStandalone } from '../../../../base/browser/browser.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nconst _goToActionIds = new Set();\nfunction registerGoToAction(ctor) {\n    const result = new ctor();\n    registerInstantiatedEditorAction(result);\n    _goToActionIds.add(result.id);\n    return result;\n}\nexport class SymbolNavigationAnchor {\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n}\nexport class SymbolNavigationAction extends EditorAction {\n    constructor(configuration, opts) {\n        super(opts);\n        this.configuration = configuration;\n    }\n    run(accessor, editor, arg) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && _goToActionIds.has(altActionId)) {\n                    altAction = editor.getAction(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_a = MessageController.get(editor)) === null || _a === void 0 ? void 0 : _a.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.id);\n                altAction.run().finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.id);\n                });\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._activeAlternativeCommands = new Set();\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nconst goToDefinitionKb = isWeb && !isStandalone()\n    ? 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */\n    : 70 /* KeyCode.F12 */;\nregisterGoToAction((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDefinitionAction.id,\n                label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                alias: 'Go to Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: goToDefinitionKb,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.1\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterGoToAction((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: OpenDefinitionToSideAction.id,\n                label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                alias: 'Open Definition to the Side',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, goToDefinitionKb),\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterGoToAction((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekDefinitionAction.id,\n                label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                alias: 'Peek Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterGoToAction((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDeclarationAction.id,\n                label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                alias: 'Go to Declaration',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.3\n                },\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterGoToAction(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n            alias: 'Peek Declaration',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterGoToAction((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToTypeDefinitionAction.ID,\n                label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                alias: 'Go to Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.4\n                }\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterGoToAction((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekTypeDefinitionAction.ID,\n                label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                alias: 'Peek Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterGoToAction((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToImplementationAction.ID,\n                label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                alias: 'Go to Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.45\n                }\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterGoToAction((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekImplementationAction.ID,\n                label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                alias: 'Peek Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterGoToAction(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            label: nls.localize('goToReferences.label', \"Go to References\"),\n            alias: 'Go to References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 1.45\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterGoToAction(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            label: nls.localize('references.action.label', \"Peek References\"),\n            alias: 'Peek References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            label: nls.localize('label.generic', \"Go to Any Symbol\"),\n            alias: 'Go to Any Symbol',\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _a;\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(53 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n// -- unconditionally register goto-action\nMenuRegistry.appendMenuItems([\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDefinition',\n                title: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 2,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDeclaration',\n                title: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToTypeDefinition',\n                title: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToImplementation',\n                title: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n            },\n            group: '4_symbol_nav',\n            order: 4,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToReferences',\n                title: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            group: '4_symbol_nav',\n            order: 5,\n        },\n    },\n]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../../base/common/types.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { editorActiveLinkForeground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../../platform/theme/common/themeService.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).then(() => {\n                    this.removeLinkDecorations();\n                }, (error) => {\n                    this.removeLinkDecorations();\n                    onUnexpectedError(error);\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        return this.startFindDefinition(position).then(() => {\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        this.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n        if (!word) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return Promise.resolve(0);\n        }\n        // Return early if word at position is still the same\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n            return Promise.resolve(0);\n        }\n        this.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n        if (this.previousPromise) {\n            this.previousPromise.cancel();\n            this.previousPromise = null;\n        }\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n        return this.previousPromise.then(results => {\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            // Multiple results\n            if (results.length > 1) {\n                this.addDecoration(new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn), new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            // Single result\n            else {\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    let wordRange;\n                    if (result.originSelectionRange) {\n                        wordRange = Range.lift(result.originSelectionRange);\n                    }\n                    else {\n                        wordRange = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                    }\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(wordRange, new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue));\n                    ref.dispose();\n                });\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        return this.editor.hasModel() &&\n            mouseEvent.isNoneOrSingleMouseDown &&\n            (mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */) &&\n            (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) &&\n            this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(80 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, this.editor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .goto-definition-link { color: ${activeLinkForeground} !important; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class HoverResult {\n    constructor(value, isComplete, hasLoadingMessage) {\n        this.value = value;\n        this.isComplete = isComplete;\n        this.hasLoadingMessage = hasLoadingMessage;\n    }\n}\n/**\n * Computing the hover is very fine tuned.\n *\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\n *   - if async results already come in, they are not rendered yet.\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\n *   - if there are sync or async results, they are rendered.\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\n */\nexport class HoverOperation extends Disposable {\n    constructor(_editor, _computer) {\n        super();\n        this._editor = _editor;\n        this._computer = _computer;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\n        this._state = 0 /* HoverOperationState.Idle */;\n        this._asyncIterable = null;\n        this._asyncIterableDone = false;\n        this._result = [];\n    }\n    dispose() {\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        super.dispose();\n    }\n    get _hoverTime() {\n        return this._editor.getOption(55 /* EditorOption.hover */).delay;\n    }\n    get _firstWaitTime() {\n        return this._hoverTime / 2;\n    }\n    get _secondWaitTime() {\n        return this._hoverTime - this._firstWaitTime;\n    }\n    get _loadingMessageTime() {\n        return 3 * this._hoverTime;\n    }\n    _setState(state, fireResult = true) {\n        this._state = state;\n        if (fireResult) {\n            this._fireResult();\n        }\n    }\n    _triggerAsyncComputation() {\n        this._setState(2 /* HoverOperationState.SecondWait */);\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\n        if (this._computer.computeAsync) {\n            this._asyncIterableDone = false;\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\n            (() => __awaiter(this, void 0, void 0, function* () {\n                var e_1, _a;\n                try {\n                    try {\n                        for (var _b = __asyncValues(this._asyncIterable), _c; _c = yield _b.next(), !_c.done;) {\n                            const item = _c.value;\n                            if (item) {\n                                this._result.push(item);\n                                this._fireResult();\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this._asyncIterableDone = true;\n                    if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\n                        this._setState(0 /* HoverOperationState.Idle */);\n                    }\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                }\n            }))();\n        }\n        else {\n            this._asyncIterableDone = true;\n        }\n    }\n    _triggerSyncComputation() {\n        if (this._computer.computeSync) {\n            this._result = this._result.concat(this._computer.computeSync());\n        }\n        this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\n    }\n    _triggerLoadingMessage() {\n        if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\n            this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        }\n    }\n    _fireResult() {\n        if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\n            // Do not send out results before the hover time\n            return;\n        }\n        const isComplete = (this._state === 0 /* HoverOperationState.Idle */);\n        const hasLoadingMessage = (this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\n    }\n    start(mode) {\n        if (mode === 0 /* HoverStartMode.Delayed */) {\n            if (this._state === 0 /* HoverOperationState.Idle */) {\n                this._setState(1 /* HoverOperationState.FirstWait */);\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\n            }\n        }\n        else {\n            switch (this._state) {\n                case 0 /* HoverOperationState.Idle */:\n                    this._triggerAsyncComputation();\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n                case 2 /* HoverOperationState.SecondWait */:\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n            }\n        }\n    }\n    cancel() {\n        this._firstWaitScheduler.cancel();\n        this._secondWaitScheduler.cancel();\n        this._loadingMessageScheduler.cancel();\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        this._result = [];\n        this._setState(0 /* HoverOperationState.Idle */, false);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverRangeAnchor {\n    constructor(priority, range) {\n        this.priority = priority;\n        this.range = range;\n        this.type = 1 /* HoverAnchorType.Range */;\n    }\n    equals(other) {\n        return (other.type === 1 /* HoverAnchorType.Range */ && this.range.equalsRange(other.range));\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 1 /* HoverAnchorType.Range */ && showAtPosition.lineNumber === this.range.startLineNumber);\n    }\n}\nexport class HoverForeignElementAnchor {\n    constructor(priority, owner, range) {\n        this.priority = priority;\n        this.owner = owner;\n        this.range = range;\n        this.type = 2 /* HoverAnchorType.ForeignElement */;\n    }\n    equals(other) {\n        return (other.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === other.owner);\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === lastAnchor.owner);\n    }\n}\nexport const HoverParticipantRegistry = (new class HoverParticipantRegistry {\n    constructor() {\n        this._participants = [];\n    }\n    register(ctor) {\n        this._participants.push(ctor);\n    }\n    getAll() {\n        return this._participants;\n    }\n}());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* CharCode.Underline */\n            || (ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */)\n            || (ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* TokenType.EOF */, pos: this.pos, len: 0 };\n        }\n        const pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* TokenType.Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* TokenType.VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* TokenType.Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\n    [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\n    [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\n    [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\n    [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\n    [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\n    [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\n    [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\n    [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\n    [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\n    [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        const ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        const ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        const ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.charAt(0).toLowerCase() + word.substr(1);\n            }\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    clone() {\n        const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            const all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        const ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        const ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* TokenType.EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        const snippet = new TextmateSnippet();\n        this.parseFragment(value, snippet);\n        this.ensureFinalTabstop(snippet, enforceFinalTabstop !== null && enforceFinalTabstop !== void 0 ? enforceFinalTabstop : false, insertFinalTabstop !== null && insertFinalTabstop !== void 0 ? insertFinalTabstop : false);\n        return snippet;\n    }\n    parseFragment(value, snippet) {\n        const offset = snippet.children.length;\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        for (const placeholder of incompletePlaceholders) {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (defaultValues) {\n                const clone = new Placeholder(placeholder.index);\n                clone.transform = placeholder.transform;\n                for (const child of defaultValues) {\n                    clone.appendChild(child.clone());\n                }\n                snippet.replace(placeholder, [clone]);\n            }\n        }\n        return snippet.children.slice(offset);\n    }\n    ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\n        if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\n            const finalTabstop = snippet.placeholders.find(p => p.index === 0);\n            if (!finalTabstop) {\n                // the snippet uses placeholders but has no\n                // final tabstop defined -> insert at the end\n                snippet.appendChild(new Placeholder(0));\n            }\n        }\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            const ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* TokenType.EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* TokenType.Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* TokenType.Dollar */\n                    && nextToken.type !== 4 /* TokenType.CurlyClose */\n                    && nextToken.type !== 5 /* TokenType.Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* TokenType.Dollar */, true)\n                || this._accept(4 /* TokenType.CurlyClose */, true)\n                || this._accept(5 /* TokenType.Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (index = this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* TokenType.Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* TokenType.Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* TokenType.CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* TokenType.Comma */, true)\n                    || this._accept(7 /* TokenType.Pipe */, true)\n                    || this._accept(5 /* TokenType.Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (name = this._accept(9 /* TokenType.VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        const transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* TokenType.Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* TokenType.CurlyOpen */)) {\n            complex = true;\n        }\n        const index = this._accept(8 /* TokenType.Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* TokenType.Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1:/upcase}\n            const shorthand = this._accept(9 /* TokenType.VariableName */, true);\n            if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* TokenType.Plus */)) {\n            // ${1:+<if>}\n            const ifValue = this._until(4 /* TokenType.CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* TokenType.Dash */)) {\n            // ${2:-<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* TokenType.QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            const ifValue = this._until(1 /* TokenType.Colon */);\n            if (ifValue) {\n                const elseValue = this._until(4 /* TokenType.CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* TokenType.EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nexport class PreserveCaseToggle extends Toggle {\n    constructor(opts) {\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.preserveCase = this._register(new PreserveCaseToggle({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground,\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        const indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        const controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const toggleStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.preserveCase.style(toggleStyles);\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        if (this.inputBox) {\n            this.inputBox.validate();\n        }\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.inputBox.width = newWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\nimport { ReplaceInput } from '../../../base/browser/ui/findinput/replaceInput.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\nimport { localize } from '../../../nls.js';\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nexport const historyNavigationVisible = new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\"));\nconst HistoryNavigationWidgetFocusContext = 'historyNavigationWidgetFocus';\nconst HistoryNavigationForwardsEnablementContext = 'historyNavigationForwardsEnabled';\nconst HistoryNavigationBackwardsEnablementContext = 'historyNavigationBackwardsEnabled';\nlet lastFocusedWidget = undefined;\nconst widgets = [];\nexport function registerAndCreateHistoryNavigationContext(contextKeyService, widget) {\n    if (widgets.includes(widget)) {\n        throw new Error('Cannot register the same widget multiple times');\n    }\n    widgets.push(widget);\n    const disposableStore = new DisposableStore();\n    const scopedContextKeyService = disposableStore.add(contextKeyService.createScoped(widget.element));\n    const historyNavigationWidgetFocus = new RawContextKey(HistoryNavigationWidgetFocusContext, false).bindTo(scopedContextKeyService);\n    const historyNavigationForwardsEnablement = new RawContextKey(HistoryNavigationForwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const historyNavigationBackwardsEnablement = new RawContextKey(HistoryNavigationBackwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const onDidFocus = () => {\n        historyNavigationWidgetFocus.set(true);\n        lastFocusedWidget = widget;\n    };\n    const onDidBlur = () => {\n        historyNavigationWidgetFocus.set(false);\n        if (lastFocusedWidget === widget) {\n            lastFocusedWidget = undefined;\n        }\n    };\n    // Check for currently being focused\n    if (widget.element === document.activeElement) {\n        onDidFocus();\n    }\n    disposableStore.add(widget.onDidFocus(() => onDidFocus()));\n    disposableStore.add(widget.onDidBlur(() => onDidBlur()));\n    disposableStore.add(toDisposable(() => {\n        widgets.splice(widgets.indexOf(widget), 1);\n        onDidBlur();\n    }));\n    return {\n        scopedContextKeyService,\n        historyNavigationForwardsEnablement,\n        historyNavigationBackwardsEnablement,\n        dispose() {\n            disposableStore.dispose();\n        }\n    };\n}\nlet ContextScopedFindInput = class ContextScopedFindInput extends FindInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showFindOptions = false) {\n        super(container, contextViewProvider, showFindOptions, options);\n        this._register(registerAndCreateHistoryNavigationContext(contextKeyService, this.inputBox));\n    }\n};\nContextScopedFindInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedFindInput);\nexport { ContextScopedFindInput };\nlet ContextScopedReplaceInput = class ContextScopedReplaceInput extends ReplaceInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showReplaceOptions = false) {\n        super(container, contextViewProvider, showReplaceOptions, options);\n        this._register(registerAndCreateHistoryNavigationContext(contextKeyService, this.inputBox));\n    }\n};\nContextScopedReplaceInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedReplaceInput);\nexport { ContextScopedReplaceInput };\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showPrevious',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationBackwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 16 /* KeyCode.UpArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n    handler: (accessor) => {\n        if (lastFocusedWidget) {\n            lastFocusedWidget.showPreviousValue();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showNext',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationForwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 18 /* KeyCode.DownArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n    handler: (accessor) => {\n        if (lastFocusedWidget) {\n            lastFocusedWidget.showNextValue();\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { HoverAction, HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Context as SuggestContext } from '../../suggest/browser/suggest.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nconst $ = dom.$;\nlet ContentHoverController = class ContentHoverController extends Disposable {\n    constructor(_editor, _instantiationService, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n        this._isChangingDecorations = false;\n        this._messages = [];\n        this._messagesAreComplete = false;\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\n        this._participants = [];\n        for (const participant of HoverParticipantRegistry.getAll()) {\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\n        }\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value, result.isComplete, result.hasLoadingMessage);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            this._onModelDecorationsChanged();\n        }));\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.hide();\n            }\n        }));\n        this._register(TokenizationRegistry.onDidChange(() => {\n            if (this._widget.position && this._computer.anchor && this._messages.length > 0) {\n                this._widget.clear();\n                this._renderMessages(this._computer.anchor, this._messages);\n            }\n        }));\n    }\n    _onModelDecorationsChanged() {\n        if (this._widget.position) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            if (!this._widget.isColorPickerVisible) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\n                this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n            }\n        }\n    }\n    maybeShowAt(mouseEvent) {\n        const anchorCandidates = [];\n        for (const participant of this._participants) {\n            if (participant.suggestHoverAnchor) {\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\n                if (anchor) {\n                    anchorCandidates.push(anchor);\n                }\n            }\n        }\n        const target = mouseEvent.target;\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            const epsilon = this._editor.getOption(46 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n            }\n        }\n        if (anchorCandidates.length === 0) {\n            return false;\n        }\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\n        this._startShowingAt(anchorCandidates[0], 0 /* HoverStartMode.Delayed */, false);\n        return true;\n    }\n    startShowingAtRange(range, mode, focus) {\n        this._startShowingAt(new HoverRangeAnchor(0, range), mode, focus);\n    }\n    _startShowingAt(anchor, mode, focus) {\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\n            // We have to show the widget at the exact same range as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        if (this._widget.position) {\n            // The range might have changed, but the hover is visible\n            // Instead of hiding it completely, filter out messages that are still in the new range and\n            // kick off a new computation\n            if (!this._computer.anchor || !anchor.canAdoptVisibleHover(this._computer.anchor, this._widget.position)) {\n                this.hide();\n            }\n            else {\n                const filteredMessages = this._messages.filter((m) => m.isValidForHoverAnchor(anchor));\n                if (filteredMessages.length === 0) {\n                    this.hide();\n                }\n                else if (filteredMessages.length === this._messages.length && this._messagesAreComplete) {\n                    // no change\n                    return;\n                }\n                else {\n                    this._renderMessages(anchor, filteredMessages);\n                }\n            }\n        }\n        this._computer.anchor = anchor;\n        this._computer.shouldFocus = focus;\n        this._hoverOperation.start(mode);\n    }\n    hide() {\n        this._computer.anchor = null;\n        this._hoverOperation.cancel();\n        this._widget.hide();\n    }\n    isColorPickerVisible() {\n        return this._widget.isColorPickerVisible;\n    }\n    containsNode(node) {\n        return this._widget.getDomNode().contains(node);\n    }\n    _addLoadingMessage(result) {\n        if (this._computer.anchor) {\n            for (const participant of this._participants) {\n                if (participant.createLoadingMessage) {\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n                    if (loadingMessage) {\n                        return result.slice(0).concat([loadingMessage]);\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _withResult(result, isComplete, hasLoadingMessage) {\n        this._messages = (hasLoadingMessage ? this._addLoadingMessage(result) : result);\n        this._messagesAreComplete = isComplete;\n        if (this._computer.anchor && this._messages.length > 0) {\n            this._renderMessages(this._computer.anchor, this._messages);\n        }\n        else if (isComplete) {\n            this.hide();\n        }\n    }\n    _renderMessages(anchor, messages) {\n        const { showAtPosition, showAtRange, highlightRange } = ContentHoverController.computeHoverRanges(anchor.range, messages);\n        const disposables = new DisposableStore();\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\n        const fragment = document.createDocumentFragment();\n        let colorPicker = null;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPicker = widget,\n            onContentsChanged: () => this._widget.onContentsChanged(),\n            hide: () => this.hide()\n        };\n        for (const participant of this._participants) {\n            const hoverParts = messages.filter(msg => msg.owner === participant);\n            if (hoverParts.length > 0) {\n                disposables.add(participant.renderHoverParts(context, hoverParts));\n            }\n        }\n        if (statusBar.hasContent) {\n            fragment.appendChild(statusBar.hoverElement);\n        }\n        if (fragment.hasChildNodes()) {\n            if (highlightRange) {\n                const highlightDecoration = this._editor.createDecorationsCollection();\n                try {\n                    this._isChangingDecorations = true;\n                    highlightDecoration.set([{\n                            range: highlightRange,\n                            options: ContentHoverController._DECORATION_OPTIONS\n                        }]);\n                }\n                finally {\n                    this._isChangingDecorations = false;\n                }\n                disposables.add(toDisposable(() => {\n                    try {\n                        this._isChangingDecorations = true;\n                        highlightDecoration.clear();\n                    }\n                    finally {\n                        this._isChangingDecorations = false;\n                    }\n                }));\n            }\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, showAtPosition, showAtRange, this._editor.getOption(55 /* EditorOption.hover */).above, this._computer.shouldFocus, disposables));\n        }\n        else {\n            disposables.dispose();\n        }\n    }\n    static computeHoverRanges(anchorRange, messages) {\n        // The anchor range is always on a single line\n        const anchorLineNumber = anchorRange.startLineNumber;\n        let renderStartColumn = anchorRange.startColumn;\n        let renderEndColumn = anchorRange.endColumn;\n        let highlightRange = messages[0].range;\n        let forceShowAtRange = null;\n        for (const msg of messages) {\n            highlightRange = Range.plusRange(highlightRange, msg.range);\n            if (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\n                // this message has a range that is completely sitting on the line of the anchor\n                renderStartColumn = Math.min(renderStartColumn, msg.range.startColumn);\n                renderEndColumn = Math.max(renderEndColumn, msg.range.endColumn);\n            }\n            if (msg.forceShowAtRange) {\n                forceShowAtRange = msg.range;\n            }\n        }\n        return {\n            showAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorRange.startLineNumber, renderStartColumn),\n            showAtRange: forceShowAtRange ? forceShowAtRange : new Range(anchorLineNumber, renderStartColumn, anchorLineNumber, renderEndColumn),\n            highlightRange\n        };\n    }\n};\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'content-hover-highlight',\n    className: 'hoverHighlight'\n});\nContentHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService)\n], ContentHoverController);\nexport { ContentHoverController };\nclass ContentHoverVisibleData {\n    constructor(colorPicker, showAtPosition, showAtRange, preferAbove, stoleFocus, disposables) {\n        this.colorPicker = colorPicker;\n        this.showAtPosition = showAtPosition;\n        this.showAtRange = showAtRange;\n        this.preferAbove = preferAbove;\n        this.stoleFocus = stoleFocus;\n        this.disposables = disposables;\n    }\n}\nlet ContentHoverWidget = class ContentHoverWidget extends Disposable {\n    constructor(_editor, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this.allowEditorOverflow = true;\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(this._contextKeyService);\n        this._hover = this._register(new HoverWidget());\n        this._visibleData = null;\n        this._register(this._editor.onDidLayoutChange(() => this._layout()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._setVisibleData(null);\n        this._layout();\n        this._editor.addContentWidget(this);\n    }\n    /**\n     * Returns `null` if the hover is not visible.\n     */\n    get position() {\n        var _a, _b;\n        return (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) !== null && _b !== void 0 ? _b : null;\n    }\n    get isColorPickerVisible() {\n        var _a;\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        super.dispose();\n    }\n    getId() {\n        return ContentHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        if (!this._visibleData) {\n            return null;\n        }\n        let preferAbove = this._visibleData.preferAbove;\n        if (!preferAbove && this._contextKeyService.getContextKeyValue(SuggestContext.Visible.key)) {\n            // Prefer rendering above if the suggest widget is visible\n            preferAbove = true;\n        }\n        return {\n            position: this._visibleData.showAtPosition,\n            range: this._visibleData.showAtRange,\n            preference: (preferAbove\n                ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n                : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]),\n        };\n    }\n    _setVisibleData(visibleData) {\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        this._visibleData = visibleData;\n        this._hoverVisibleKey.set(!!this._visibleData);\n        this._hover.containerDomNode.classList.toggle('hidden', !this._visibleData);\n    }\n    _layout() {\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\n        const { fontSize, lineHeight } = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        this._hover.contentsDomNode.style.fontSize = `${fontSize}px`;\n        this._hover.contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this._hover.contentsDomNode.style.maxHeight = `${height}px`;\n        this._hover.contentsDomNode.style.maxWidth = `${Math.max(this._editor.getLayoutInfo().width * 0.66, 500)}px`;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    showAt(node, visibleData) {\n        this._setVisibleData(visibleData);\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._hover.contentsDomNode.style.paddingBottom = '';\n        this._updateFont();\n        this.onContentsChanged();\n        // Simply force a synchronous render on the editor\n        // such that the widget does not really render with left = '0px'\n        this._editor.render();\n        // See https://github.com/microsoft/vscode/issues/140339\n        // TODO: Doing a second layout of the hover after force rendering the editor\n        this.onContentsChanged();\n        if (visibleData.stoleFocus) {\n            this._hover.containerDomNode.focus();\n        }\n        if (visibleData.colorPicker) {\n            visibleData.colorPicker.layout();\n        }\n    }\n    hide() {\n        if (this._visibleData) {\n            const stoleFocus = this._visibleData.stoleFocus;\n            this._setVisibleData(null);\n            this._editor.layoutContentWidget(this);\n            if (stoleFocus) {\n                this._editor.focus();\n            }\n        }\n    }\n    onContentsChanged() {\n        this._editor.layoutContentWidget(this);\n        this._hover.onContentsChanged();\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\n        const hasHorizontalScrollbar = (scrollDimensions.scrollWidth > scrollDimensions.width);\n        if (hasHorizontalScrollbar) {\n            // There is just a horizontal scrollbar\n            const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingBottom !== extraBottomPadding) {\n                this._hover.contentsDomNode.style.paddingBottom = extraBottomPadding;\n                this._editor.layoutContentWidget(this);\n                this._hover.onContentsChanged();\n            }\n        }\n    }\n    clear() {\n        this._hover.contentsDomNode.textContent = '';\n    }\n};\nContentHoverWidget.ID = 'editor.contrib.contentHoverWidget';\nContentHoverWidget = __decorate([\n    __param(1, IContextKeyService)\n], ContentHoverWidget);\nexport { ContentHoverWidget };\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\n    constructor(_keybindingService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._hasContent = false;\n        this.hoverElement = $('div.hover-row.status-bar');\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n    }\n    get hasContent() {\n        return this._hasContent;\n    }\n    addAction(actionOptions) {\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n        this._hasContent = true;\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n    }\n    append(element) {\n        const result = dom.append(this.actionsElement, element);\n        this._hasContent = true;\n        return result;\n    }\n};\nEditorHoverStatusBar = __decorate([\n    __param(0, IKeybindingService)\n], EditorHoverStatusBar);\nclass ContentHoverComputer {\n    constructor(_editor, _participants) {\n        this._editor = _editor;\n        this._participants = _participants;\n        this._anchor = null;\n        this._shouldFocus = false;\n    }\n    get anchor() { return this._anchor; }\n    set anchor(value) { this._anchor = value; }\n    get shouldFocus() { return this._shouldFocus; }\n    set shouldFocus(value) { this._shouldFocus = value; }\n    static _getLineDecorations(editor, anchor) {\n        if (anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        if (lineNumber > model.getLineCount()) {\n            // invalid line\n            return [];\n        }\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        return editor.getLineDecorations(lineNumber).filter((d) => {\n            if (d.options.isWholeLine) {\n                return true;\n            }\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            if (d.options.showIfCollapsed) {\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n                    return false;\n                }\n            }\n            else {\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    computeAsync(token) {\n        const anchor = this._anchor;\n        if (!this._editor.hasModel() || !anchor) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\n            if (!participant.computeAsync) {\n                return AsyncIterableObject.EMPTY;\n            }\n            return participant.computeAsync(anchor, lineDecorations, token);\n        }));\n    }\n    computeSync() {\n        if (!this._editor.hasModel() || !this._anchor) {\n            return [];\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n        let result = [];\n        for (const participant of this._participants) {\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\n        }\n        return coalesce(result);\n    }\n}\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n// ESM-uncomment-begin\nlet __marked_exports = {};\n(function() {\n  function define(deps, factory) {\n    factory(__marked_exports);\n  }\n  define.amd = true;\n// ESM-uncomment-end\n\n (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function getDefaults() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n  exports.defaults = getDefaults();\n  function changeDefaults(newDefaults) {\n    exports.defaults = newDefaults;\n  }\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n  /**\n   * @param {string} html\n   */\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n  var caret = /(^|[^\\[])\\^/g;\n  /**\n   * @param {string | RegExp} regex\n   * @param {string} opt\n   */\n\n  function edit(regex, opt) {\n    regex = typeof regex === 'string' ? regex : regex.source;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n  /**\n   * @param {boolean} sanitize\n   * @param {string} base\n   * @param {string} href\n   */\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n  /**\n   * @param {string} base\n   * @param {string} href\n   */\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0; // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n\n    if (!cells[0].trim()) {\n      cells.shift();\n    }\n\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\n      cells.pop();\n    }\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  }\n  /**\n   * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n   * /c*$/ is vulnerable to REDOS.\n   *\n   * @param {string} str\n   * @param {string} c\n   * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n   */\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.slice(0, l - suffLen);\n  }\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n  /**\n   * @param {string} pattern\n   * @param {number} count\n   */\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  function outputLink(cap, link, raw, lexer) {\n    var href = link.href;\n    var title = link.title ? escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      lexer.state.inLink = true;\n      var token = {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text,\n        tokens: lexer.inlineTokens(text, [])\n      };\n      lexer.state.inLink = false;\n      return token;\n    }\n\n    return {\n      type: 'image',\n      raw: raw,\n      href: href,\n      title: title,\n      text: escape(text)\n    };\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap && cap[0].length > 0) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text,\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          tokens: this.lexer.blockTokens(text, []),\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;\n        var bull = cap[1].trim();\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: '',\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        };\n        bull = isordered ? \"\\\\d{1,9}\\\\\" + bull.slice(-1) : \"\\\\\" + bull;\n\n        if (this.options.pedantic) {\n          bull = isordered ? bull : '[*+-]';\n        } // Get next list item\n\n\n        var itemRegex = new RegExp(\"^( {0,3}\" + bull + \")((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))\"); // Check if current bullet point can start a new List Item\n\n        while (src) {\n          endEarly = false;\n\n          if (!(cap = itemRegex.exec(src))) {\n            break;\n          }\n\n          if (this.rules.block.hr.test(src)) {\n            // End list if bullet was actually HR (possibly move into itemRegex?)\n            break;\n          }\n\n          raw = cap[0];\n          src = src.substring(raw.length);\n          line = cap[2].split('\\n', 1)[0];\n          nextLine = src.split('\\n', 1)[0];\n\n          if (this.options.pedantic) {\n            indent = 2;\n            itemContents = line.trimLeft();\n          } else {\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\n\n            indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n\n            itemContents = line.slice(indent);\n            indent += cap[1].length;\n          }\n\n          blankLine = false;\n\n          if (!line && /^ *$/.test(nextLine)) {\n            // Items begin with at most one blank line\n            raw += nextLine + '\\n';\n            src = src.substring(nextLine.length + 1);\n            endEarly = true;\n          }\n\n          if (!endEarly) {\n            var nextBulletRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:[*+-]|\\\\d{1,9}[.)])((?: [^\\\\n]*)?(?:\\\\n|$))\");\n            var hrRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)\"); // Check if following lines should be included in List Item\n\n            while (src) {\n              rawLine = src.split('\\n', 1)[0];\n              line = rawLine; // Re-align to follow commonmark nesting rules\n\n              if (this.options.pedantic) {\n                line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n              } // End list item if found start of new bullet\n\n\n              if (nextBulletRegex.test(line)) {\n                break;\n              } // Horizontal rule found\n\n\n              if (hrRegex.test(src)) {\n                break;\n              }\n\n              if (line.search(/[^ ]/) >= indent || !line.trim()) {\n                // Dedent if possible\n                itemContents += '\\n' + line.slice(indent);\n              } else if (!blankLine) {\n                // Until blank line, item doesn't need indentation\n                itemContents += '\\n' + line;\n              } else {\n                // Otherwise, improper indentation ends this item\n                break;\n              }\n\n              if (!blankLine && !line.trim()) {\n                // Check if current line is blank\n                blankLine = true;\n              }\n\n              raw += rawLine + '\\n';\n              src = src.substring(rawLine.length + 1);\n            }\n          }\n\n          if (!list.loose) {\n            // If the previous item ended with a blank line, the list is loose\n            if (endsWithBlankLine) {\n              list.loose = true;\n            } else if (/\\n *\\n *$/.test(raw)) {\n              endsWithBlankLine = true;\n            }\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.exec(itemContents);\n\n            if (istask) {\n              ischecked = istask[0] !== '[ ] ';\n              itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: !!istask,\n            checked: ischecked,\n            loose: false,\n            text: itemContents\n          });\n          list.raw += raw;\n        } // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n\n\n        list.items[list.items.length - 1].raw = raw.trimRight();\n        list.items[list.items.length - 1].text = itemContents.trimRight();\n        list.raw = list.raw.trimRight();\n        var l = list.items.length; // Item child tokens handled here at end because we needed to have the final item to trim it first\n\n        for (i = 0; i < l; i++) {\n          this.lexer.state.top = false;\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n          var spacers = list.items[i].tokens.filter(function (t) {\n            return t.type === 'space';\n          });\n          var hasMultipleLineBreaks = spacers.every(function (t) {\n            var chars = t.raw.split('');\n            var lineBreaks = 0;\n\n            for (var _iterator = _createForOfIteratorHelperLoose(chars), _step; !(_step = _iterator()).done;) {\n              var _char = _step.value;\n\n              if (_char === '\\n') {\n                lineBreaks += 1;\n              }\n\n              if (lineBreaks > 1) {\n                return true;\n              }\n            }\n\n            return false;\n          });\n\n          if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n            // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n            list.loose = true;\n            list.items[i].loose = true;\n          }\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        };\n\n        if (this.options.sanitize) {\n          token.type = 'paragraph';\n          token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n          token.tokens = [];\n          this.lexer.inline(token.text, token.tokens);\n        }\n\n        return token;\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1]).map(function (c) {\n            return {\n              text: c\n            };\n          }),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i, j, k, row;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.rows.length;\n\n          for (i = 0; i < l; i++) {\n            item.rows[i] = splitCells(item.rows[i], item.header.length).map(function (c) {\n              return {\n                text: c\n              };\n            });\n          } // parse child tokens inside headers and cells\n          // header child tokens\n\n\n          l = item.header.length;\n\n          for (j = 0; j < l; j++) {\n            item.header[j].tokens = [];\n            this.lexer.inline(item.header[j].text, item.header[j].tokens);\n          } // cell child tokens\n\n\n          l = item.rows.length;\n\n          for (j = 0; j < l; j++) {\n            row = item.rows[j];\n\n            for (k = 0; k < row.length; k++) {\n              row[k].tokens = [];\n              this.lexer.inline(row[k].text, row[k].tokens);\n            }\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.escape = function escape$1(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n          this.lexer.state.inLink = true;\n        } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.lexer.state.inLink = false;\n        }\n\n        if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = true;\n        } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: this.lexer.state.inLink,\n          inRawBlock: this.lexer.state.inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0], this.lexer);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0], this.lexer);\n      }\n    };\n\n    _proto.emStrong = function emStrong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.emStrong.lDelim.exec(src);\n      if (!match) return; // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n\n      if (match[3] && prevChar.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u0870-\\u0887\\u0889-\\u088E\\u08A0-\\u08C9\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u1711\\u171F-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4C\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7CA\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7D9\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDD70-\\uDD7A\\uDD7C-\\uDD8A\\uDD8C-\\uDD92\\uDD94\\uDD95\\uDD97-\\uDDA1\\uDDA3-\\uDDB1\\uDDB3-\\uDDB9\\uDDBB\\uDDBC\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67\\uDF80-\\uDF85\\uDF87-\\uDFB0\\uDFB2-\\uDFBA]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDF70-\\uDF81\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC71\\uDC72\\uDC75\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B\\uDF40-\\uDF46]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEB0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|\\uD80B[\\uDF90-\\uDFF0]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDE70-\\uDEBE\\uDEC0-\\uDEC9\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82B[\\uDFF0-\\uDFF3\\uDFF5-\\uDFFB\\uDFFD\\uDFFE]|\\uD82C[\\uDC00-\\uDD22\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD837[\\uDF00-\\uDF1E]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDE90-\\uDEAD\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD839[\\uDFE0-\\uDFE6\\uDFE8-\\uDFEB\\uDFED\\uDFEE\\uDFF0-\\uDFFE]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDF\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF38\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/)) return;\n      var nextChar = match[1] || match[2] || '';\n\n      if (!nextChar || nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))) {\n        var lLength = match[0].length - 1;\n        var rDelim,\n            rLength,\n            delimTotal = lLength,\n            midDelimTotal = 0;\n        var endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n        endReg.lastIndex = 0; // Clip maskedSrc to same section of string as src (move to lexer?)\n\n        maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n          if (!rDelim) continue; // skip single * in __abc*abc__\n\n          rLength = rDelim.length;\n\n          if (match[3] || match[4]) {\n            // found another Left Delim\n            delimTotal += rLength;\n            continue;\n          } else if (match[5] || match[6]) {\n            // either Left or Right Delim\n            if (lLength % 3 && !((lLength + rLength) % 3)) {\n              midDelimTotal += rLength;\n              continue; // CommonMark Emphasis Rules 9-10\n            }\n          }\n\n          delimTotal -= rLength;\n          if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n          // Remove extra characters. *a*** -> *a*\n\n          rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal); // Create `em` if smallest delimiter has odd char count. *a***\n\n          if (Math.min(lLength, rLength) % 2) {\n            var _text = src.slice(1, lLength + match.index + rLength);\n\n            return {\n              type: 'em',\n              raw: src.slice(0, lLength + match.index + rLength + 1),\n              text: _text,\n              tokens: this.lexer.inlineTokens(_text, [])\n            };\n          } // Create 'strong' if smallest delimiter has even char count. **a***\n\n\n          var text = src.slice(2, lLength + match.index + rLength - 1);\n          return {\n            type: 'strong',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text: text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2],\n          tokens: this.lexer.inlineTokens(cap[2], [])\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (this.lexer.state.inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        } else {\n          text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n    hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n    table: noopTest,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block.listItemStart = edit(/^( *)(bull) */).replace('bull', block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '').replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block.gfm.table = edit(block.gfm.table).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block.gfm.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    // fences not supported\n    paragraph: edit(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n    nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n      lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n      //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n      //          () Skip orphan inside strong  () Consume to delim (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n      rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[^*]+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n      rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\spunctuation])/\n  }; // list of punctuation marks from CommonMark spec\n  // without * and _ to handle the different emphasis markers * and _\n\n  inline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n  inline.escapedEmSt = /\\\\\\*|\\\\_/g;\n  inline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', inline._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).replace('ref', block._label).getRegex();\n  inline.nolink = edit(inline.nolink).replace('ref', block._label).getRegex();\n  inline.reflinkSearch = edit(inline.reflinkSearch, 'g').replace('reflink', inline.reflink).replace('nolink', inline.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n\n  /**\n   * smartypants text replacement\n   * @param {string} text\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   * @param {string} text\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || exports.defaults;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      this.tokenizer.lexer = this;\n      this.inlineQueue = [];\n      this.state = {\n        inLink: false,\n        inRawBlock: false,\n        top: true\n      };\n      var rules = {\n        block: block.normal,\n        inline: inline.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block.pedantic;\n        rules.inline = inline.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline.breaks;\n        } else {\n          rules.inline = inline.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n');\n      this.blockTokens(src, this.tokens);\n      var next;\n\n      while (next = this.inlineQueue.shift()) {\n        this.inlineTokens(next.src, next.tokens);\n      }\n\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens) {\n      var _this = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n      } else {\n        src = src.replace(/^( *)(\\t+)/gm, function (_, leading, tabs) {\n          return leading + '    '.repeat(tabs.length);\n        });\n      }\n\n      var token, lastToken, cutSrc, lastParagraphClipped;\n\n      while (src) {\n        if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // newline\n\n\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.length === 1 && tokens.length > 0) {\n            // if there's a single \\n as a spacer, it's terminating the last line,\n            // so move it there so that we don't get unecessary paragraph tags\n            tokens[tokens.length - 1].raw += '\\n';\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (token = this.tokenizer.def(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.raw;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n        // prevent paragraph consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startBlock) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this.options.extensions.startBlock.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastParagraphClipped && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          lastParagraphClipped = cutSrc.length !== src.length;\n          src = src.substring(token.raw.length);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      this.state.top = true;\n      return tokens;\n    };\n\n    _proto.inline = function inline(src, tokens) {\n      this.inlineQueue.push({\n        src: src,\n        tokens: tokens\n      });\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens) {\n      var _this2 = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      var token, lastToken, cutSrc; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      } // Mask out escaped em & strong delimiters\n\n\n      while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // extensions\n\n        if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this2\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // escape\n\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // em & strong\n\n\n        if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n        // prevent inlineText consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startInline) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this2.options.extensions.startInline.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.slice(-1) !== '_') {\n            // Track prevChar before string of ____ started\n            prevChar = token.raw.slice(-1);\n          }\n\n          keepPrevChar = true;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block,\n          inline: inline\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  /**\n   * Renderer\n   */\n\n  var Renderer = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n    }\n    /**\n     * @param {string} quote\n     */\n    ;\n\n    _proto.blockquote = function blockquote(quote) {\n      return \"<blockquote>\\n\" + quote + \"</blockquote>\\n\";\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    }\n    /**\n     * @param {string} text\n     * @param {string} level\n     * @param {string} raw\n     * @param {any} slugger\n     */\n    ;\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        var id = this.options.headerPrefix + slugger.slug(raw);\n        return \"<h\" + level + \" id=\\\"\" + id + \"\\\">\" + text + \"</h\" + level + \">\\n\";\n      } // ignore IDs\n\n\n      return \"<h\" + level + \">\" + text + \"</h\" + level + \">\\n\";\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.listitem = function listitem(text) {\n      return \"<li>\" + text + \"</li>\\n\";\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.paragraph = function paragraph(text) {\n      return \"<p>\" + text + \"</p>\\n\";\n    }\n    /**\n     * @param {string} header\n     * @param {string} body\n     */\n    ;\n\n    _proto.table = function table(header, body) {\n      if (body) body = \"<tbody>\" + body + \"</tbody>\";\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    }\n    /**\n     * @param {string} content\n     */\n    ;\n\n    _proto.tablerow = function tablerow(content) {\n      return \"<tr>\\n\" + content + \"</tr>\\n\";\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? \"<\" + type + \" align=\\\"\" + flags.align + \"\\\">\" : \"<\" + type + \">\";\n      return tag + content + (\"</\" + type + \">\\n\");\n    }\n    /**\n     * span level renderer\n     * @param {string} text\n     */\n    ;\n\n    _proto.strong = function strong(text) {\n      return \"<strong>\" + text + \"</strong>\";\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.em = function em(text) {\n      return \"<em>\" + text + \"</em>\";\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.codespan = function codespan(text) {\n      return \"<code>\" + text + \"</code>\";\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.del = function del(text) {\n      return \"<del>\" + text + \"</del>\";\n    }\n    /**\n     * @param {string} href\n     * @param {string} title\n     * @param {string} text\n     */\n    ;\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    }\n    /**\n     * @param {string} href\n     * @param {string} title\n     * @param {string} text\n     */\n    ;\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = \"<img src=\\\"\" + href + \"\\\" alt=\\\"\" + text + \"\\\"\";\n\n      if (title) {\n        out += \" title=\\\"\" + title + \"\\\"\";\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n    /**\n     * @param {string} value\n     */\n\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     * @param {string} originalSlug\n     * @param {boolean} isDryRun\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} [options]\n     * @param {boolean} [options.dryrun] Generates the next unique slug without\n     * updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || exports.defaults;\n      this.options.renderer = this.options.renderer || new Renderer();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer();\n      this.slugger = new Slugger();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.header[j].tokens), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.rows.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.rows[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k].tokens), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n\n            out = Parser.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = exports.defaults;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var opts = merge.apply(void 0, [{}].concat(args));\n    var extensions = marked.defaults.extensions || {\n      renderers: {},\n      childTokens: {}\n    };\n    var hasExtensions;\n    args.forEach(function (pack) {\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        hasExtensions = true;\n        pack.extensions.forEach(function (ext) {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n\n          if (ext.renderer) {\n            // Renderer extensions\n            var prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function () {\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = arguments[_key2];\n                }\n\n                var ret = ext.renderer.apply(this, args);\n\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n\n          if (ext.tokenizer) {\n            // Tokenizer Extensions\n            if (!ext.level || ext.level !== 'block' && ext.level !== 'inline') {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n\n            if (extensions[ext.level]) {\n              extensions[ext.level].unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n\n            if (ext.start) {\n              // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n\n          if (ext.childTokens) {\n            // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n      } // ==-- Parse \"overwrite\" extensions --== //\n\n\n      if (pack.renderer) {\n        (function () {\n          var renderer = marked.defaults.renderer || new Renderer();\n\n          var _loop = function _loop(prop) {\n            var prevRenderer = renderer[prop]; // Replace renderer with func to run extension, but fall back if false\n\n            renderer[prop] = function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              var ret = pack.renderer[prop].apply(renderer, args);\n\n              if (ret === false) {\n                ret = prevRenderer.apply(renderer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.renderer) {\n            _loop(prop);\n          }\n\n          opts.renderer = renderer;\n        })();\n      }\n\n      if (pack.tokenizer) {\n        (function () {\n          var tokenizer = marked.defaults.tokenizer || new Tokenizer();\n\n          var _loop2 = function _loop2(prop) {\n            var prevTokenizer = tokenizer[prop]; // Replace tokenizer with func to run extension, but fall back if false\n\n            tokenizer[prop] = function () {\n              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                args[_key4] = arguments[_key4];\n              }\n\n              var ret = pack.tokenizer[prop].apply(tokenizer, args);\n\n              if (ret === false) {\n                ret = prevTokenizer.apply(tokenizer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.tokenizer) {\n            _loop2(prop);\n          }\n\n          opts.tokenizer = tokenizer;\n        })();\n      } // ==-- Parse WalkTokens extensions --== //\n\n\n      if (pack.walkTokens) {\n        var _walkTokens = marked.defaults.walkTokens;\n\n        opts.walkTokens = function (token) {\n          pack.walkTokens.call(this, token);\n\n          if (_walkTokens) {\n            _walkTokens.call(this, token);\n          }\n        };\n      }\n\n      if (hasExtensions) {\n        opts.extensions = extensions;\n      }\n\n      marked.setOptions(opts);\n    });\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    var _loop3 = function _loop3() {\n      var token = _step.value;\n      callback.call(marked, token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell.tokens, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.rows), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell.tokens, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {\n              // Walk any extensions\n              marked.defaults.extensions.childTokens[token.type].forEach(function (childTokens) {\n                marked.walkTokens(token[childTokens], callback);\n              });\n            } else if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      _loop3();\n    }\n  };\n  /**\n   * Parse Inline\n   * @param {string} src\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    try {\n      var tokens = Lexer.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.Tokenizer = Tokenizer;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n  var options = marked.options;\n  var setOptions = marked.setOptions;\n  var use = marked.use;\n  var walkTokens = marked.walkTokens;\n  var parseInline = marked.parseInline;\n  var parse = marked;\n  var parser = Parser.parse;\n  var lexer = Lexer.lex;\n\n  exports.Lexer = Lexer;\n  exports.Parser = Parser;\n  exports.Renderer = Renderer;\n  exports.Slugger = Slugger;\n  exports.TextRenderer = TextRenderer;\n  exports.Tokenizer = Tokenizer;\n  exports.getDefaults = getDefaults;\n  exports.lexer = lexer;\n  exports.marked = marked;\n  exports.options = options;\n  exports.parse = parse;\n  exports.parseInline = parseInline;\n  exports.parser = parser;\n  exports.setOptions = setOptions;\n  exports.use = use;\n  exports.walkTokens = walkTokens;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n\n// ESM-uncomment-begin\n})();\nexport var marked = (__marked_exports || exports);\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { escapeDoubleQuotes, parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${escapeDoubleQuotes(href)}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${escapeDoubleQuotes(text)}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${escapeDoubleQuotes(title)}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        title = typeof title === 'string' ? escapeDoubleQuotes(removeMarkdownEscapes(title)) : '';\n        href = removeMarkdownEscapes(href);\n        // HTML Encode href\n        href = href.replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;');\n        return `<a href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    // Will collect [id, renderedElement] tuples\n    const codeBlocks = [];\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const id = defaultGenerator.nextId();\n            const value = options.codeBlockRenderer(lang !== null && lang !== void 0 ? lang : '', code);\n            codeBlocks.push(value.then(element => [id, element]));\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.src = _href(href, true);\n        }\n    });\n    markdownHtmlDoc.body.querySelectorAll('a')\n        .forEach(a => {\n        const href = a.getAttribute('href'); // Get the raw 'href' attribute value as text, not the resolved 'href'\n        a.setAttribute('href', ''); // Clear out href. We use the `data-href` for handling clicks instead\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            a.replaceWith(...a.childNodes);\n        }\n        else {\n            let resolvedHref = _href(href, false);\n            if (markdown.baseUri) {\n                resolvedHref = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n            }\n            a.dataset.href = resolvedHref;\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    if (codeBlocks.length > 0) {\n        Promise.all(codeBlocks).then((tuples) => {\n            var _a, _b;\n            if (isDisposed) {\n                return;\n            }\n            const renderedElements = new Map(tuples);\n            const placeholderElements = element.querySelectorAll(`div[data-code]`);\n            for (const placeholderElement of placeholderElements) {\n                const renderedElement = renderedElements.get((_a = placeholderElement.dataset['code']) !== null && _a !== void 0 ? _a : '');\n                if (renderedElement) {\n                    DOM.reset(placeholderElement, renderedElement);\n                }\n            }\n            (_b = options.asyncRenderCallback) === null || _b === void 0 ? void 0 : _b.call(options);\n        });\n    }\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            disposables.dispose();\n        }\n    };\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    const hook = DOM.hookDomPurifyHrefAndSrcSanitizer(allowedSchemes);\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        hook.dispose();\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { tokenizeToString } from '../../../common/languages/textToHtmlTokenizer.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nlet MarkdownRenderer = class MarkdownRenderer {\n    constructor(_options, _languageService, _openerService) {\n        this._options = _options;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._onDidRenderAsync = new Emitter();\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\n    }\n    dispose() {\n        this._onDidRenderAsync.dispose();\n    }\n    render(markdown, options, markedOptions) {\n        if (!markdown) {\n            const element = document.createElement('span');\n            return { element, dispose: () => { } };\n        }\n        const disposables = new DisposableStore();\n        const rendered = disposables.add(renderMarkdown(markdown, Object.assign(Object.assign({}, this._getRenderOptions(markdown, disposables)), options), markedOptions));\n        return {\n            element: rendered.element,\n            dispose: () => disposables.dispose()\n        };\n    }\n    _getRenderOptions(markdown, disposables) {\n        return {\n            codeBlockRenderer: (languageAlias, value) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                // In markdown,\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n                // it is possible no alias is given in which case we fall back to the current editor lang\n                let languageId;\n                if (languageAlias) {\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n                }\n                else if (this._options.editor) {\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\n                }\n                if (!languageId) {\n                    languageId = PLAINTEXT_LANGUAGE_ID;\n                }\n                const html = yield tokenizeToString(this._languageService, value, languageId);\n                const element = document.createElement('span');\n                element.innerHTML = ((_c = (_b = MarkdownRenderer._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\n                // use \"good\" font\n                if (this._options.editor) {\n                    const fontInfo = this._options.editor.getOption(46 /* EditorOption.fontInfo */);\n                    applyFontInfo(element, fontInfo);\n                }\n                else if (this._options.codeBlockFontFamily) {\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\n                }\n                if (this._options.codeBlockFontSize !== undefined) {\n                    element.style.fontSize = this._options.codeBlockFontSize;\n                }\n                return element;\n            }),\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\n            actionHandler: {\n                callback: (content) => this._openerService.open(content, { fromUserGesture: true, allowContributedOpeners: true, allowCommands: markdown.isTrusted }).catch(onUnexpectedError),\n                disposables: disposables\n            }\n        };\n    }\n};\nMarkdownRenderer._ttpTokenizer = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('tokenizeToString', {\n    createHTML(html) {\n        return html;\n    }\n});\nMarkdownRenderer = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], MarkdownRenderer);\nexport { MarkdownRenderer };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { NullOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nconst $ = dom.$;\nexport class MarginHoverWidget extends Disposable {\n    constructor(editor, languageService, openerService = NullOpenerService) {\n        super();\n        this._renderDisposeables = this._register(new DisposableStore());\n        this._editor = editor;\n        this._isVisible = false;\n        this._messages = [];\n        this._hover = this._register(new HoverWidget());\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\n        this._computer = new MarginHoverComputer(this._editor);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return MarginHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        return null;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _onModelDecorationsChanged() {\n        if (this._isVisible) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n        }\n    }\n    startShowingAt(lineNumber) {\n        if (this._computer.lineNumber === lineNumber) {\n            // We have to show the widget at the exact same line number as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        this.hide();\n        this._computer.lineNumber = lineNumber;\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n    }\n    hide() {\n        this._computer.lineNumber = -1;\n        this._hoverOperation.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n    }\n    _withResult(result) {\n        this._messages = result;\n        if (this._messages.length > 0) {\n            this._renderMessages(this._computer.lineNumber, this._messages);\n        }\n        else {\n            this.hide();\n        }\n    }\n    _renderMessages(lineNumber, messages) {\n        this._renderDisposeables.clear();\n        const fragment = document.createDocumentFragment();\n        for (const msg of messages) {\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n        }\n        this._updateContents(fragment);\n        this._showAt(lineNumber);\n    }\n    _updateContents(node) {\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._updateFont();\n    }\n    _showAt(lineNumber) {\n        if (!this._isVisible) {\n            this._isVisible = true;\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        }\n        const editorLayout = this._editor.getLayoutInfo();\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\n        const editorScrollTop = this._editor.getScrollTop();\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\n    }\n}\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\nclass MarginHoverComputer {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._lineNumber = -1;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    set lineNumber(value) {\n        this._lineNumber = value;\n    }\n    computeSync() {\n        const toHoverMessage = (contents) => {\n            return {\n                value: contents\n            };\n        };\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n        const result = [];\n        if (!lineDecorations) {\n            return result;\n        }\n        for (const d of lineDecorations) {\n            if (!d.options.glyphMarginClassName) {\n                continue;\n            }\n            const hoverMessage = d.options.glyphMarginHoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class HoverProviderResult {\n    constructor(provider, hover, ordinal) {\n        this.provider = provider;\n        this.hover = hover;\n        this.ordinal = ordinal;\n    }\n}\nfunction executeProvider(provider, ordinal, model, position, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const result = yield Promise.resolve(provider.provideHover(model, position, token));\n            if (result && isValid(result)) {\n                return new HoverProviderResult(provider, result, ordinal);\n            }\n        }\n        catch (err) {\n            onUnexpectedExternalError(err);\n        }\n        return undefined;\n    });\n}\nexport function getHover(registry, model, position, token) {\n    const providers = registry.ordered(model);\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\n    return AsyncIterableObject.fromPromises(promises).coalesce();\n}\nexport function getHoverPromise(registry, model, position, token) {\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\n}\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\n});\nfunction isValid(result) {\n    const hasRange = (typeof result.range !== 'undefined');\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n    return hasRange && hasHtmlContent;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n    constructor(owner, range, contents, ordinal) {\n        this.owner = owner;\n        this.range = range;\n        this.contents = contents;\n        this.ordinal = ordinal;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 2;\n    }\n    createLoadingMessage(anchor) {\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], 2000);\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        let index = 1000;\n        const lineLength = model.getLineLength(lineNumber);\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: languageId\n        });\n        if (typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n                }], index++));\n        }\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const hoverMessage = d.options.hoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), index++));\n        }\n        return result;\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const model = this._editor.getModel();\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\n            .map(item => {\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\n            return new MarkdownHover(this, rng, item.hover.contents, item.ordinal);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nMarkdownHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\n    const disposables = new DisposableStore();\n    for (const hoverPart of hoverParts) {\n        for (const contents of hoverPart.contents) {\n            if (isEmptyMarkdownString(contents)) {\n                continue;\n            }\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\n            disposables.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const renderedContents = disposables.add(renderer.render(contents));\n            hoverContentsElement.appendChild(renderedContents.element);\n            context.fragment.appendChild(markdownHoverElement);\n        }\n    }\n    return disposables;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../base/common/codicons.js';\nimport Severity from '../../../base/common/severity.js';\nimport { problemsErrorIconForeground, problemsInfoIconForeground, problemsWarningIconForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nexport var SeverityIcon;\n(function (SeverityIcon) {\n    function className(severity) {\n        switch (severity) {\n            case Severity.Ignore:\n                return 'severity-ignore ' + Codicon.info.classNames;\n            case Severity.Info:\n                return Codicon.info.classNames;\n            case Severity.Warning:\n                return Codicon.warning.classNames;\n            case Severity.Error:\n                return Codicon.error.classNames;\n            default:\n                return '';\n        }\n    }\n    SeverityIcon.className = className;\n})(SeverityIcon || (SeverityIcon = {}));\nregisterThemingParticipant((theme, collector) => {\n    const errorIconForeground = theme.getColor(problemsErrorIconForeground);\n    if (errorIconForeground) {\n        const errorCodiconSelector = Codicon.error.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${errorCodiconSelector},\n\t\t\t.markers-panel .marker-icon${errorCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${errorCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${errorCodiconSelector} {\n\t\t\t\tcolor: ${errorIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const warningIconForeground = theme.getColor(problemsWarningIconForeground);\n    if (warningIconForeground) {\n        const warningCodiconSelector = Codicon.warning.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${warningCodiconSelector},\n\t\t\t.markers-panel .marker-icon${warningCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${warningCodiconSelector},\n\t\t\t.extension-editor ${warningCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${warningCodiconSelector},\n\t\t\t.preferences-editor ${warningCodiconSelector} {\n\t\t\t\tcolor: ${warningIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const infoIconForeground = theme.getColor(problemsInfoIconForeground);\n    if (infoIconForeground) {\n        const infoCodiconSelector = Codicon.info.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${infoCodiconSelector},\n\t\t\t.markers-panel .marker-icon${infoCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${infoCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${infoCodiconSelector},\n\t\t\t.extension-editor ${infoCodiconSelector} {\n\t\t\t\tcolor: ${infoIconForeground};\n\t\t\t}\n\t\t`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/common/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(61 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nexport const editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport const editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nexport const editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport const editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nexport const editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport const editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nexport const editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions } from '../../codeAction/browser/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../../codeAction/browser/codeActionCommands.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/browser/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* CodeActionTriggerType.Invoke */,\n    filter: { include: CodeActionKind.QuickFix },\n    triggerAction: CodeActionTriggerSource.QuickFixHover\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 5;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(context, markerHover, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            context.statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    var _a;\n                    context.hide();\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                context.statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: QuickFixAction.Id,\n                    run: (target) => {\n                        showing = true;\n                        const controller = QuickFixController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        context.hide();\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left + 6,\n                            y: elementPosition.top + elementPosition.height + 6,\n                            width: elementPosition.width,\n                            height: elementPosition.height\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(1, IMarkerDecorationsService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageFeaturesService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n    const linkFg = theme.getColor(textLinkForeground);\n    if (linkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n    }\n    const activeLinkFg = theme.getColor(textLinkActiveForeground);\n    if (activeLinkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { HoverParticipantRegistry } from './hoverTypes.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\nlet ModesHoverController = class ModesHoverController {\n    constructor(_editor, _instantiationService, _openerService, _languageService, _contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._languageService = _languageService;\n        this._toUnhook = new DisposableStore();\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(55 /* EditorOption.hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n    }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController.ID);\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(55 /* EditorOption.hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._isMouseDown = true;\n        const target = mouseEvent.target;\n        if (target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            this._hoverClicked = false;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseLeave(mouseEvent) {\n        var _a;\n        const targetEm = (mouseEvent.event.browserEvent.relatedTarget);\n        if ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.containsNode(targetEm)) {\n            // when the mouse is inside hover widget\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e;\n        const target = mouseEvent.target;\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID\n            && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (!this._isHoverEnabled) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n            return;\n        }\n        if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.position) {\n            (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        if (e.keyCode !== 5 /* KeyCode.Ctrl */ && e.keyCode !== 6 /* KeyCode.Alt */ && e.keyCode !== 57 /* KeyCode.Meta */ && e.keyCode !== 4 /* KeyCode.Shift */) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()))) {\n            return;\n        }\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n        }\n        return this._contentWidget;\n    }\n    isColorPickerVisible() {\n        var _a;\n        return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n    }\n    showContentHover(range, mode, focus) {\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, IContextKeyService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showHover',\n                comment: [\n                    'Label for action that will trigger the showing of a hover in the editor.',\n                    'This allows for users to show the hover without using the mouse.'\n                ]\n            }, \"Show Hover\"),\n            alias: 'Show Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */;\n        controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, focus);\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        if (!goto) {\n            return;\n        }\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, true);\n        });\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\nHoverParticipantRegistry.register(MarkerHoverParticipant);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n    if (editorHoverHighlightColor) {\n        collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n    }\n    const hoverBackground = theme.getColor(editorHoverBackground);\n    if (hoverBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n    }\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n    }\n    const hoverForeground = theme.getColor(editorHoverForeground);\n    if (hoverForeground) {\n        collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n    }\n    const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n    if (actionsBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function createStringDataTransferItem(stringOrPromise) {\n    return {\n        asString: () => __awaiter(this, void 0, void 0, function* () { return stringOrPromise; }),\n        asFile: () => undefined,\n        value: typeof stringOrPromise === 'string' ? stringOrPromise : undefined,\n    };\n}\nexport function createFileDataTransferItem(fileName, uri, data) {\n    return {\n        asString: () => __awaiter(this, void 0, void 0, function* () { return ''; }),\n        asFile: () => ({ name: fileName, uri, data }),\n        value: undefined,\n    };\n}\nexport class VSDataTransfer {\n    constructor() {\n        this._entries = new Map();\n    }\n    get size() {\n        return this._entries.size;\n    }\n    has(mimeType) {\n        return this._entries.has(this.toKey(mimeType));\n    }\n    get(mimeType) {\n        var _a;\n        return (_a = this._entries.get(this.toKey(mimeType))) === null || _a === void 0 ? void 0 : _a[0];\n    }\n    append(mimeType, value) {\n        const existing = this._entries.get(mimeType);\n        if (existing) {\n            existing.push(value);\n        }\n        else {\n            this._entries.set(this.toKey(mimeType), [value]);\n        }\n    }\n    replace(mimeType, value) {\n        this._entries.set(this.toKey(mimeType), [value]);\n    }\n    delete(mimeType) {\n        this._entries.delete(this.toKey(mimeType));\n    }\n    *entries() {\n        for (const [mine, items] of this._entries.entries()) {\n            for (const item of items) {\n                yield [mine, item];\n            }\n        }\n    }\n    values() {\n        return Array.from(this._entries.values()).flat();\n    }\n    forEach(f) {\n        for (const [mime, item] of this.entries()) {\n            f(item, mime);\n        }\n    }\n    toKey(mimeType) {\n        return mimeType.toLowerCase();\n    }\n}\n","export const generateUuid = (function () {\n    // use `randomUUID` if possible\n    if (typeof crypto === 'object' && typeof crypto.randomUUID === 'function') {\n        return crypto.randomUUID.bind(crypto);\n    }\n    // use `randomValues` if possible\n    let getRandomValues;\n    if (typeof crypto === 'object' && typeof crypto.getRandomValues === 'function') {\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    else {\n        getRandomValues = function (bucket) {\n            for (let i = 0; i < bucket.length; i++) {\n                bucket[i] = Math.floor(Math.random() * 256);\n            }\n            return bucket;\n        };\n    }\n    // prep-work\n    const _data = new Uint8Array(16);\n    const _hex = [];\n    for (let i = 0; i < 256; i++) {\n        _hex.push(i.toString(16).padStart(2, '0'));\n    }\n    return function generateUuid() {\n        // get data\n        getRandomValues(_data);\n        // set version bits\n        _data[6] = (_data[6] & 0x0f) | 0x40;\n        _data[8] = (_data[8] & 0x3f) | 0x80;\n        // print as string\n        let i = 0;\n        let result = '';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        return result;\n    };\n})();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DataTransfers } from '../../../base/browser/dnd.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { extractSelection } from '../../opener/common/opener.js';\nimport { Registry } from '../../registry/common/platform.js';\n//#region Editor / Resources DND\nexport const CodeDataTransfers = {\n    EDITORS: 'CodeEditors',\n    FILES: 'CodeFiles'\n};\nexport function extractEditorsDropData(e) {\n    var _a;\n    const editors = [];\n    if (e.dataTransfer && e.dataTransfer.types.length > 0) {\n        // Data Transfer: Code Editors\n        const rawEditorsData = e.dataTransfer.getData(CodeDataTransfers.EDITORS);\n        if (rawEditorsData) {\n            try {\n                editors.push(...parse(rawEditorsData));\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Data Transfer: Resources\n        else {\n            try {\n                const rawResourcesData = e.dataTransfer.getData(DataTransfers.RESOURCES);\n                editors.push(...createDraggedEditorInputFromRawResourcesData(rawResourcesData));\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Check for native file transfer\n        if ((_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.files) {\n            for (let i = 0; i < e.dataTransfer.files.length; i++) {\n                const file = e.dataTransfer.files[i];\n                if (file && file.path /* Electron only */) {\n                    try {\n                        editors.push({ resource: URI.file(file.path), isExternal: true, allowWorkspaceOpen: true });\n                    }\n                    catch (error) {\n                        // Invalid URI\n                    }\n                }\n            }\n        }\n        // Check for CodeFiles transfer\n        const rawCodeFiles = e.dataTransfer.getData(CodeDataTransfers.FILES);\n        if (rawCodeFiles) {\n            try {\n                const codeFiles = JSON.parse(rawCodeFiles);\n                for (const codeFile of codeFiles) {\n                    editors.push({ resource: URI.file(codeFile), isExternal: true, allowWorkspaceOpen: true });\n                }\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Workbench contributions\n        const contributions = Registry.as(Extensions.DragAndDropContribution).getAll();\n        for (const contribution of contributions) {\n            const data = e.dataTransfer.getData(contribution.dataFormatKey);\n            if (data) {\n                try {\n                    editors.push(...contribution.getEditorInputs(data));\n                }\n                catch (error) {\n                    // Invalid transfer\n                }\n            }\n        }\n    }\n    return editors;\n}\nexport function createDraggedEditorInputFromRawResourcesData(rawResourcesData) {\n    const editors = [];\n    if (rawResourcesData) {\n        const resourcesRaw = JSON.parse(rawResourcesData);\n        for (const resourceRaw of resourcesRaw) {\n            if (resourceRaw.indexOf(':') > 0) { // mitigate https://github.com/microsoft/vscode/issues/124946\n                const { selection, uri } = extractSelection(URI.parse(resourceRaw));\n                editors.push({ resource: uri, options: { selection } });\n            }\n        }\n    }\n    return editors;\n}\nclass DragAndDropContributionRegistry {\n    constructor() {\n        this._contributions = new Map();\n    }\n    getAll() {\n        return this._contributions.values();\n    }\n}\nexport const Extensions = {\n    DragAndDropContribution: 'workbench.contributions.dragAndDrop'\n};\nRegistry.add(Extensions.DragAndDropContribution, new DragAndDropContributionRegistry());\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { distinct } from '../../base/common/arrays.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers, extractEditorsDropData } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nexport function createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n]);\nexport function addExternalEditorsDropData(dataTransfer, dragEvent, overwriteUriList = false) {\n    var _a;\n    if (dragEvent.dataTransfer && (overwriteUriList || !dataTransfer.has(Mimes.uriList))) {\n        const editorData = extractEditorsDropData(dragEvent)\n            .filter(input => input.resource)\n            .map(input => input.resource.toString());\n        // Also add in the files\n        for (const item of (_a = dragEvent.dataTransfer) === null || _a === void 0 ? void 0 : _a.items) {\n            const file = item.getAsFile();\n            if (file) {\n                editorData.push(file.path ? URI.file(file.path).toString() : file.name);\n            }\n        }\n        if (editorData.length) {\n            dataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        dataTransfer.delete(internal);\n    }\n}\nexport const UriList = Object.freeze({\n    // http://amundsen.com/hypermedia/urilist/\n    create: (entries) => {\n        return distinct(entries.map(x => x.toString())).join('\\r\\n');\n    },\n    parse: (str) => {\n        return str.split('\\r\\n').filter(value => !value.startsWith('#'));\n    }\n});\n","import { hasDriveLetter } from './extpath.js';\nimport { isWindows } from './platform.js';\nexport function normalizeDriveLetter(path, isWindowsOS = isWindows) {\n    if (hasDriveLetter(path, isWindowsOS)) {\n        return path.charAt(0).toUpperCase() + path.slice(1);\n    }\n    return path;\n}\nlet normalizedUserHomeCached = Object.create(null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'CURSOR_INDEX': true,\n    'CURSOR_NUMBER': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            const value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        else if (name === 'CURSOR_INDEX') {\n            return String(this._selectionIdx);\n        }\n        else if (name === 'CURSOR_NUMBER') {\n            return String(this._selectionIdx + 1);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nlet CommentBasedVariableResolver = class CommentBasedVariableResolver {\n    constructor(_model, _selection, _languageConfigurationService) {\n        this._model = _model;\n        this._selection = _selection;\n        this._languageConfigurationService = _languageConfigurationService;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n};\nCommentBasedVariableResolver = __decorate([\n    __param(2, ILanguageConfigurationService)\n], CommentBasedVariableResolver);\nexport { CommentBasedVariableResolver };\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (!workspaceIdentifier) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        const filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._offset = -1;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    initialize(textChange) {\n        this._offset = textChange.newPosition;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.removeDecorations([...this._placeholderDecorations.values()]);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._offset === -1) {\n            throw new Error(`Snippet not initialized!`);\n        }\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            const operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    get isTrivialSnippet() {\n        return this._snippet.placeholders.length === 0\n            || (this._snippet.placeholders.length === 1 && this._snippet.placeholders[0].isFinalTabstop);\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get activeChoice() {\n        if (!this._placeholderDecorations) {\n            return undefined;\n        }\n        const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\n        if (!(placeholder === null || placeholder === void 0 ? void 0 : placeholder.choice)) {\n            return undefined;\n        }\n        const id = this._placeholderDecorations.get(placeholder);\n        if (!id) {\n            return undefined;\n        }\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (!range) {\n            return undefined;\n        }\n        return { range, choice: placeholder.choice };\n    }\n    get hasChoice() {\n        let result = false;\n        this._snippet.walk(marker => {\n            result = marker instanceof Choice;\n            return !result;\n        });\n        return result;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(nested._offset !== -1);\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetSession = class SnippetSession {\n    constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\n        this._editor = _editor;\n        this._template = _template;\n        this._options = _options;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._templateMerges = [];\n        this._snippets = [];\n    }\n    static adjustWhitespace(model, position, snippet, adjustIndentation, adjustNewlines) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    const prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        const firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        const firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(73 /* EditorOption.multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection, languageConfigurationService),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edits[idx]._isTracked = true;\n            snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        if (!editor.hasModel() || snippetEdits.length === 0) {\n            return { edits: [], snippets: [] };\n        }\n        const edits = [];\n        const model = editor.getModel();\n        const parser = new SnippetParser();\n        const snippet = new TextmateSnippet();\n        // snippet variables resolver\n        const resolver = new CompositeSnippetVariableResolver([\n            editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)),\n            new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(73 /* EditorOption.multiCursorPaste */) === 'spread'),\n            new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer),\n            new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService),\n            new TimeBasedVariableResolver,\n            new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))),\n            new RandomBasedVariableResolver,\n        ]);\n        //\n        snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n        let offset = 0;\n        for (let i = 0; i < snippetEdits.length; i++) {\n            const { range, template } = snippetEdits[i];\n            // gaps between snippet edits are appended as text nodes. this\n            // ensures placeholder-offsets are later correct\n            if (i > 0) {\n                const lastRange = snippetEdits[i - 1].range;\n                const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\n                const textNode = new Text(model.getValueInRange(textRange));\n                snippet.appendChild(textNode);\n                offset += textNode.value.length;\n            }\n            parser.parseFragment(template, snippet);\n            snippet.resolveVariables(resolver);\n            const snippetText = snippet.toString();\n            const snippetFragmentText = snippetText.slice(offset);\n            offset = snippetText.length;\n            // make edit\n            const edit = EditOperation.replace(range, snippetFragmentText);\n            edit.identifier = { major: i, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edit._isTracked = true;\n            edits.push(edit);\n        }\n        //\n        parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\n        return {\n            edits,\n            snippets: [new OneSnippet(editor, snippet, '')]\n        };\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = typeof this._template === 'string'\n            ? SnippetSession.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService)\n            : SnippetSession.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            // Trivial snippets have no placeholder or are just the final placeholder. That means they\n            // are just text insertions and we don't need to merge the nested snippet into the existing\n            // snippet\n            const isTrivialSnippet = snippets[0].isTrivialSnippet;\n            if (!isTrivialSnippet) {\n                for (const snippet of this._snippets) {\n                    snippet.merge(snippets);\n                }\n                console.assert(snippets.length === 0);\n            }\n            if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\n                return this._move(undefined);\n            }\n            else {\n                return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get hasChoice() {\n        return this._snippets[0].hasChoice;\n    }\n    get activeChoice() {\n        return this._snippets[0].activeChoice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        const allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (const [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n};\nSnippetSession = __decorate([\n    __param(3, ILanguageConfigurationService)\n], SnippetSession);\nexport { SnippetSession };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n    constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\n        this._editor = _editor;\n        this._logService = _logService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    apply(edits, opts) {\n        try {\n            this._doInsert(edits, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_edits=', edits);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        // don't merge\n        if (this._session && typeof template !== 'string') {\n            this.cancel();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\n            this._session.insert();\n        }\n        else {\n            assertType(typeof template === 'string');\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        // regster completion item provider when there is any choice element\n        if ((_a = this._session) === null || _a === void 0 ? void 0 : _a.hasChoice) {\n            this._choiceCompletionItemProvider = {\n                provideCompletionItems: (model, position) => {\n                    if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\n                        return undefined;\n                    }\n                    const { activeChoice } = this._session;\n                    if (!activeChoice || activeChoice.choice.options.length === 0) {\n                        return undefined;\n                    }\n                    const word = model.getValueInRange(activeChoice.range);\n                    const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\n                    const suggestions = [];\n                    for (let i = 0; i < activeChoice.choice.options.length; i++) {\n                        const option = activeChoice.choice.options[i];\n                        suggestions.push({\n                            kind: 13 /* CompletionItemKind.Value */,\n                            label: option.value,\n                            insertText: option.value,\n                            sortText: 'a'.repeat(i + 1),\n                            range: activeChoice.range,\n                            filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\n                            command: { id: 'jumpToNextSnippetPlaceholder', title: localize('next', 'Go to next placeholder...') }\n                        });\n                    }\n                    return { suggestions };\n                }\n            };\n            const registration = this._languageFeaturesService.completionProvider.register({\n                language: this._editor.getModel().getLanguageId(),\n                pattern: this._editor.getModel().uri.fsPath,\n                scheme: this._editor.getModel().uri.scheme\n            }, this._choiceCompletionItemProvider);\n            this._snippetListener.add(registration);\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { activeChoice } = this._session;\n        if (!activeChoice || !this._choiceCompletionItemProvider) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== activeChoice.choice) {\n            this._currentChoice = activeChoice.choice;\n            // trigger suggest with the special choice completion provider\n            queueMicrotask(() => {\n                showSimpleSuggestions(this._editor, this._choiceCompletionItemProvider);\n            });\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        this._currentChoice = undefined;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        if (this._session) {\n            this._session.prev();\n        }\n        this._updateState();\n    }\n    next() {\n        if (this._session) {\n            this._session.next();\n        }\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, ILogService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageConfigurationService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n// ---\nexport function performSnippetEdit(editor, snippet, selections) {\n    const controller = SnippetController2.get(editor);\n    if (!controller) {\n        return false;\n    }\n    editor.focus();\n    controller.apply(selections.map(selection => {\n        return {\n            range: Selection.liftSelection(selection),\n            template: snippet\n        };\n    }));\n    return controller.isInSnippet();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { createCancelablePromise } from '../../../../base/common/async.js';\nimport { createStringDataTransferItem } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = class CopyPasteController extends Disposable {\n    constructor(editor, _bulkEditService, _clipboardService, _configurationService, _languageFeaturesService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n    }\n    arePasteActionsEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.pasteActions.enabled', {\n            resource: model.uri\n        });\n    }\n    handleCopy(e) {\n        var _a;\n        if (!e.clipboardData || !this._editor.hasTextFocus()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        if (!this.arePasteActionsEnabled(model)) {\n            return;\n        }\n        const ranges = [...selections];\n        const primarySelection = selections[0];\n        const wasFromEmptySelection = primarySelection.isEmpty();\n        if (wasFromEmptySelection) {\n            if (!this._editor.getOption(33 /* EditorOption.emptySelectionClipboard */)) {\n                return;\n            }\n            ranges[0] = new Range(primarySelection.startLineNumber, 0, primarySelection.startLineNumber, model.getLineLength(primarySelection.startLineNumber));\n        }\n        const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { wasFromEmptySelection });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            wasFromEmptySelection,\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = yield Promise.all(providers.map(provider => {\n                return provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n            }));\n            for (const result of results) {\n                result === null || result === void 0 ? void 0 : result.forEach((value, key) => {\n                    dataTransfer.replace(key, value);\n                });\n            }\n            return dataTransfer;\n        }));\n        (_a = this._currentClipboardItem) === null || _a === void 0 ? void 0 : _a.dataTransferPromise.cancel();\n        this._currentClipboardItem = { handle: handle, dataTransferPromise: promise };\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    handlePaste(e) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!this.arePasteActionsEnabled(model)) {\n                return;\n            }\n            let metadata;\n            const rawMetadata = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData(vscodeClipboardMime);\n            if (rawMetadata && typeof rawMetadata === 'string') {\n                metadata = JSON.parse(rawMetadata);\n            }\n            const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model);\n            if (!providers.length) {\n                return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const originalDocVersion = model.getVersionId();\n            const tokenSource = new EditorStateCancellationTokenSource(this._editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */);\n            try {\n                const dataTransfer = toVSDataTransfer(e.clipboardData);\n                if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_b = this._currentClipboardItem) === null || _b === void 0 ? void 0 : _b.handle) === metadata.id) {\n                    const toMergeDataTransfer = yield this._currentClipboardItem.dataTransferPromise;\n                    toMergeDataTransfer.forEach((value, key) => {\n                        dataTransfer.replace(key, value);\n                    });\n                }\n                if (!dataTransfer.has(Mimes.uriList)) {\n                    const resources = yield this._clipboardService.readResources();\n                    if (resources.length) {\n                        dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                    }\n                }\n                dataTransfer.delete(vscodeClipboardMime);\n                for (const provider of providers) {\n                    if (!provider.pasteMimeTypes.some(type => {\n                        if (type.toLowerCase() === DataTransfers.FILES.toLowerCase()) {\n                            return [...dataTransfer.values()].some(item => item.asFile());\n                        }\n                        return dataTransfer.has(type);\n                    })) {\n                        continue;\n                    }\n                    const edit = yield provider.provideDocumentPasteEdits(model, selections, dataTransfer, tokenSource.token);\n                    if (originalDocVersion !== model.getVersionId()) {\n                        return;\n                    }\n                    if (edit) {\n                        performSnippetEdit(this._editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, selections);\n                        if (edit.additionalEdit) {\n                            yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor: this._editor });\n                        }\n                        return;\n                    }\n                }\n                // Default handler\n                const textDataTransfer = (_c = dataTransfer.get(Mimes.text)) !== null && _c !== void 0 ? _c : dataTransfer.get('text');\n                if (!textDataTransfer) {\n                    return;\n                }\n                const text = yield textDataTransfer.asString();\n                if (originalDocVersion !== model.getVersionId()) {\n                    return;\n                }\n                this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                    text: text,\n                    pasteOnNewLine: metadata === null || metadata === void 0 ? void 0 : metadata.wasFromEmptySelection,\n                    multicursorText: null\n                });\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, IClipboardService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], CopyPasteController);\nexport { CopyPasteController };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { CopyPasteController } from './copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController);\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.pasteActions.enabled': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('pasteActions', \"Enable/disable running edits from extensions on paste.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet ContextMenuController = class ContextMenuController {\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu({ x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 });\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(55 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const minimapOptions = this._editor.getOption(67 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run,\n                dispose: () => null\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController);\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n    constructor(selection, targetPosition, copy) {\n        this.selection = selection;\n        this.targetPosition = targetPosition;\n        this.copy = copy;\n        this.targetSelection = null;\n    }\n    getEditOperations(model, builder) {\n        const text = model.getValueInRange(this.selection);\n        if (!this.copy) {\n            builder.addEditOperation(this.selection, null);\n        }\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n        )) {\n            this.targetSelection = this.selection;\n            return;\n        }\n        if (this.copy) {\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n            // Drag the selection downwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n            // Drag the selection upwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        // The target position is at the same line as the selection's end position.\n        if (this.selection.endColumn <= this.targetPosition.column) {\n            // The target position is after the selection's end position\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column :\n                this.selection.endColumn);\n        }\n        else {\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n        }\n    }\n    computeCursorState(model, helper) {\n        return this.targetSelection;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n    if (isMacintosh) {\n        return e.altKey;\n    }\n    else {\n        return e.ctrlKey;\n    }\n}\nexport class DragAndDropController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._dndDecorationIds = this._editor.createDecorationsCollection();\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        this._dragSelection = null;\n    }\n    onEditorBlur() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n    }\n    onEditorKeyDown(e) {\n        if (!this._editor.getOption(31 /* EditorOption.dragAndDrop */) || this._editor.getOption(18 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = true;\n        }\n        if (this._mouseDown && hasTriggerModifier(e)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n    }\n    onEditorKeyUp(e) {\n        if (!this._editor.getOption(31 /* EditorOption.dragAndDrop */) || this._editor.getOption(18 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = false;\n        }\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._mouseDown = true;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._mouseDown = false;\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n    }\n    _onEditorMouseDrag(mouseEvent) {\n        const target = mouseEvent.target;\n        if (this._dragSelection === null) {\n            const selections = this._editor.getSelections() || [];\n            const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n            if (possibleSelections.length === 1) {\n                this._dragSelection = possibleSelections[0];\n            }\n            else {\n                return;\n            }\n        }\n        if (hasTriggerModifier(mouseEvent.event)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n        else {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n        if (target.position) {\n            if (this._dragSelection.containsPosition(target.position)) {\n                this._removeDecoration();\n            }\n            else {\n                this.showAt(target.position);\n            }\n        }\n    }\n    _onEditorMouseDropCanceled() {\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    _onEditorMouseDrop(mouseEvent) {\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n            const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n            if (this._dragSelection === null) {\n                let newSelections = null;\n                if (mouseEvent.event.shiftKey) {\n                    const primarySelection = this._editor.getSelection();\n                    if (primarySelection) {\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n                    }\n                }\n                else {\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\n                        if (selection.containsPosition(newCursorPosition)) {\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n                        }\n                        else {\n                            return selection;\n                        }\n                    });\n                }\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\n            }\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\n                ((hasTriggerModifier(mouseEvent.event) ||\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n                )) {\n                this._editor.pushUndoStop();\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n                this._editor.pushUndoStop();\n            }\n        }\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    showAt(position) {\n        this._dndDecorationIds.set([{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: DragAndDropController._DECORATION_OPTIONS\n            }]);\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n    }\n    _removeDecoration() {\n        this._dndDecorationIds.clear();\n    }\n    _hitContent(target) {\n        return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ ||\n            target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\n    }\n    _hitMargin(target) {\n        return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ ||\n            target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ ||\n            target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\n    }\n    dispose() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        super.dispose();\n    }\n}\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'dnd-target',\n    className: 'dnd-target'\n});\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { addExternalEditorsDropData, toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nlet DropIntoEditorController = class DropIntoEditorController extends Disposable {\n    constructor(editor, _bulkEditService, _languageFeaturesService, _progressService, workspaceContextService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._progressService = _progressService;\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n        this._languageFeaturesService.documentOnDropEditProvider.register('*', new DefaultOnDropProvider(workspaceContextService));\n    }\n    onDropIntoEditor(editor, position, dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer || !editor.hasModel()) {\n                return;\n            }\n            const model = editor.getModel();\n            const initialModelVersion = model.getVersionId();\n            const ourDataTransfer = yield this.extractDataTransferData(dragEvent);\n            if (ourDataTransfer.size === 0) {\n                return;\n            }\n            if (editor.getModel().getVersionId() !== initialModelVersion) {\n                return;\n            }\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */);\n            try {\n                const providers = this._languageFeaturesService.documentOnDropEditProvider.ordered(model);\n                const edit = yield this._progressService.withProgress({\n                    location: 15 /* ProgressLocation.Notification */,\n                    delay: 750,\n                    title: localize('dropProgressTitle', \"Running drop handlers...\"),\n                    cancellable: true,\n                }, () => {\n                    return raceCancellation((() => __awaiter(this, void 0, void 0, function* () {\n                        for (const provider of providers) {\n                            const edit = yield provider.provideDocumentOnDropEdits(model, position, ourDataTransfer, tokenSource.token);\n                            if (tokenSource.token.isCancellationRequested) {\n                                return undefined;\n                            }\n                            if (edit) {\n                                return edit;\n                            }\n                        }\n                        return undefined;\n                    }))(), tokenSource.token);\n                }, () => {\n                    tokenSource.cancel();\n                });\n                if (tokenSource.token.isCancellationRequested || editor.getModel().getVersionId() !== initialModelVersion) {\n                    return;\n                }\n                if (edit) {\n                    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                    performSnippetEdit(editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, [Selection.fromRange(range, 0 /* SelectionDirection.LTR */)]);\n                    if (edit.additionalEdit) {\n                        yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor });\n                    }\n                    return;\n                }\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n    extractDataTransferData(dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer) {\n                return new VSDataTransfer();\n            }\n            const textEditorDataTransfer = toVSDataTransfer(dragEvent.dataTransfer);\n            addExternalEditorsDropData(textEditorDataTransfer, dragEvent);\n            return textEditorDataTransfer;\n        });\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IProgressService),\n    __param(4, IWorkspaceContextService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\nlet DefaultOnDropProvider = class DefaultOnDropProvider {\n    constructor(_workspaceContextService) {\n        this._workspaceContextService = _workspaceContextService;\n    }\n    provideDocumentOnDropEdits(_model, _position, dataTransfer, _token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const urlListEntry = dataTransfer.get(Mimes.uriList);\n            if (urlListEntry) {\n                const urlList = yield urlListEntry.asString();\n                const snippet = this.getUriListInsertText(urlList);\n                if (snippet) {\n                    return { insertText: snippet };\n                }\n            }\n            const textEntry = (_a = dataTransfer.get('text')) !== null && _a !== void 0 ? _a : dataTransfer.get(Mimes.text);\n            if (textEntry) {\n                const text = yield textEntry.asString();\n                return { insertText: text };\n            }\n            return undefined;\n        });\n    }\n    getUriListInsertText(strUriList) {\n        const uris = [];\n        for (const resource of UriList.parse(strUriList)) {\n            try {\n                uris.push(URI.parse(resource));\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        if (!uris.length) {\n            return;\n        }\n        return uris\n            .map(uri => {\n            const root = this._workspaceContextService.getWorkspaceFolder(uri);\n            if (root) {\n                const rel = relativePath(root.uri, uri);\n                if (rel) {\n                    return rel;\n                }\n            }\n            return uri.fsPath;\n        })\n            .join(' ');\n    }\n};\nDefaultOnDropProvider = __decorate([\n    __param(0, IWorkspaceContextService)\n], DefaultOnDropProvider);\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nexport class FindDecorations {\n    constructor(editor) {\n        this._editor = editor;\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n        this._startPosition = this._editor.getPosition();\n    }\n    dispose() {\n        this._editor.removeDecorations(this._allDecorations());\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    reset() {\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    getCount() {\n        return this._decorations.length;\n    }\n    /** @deprecated use getFindScopes to support multiple selections */\n    getFindScope() {\n        if (this._findScopeDecorationIds[0]) {\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n        }\n        return null;\n    }\n    getFindScopes() {\n        if (this._findScopeDecorationIds.length) {\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n            if (scopes.length) {\n                return scopes;\n            }\n        }\n        return null;\n    }\n    getStartPosition() {\n        return this._startPosition;\n    }\n    setStartPosition(newStartPosition) {\n        this._startPosition = newStartPosition;\n        this.setCurrentFindMatch(null);\n    }\n    _getDecorationIndex(decorationId) {\n        const index = this._decorations.indexOf(decorationId);\n        if (index >= 0) {\n            return index + 1;\n        }\n        return 1;\n    }\n    getCurrentMatchesPosition(desiredRange) {\n        const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n        for (const candidate of candidates) {\n            const candidateOpts = candidate.options;\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n                return this._getDecorationIndex(candidate.id);\n            }\n        }\n        // We don't know the current match position, so returns zero to show '?' in find widget\n        return 0;\n    }\n    setCurrentFindMatch(nextMatch) {\n        let newCurrentDecorationId = null;\n        let matchPosition = 0;\n        if (nextMatch) {\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\n                const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n                if (nextMatch.equalsRange(range)) {\n                    newCurrentDecorationId = this._decorations[i];\n                    matchPosition = (i + 1);\n                    break;\n                }\n            }\n        }\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n            this._editor.changeDecorations((changeAccessor) => {\n                if (this._highlightedDecorationId !== null) {\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n                    this._highlightedDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    this._highlightedDecorationId = newCurrentDecorationId;\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n                }\n                if (this._rangeHighlightDecorationId !== null) {\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n                    this._rangeHighlightDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n                        const lineBeforeEnd = rng.endLineNumber - 1;\n                        const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n                    }\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n                }\n            });\n        }\n        return matchPosition;\n    }\n    set(findMatches, findScopes) {\n        this._editor.changeDecorations((accessor) => {\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n            const newOverviewRulerApproximateDecorations = [];\n            if (findMatches.length > 1000) {\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n                // approximate a distance in lines where matches should be merged\n                const lineCount = this._editor.getModel().getLineCount();\n                const height = this._editor.getLayoutInfo().height;\n                const approxPixelsPerLine = height / lineCount;\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n                // merge decorations as much as possible\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\n                for (let i = 1, len = findMatches.length; i < len; i++) {\n                    const range = findMatches[i].range;\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n                        if (range.endLineNumber > prevEndLineNumber) {\n                            prevEndLineNumber = range.endLineNumber;\n                        }\n                    }\n                    else {\n                        newOverviewRulerApproximateDecorations.push({\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                        });\n                        prevStartLineNumber = range.startLineNumber;\n                        prevEndLineNumber = range.endLineNumber;\n                    }\n                }\n                newOverviewRulerApproximateDecorations.push({\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                });\n            }\n            // Find matches\n            const newFindMatchesDecorations = new Array(findMatches.length);\n            for (let i = 0, len = findMatches.length; i < len; i++) {\n                newFindMatchesDecorations[i] = {\n                    range: findMatches[i].range,\n                    options: findMatchesOptions\n                };\n            }\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n            // Overview ruler approximate decorations\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n            // Range highlight\n            if (this._rangeHighlightDecorationId) {\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\n                this._rangeHighlightDecorationId = null;\n            }\n            // Find scope\n            if (this._findScopeDecorationIds.length) {\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n                this._findScopeDecorationIds = [];\n            }\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n            }\n        });\n    }\n    matchBeforePosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.endLineNumber > position.lineNumber) {\n                continue;\n            }\n            if (r.endLineNumber < position.lineNumber) {\n                return r;\n            }\n            if (r.endColumn > position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n    }\n    matchAfterPosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.startLineNumber < position.lineNumber) {\n                continue;\n            }\n            if (r.startLineNumber > position.lineNumber) {\n                return r;\n            }\n            if (r.startColumn < position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\n    }\n    _allDecorations() {\n        let result = [];\n        result = result.concat(this._decorations);\n        result = result.concat(this._overviewRulerApproximateDecorations);\n        if (this._findScopeDecorationIds.length) {\n            result.push(...this._findScopeDecorationIds);\n        }\n        if (this._rangeHighlightDecorationId) {\n            result.push(this._rangeHighlightDecorationId);\n        }\n        return result;\n    }\n}\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'current-find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 10,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'findMatch',\n    showIfCollapsed: true\n});\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-only-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    description: 'find-range-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'rangeHighlight',\n    isWholeLine: true\n});\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    description: 'find-scope',\n    className: 'findScope',\n    isWholeLine: true\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n    constructor(editorSelection, ranges, replaceStrings) {\n        this._editorSelection = editorSelection;\n        this._ranges = ranges;\n        this._replaceStrings = replaceStrings;\n        this._trackedEditorSelectionId = null;\n    }\n    getEditOperations(model, builder) {\n        if (this._ranges.length > 0) {\n            // Collect all edit operations\n            const ops = [];\n            for (let i = 0; i < this._ranges.length; i++) {\n                ops.push({\n                    range: this._ranges[i],\n                    text: this._replaceStrings[i]\n                });\n            }\n            // Sort them in ascending order by range starts\n            ops.sort((o1, o2) => {\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\n            });\n            // Merge operations that touch each other\n            const resultOps = [];\n            let previousOp = ops[0];\n            for (let i = 1; i < ops.length; i++) {\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n                    // These operations are one after another and can be merged\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\n                    previousOp.text = previousOp.text + ops[i].text;\n                }\n                else {\n                    resultOps.push(previousOp);\n                    previousOp = ops[i];\n                }\n            }\n            resultOps.push(previousOp);\n            for (const op of resultOps) {\n                builder.addEditOperation(op.range, op.text);\n            }\n        }\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\n    if (matches && (matches[0] !== '')) {\n        const containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\n        const containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\n        if (containsHyphens && !containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\n        }\n        else if (!containsHyphens && containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\n        }\n        if (matches[0].toUpperCase() === matches[0]) {\n            return pattern.toUpperCase();\n        }\n        else if (matches[0].toLowerCase() === matches[0]) {\n            return pattern.toLowerCase();\n        }\n        else if (strings.containsUppercaseCharacter(matches[0][0]) && pattern.length > 0) {\n            return pattern[0].toUpperCase() + pattern.substr(1);\n        }\n        else if (matches[0][0].toUpperCase() !== matches[0][0] && pattern.length > 0) {\n            return pattern[0].toLowerCase() + pattern.substr(1);\n        }\n        else {\n            // we don't understand its pattern yet.\n            return pattern;\n        }\n    }\n    else {\n        return pattern;\n    }\n}\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\n    return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\n}\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\n    const splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\n    let replaceString = '';\n    splitPatternAtSpecialCharacter.forEach((splitValue, index) => {\n        replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\n    });\n    return replaceString.slice(0, -1);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n    constructor(staticValue) {\n        this.staticValue = staticValue;\n        this.kind = 0 /* ReplacePatternKind.StaticValue */;\n    }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n    constructor(pieces) {\n        this.pieces = pieces;\n        this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\n    }\n}\nexport class ReplacePattern {\n    constructor(pieces) {\n        if (!pieces || pieces.length === 0) {\n            this._state = new StaticValueReplacePattern('');\n        }\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n        }\n        else {\n            this._state = new DynamicPiecesReplacePattern(pieces);\n        }\n    }\n    static fromStaticValue(value) {\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\n    }\n    get hasReplacementPatterns() {\n        return (this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */);\n    }\n    buildReplaceString(matches, preserveCase) {\n        if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\n            if (preserveCase) {\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n            }\n            else {\n                return this._state.staticValue;\n            }\n        }\n        let result = '';\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n            const piece = this._state.pieces[i];\n            if (piece.staticValue !== null) {\n                // static value ReplacePiece\n                result += piece.staticValue;\n                continue;\n            }\n            // match index ReplacePiece\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\n                const repl = [];\n                const lenOps = piece.caseOps.length;\n                let opIdx = 0;\n                for (let idx = 0, len = match.length; idx < len; idx++) {\n                    if (opIdx >= lenOps) {\n                        repl.push(match.slice(idx));\n                        break;\n                    }\n                    switch (piece.caseOps[opIdx]) {\n                        case 'U':\n                            repl.push(match[idx].toUpperCase());\n                            break;\n                        case 'u':\n                            repl.push(match[idx].toUpperCase());\n                            opIdx++;\n                            break;\n                        case 'L':\n                            repl.push(match[idx].toLowerCase());\n                            break;\n                        case 'l':\n                            repl.push(match[idx].toLowerCase());\n                            opIdx++;\n                            break;\n                        default:\n                            repl.push(match[idx]);\n                    }\n                }\n                match = repl.join('');\n            }\n            result += match;\n        }\n        return result;\n    }\n    static _substitute(matchIndex, matches) {\n        if (matches === null) {\n            return '';\n        }\n        if (matchIndex === 0) {\n            return matches[0];\n        }\n        let remainder = '';\n        while (matchIndex > 0) {\n            if (matchIndex < matches.length) {\n                // A match can be undefined\n                const match = (matches[matchIndex] || '');\n                return match + remainder;\n            }\n            remainder = String(matchIndex % 10) + remainder;\n            matchIndex = Math.floor(matchIndex / 10);\n        }\n        return '$' + remainder;\n    }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n    constructor(staticValue, matchIndex, caseOps) {\n        this.staticValue = staticValue;\n        this.matchIndex = matchIndex;\n        if (!caseOps || caseOps.length === 0) {\n            this.caseOps = null;\n        }\n        else {\n            this.caseOps = caseOps.slice(0);\n        }\n    }\n    static staticValue(value) {\n        return new ReplacePiece(value, -1, null);\n    }\n    static caseOps(index, caseOps) {\n        return new ReplacePiece(null, index, caseOps);\n    }\n}\nclass ReplacePieceBuilder {\n    constructor(source) {\n        this._source = source;\n        this._lastCharIndex = 0;\n        this._result = [];\n        this._resultLen = 0;\n        this._currentStaticPiece = '';\n    }\n    emitUnchanged(toCharIndex) {\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n        this._lastCharIndex = toCharIndex;\n    }\n    emitStatic(value, toCharIndex) {\n        this._emitStatic(value);\n        this._lastCharIndex = toCharIndex;\n    }\n    _emitStatic(value) {\n        if (value.length === 0) {\n            return;\n        }\n        this._currentStaticPiece += value;\n    }\n    emitMatchIndex(index, toCharIndex, caseOps) {\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n        this._lastCharIndex = toCharIndex;\n    }\n    finalize() {\n        this.emitUnchanged(this._source.length);\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        return new ReplacePattern(this._result);\n    }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n    if (!replaceString || replaceString.length === 0) {\n        return new ReplacePattern(null);\n    }\n    const caseOps = [];\n    const result = new ReplacePieceBuilder(replaceString);\n    for (let i = 0, len = replaceString.length; i < len; i++) {\n        const chCode = replaceString.charCodeAt(i);\n        if (chCode === 92 /* CharCode.Backslash */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a \\\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            // let replaceWithCharacter: string | null = null;\n            switch (nextChCode) {\n                case 92 /* CharCode.Backslash */:\n                    // \\\\ => inserts a \"\\\"\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\\\', i + 1);\n                    break;\n                case 110 /* CharCode.n */:\n                    // \\n => inserts a LF\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\n', i + 1);\n                    break;\n                case 116 /* CharCode.t */:\n                    // \\t => inserts a TAB\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\t', i + 1);\n                    break;\n                // Case modification of string replacements, patterned after Boost, but only applied\n                // to the replacement text, not subsequent content.\n                case 117 /* CharCode.u */:\n                // \\u => upper-cases one character.\n                case 85 /* CharCode.U */:\n                // \\U => upper-cases ALL following characters.\n                case 108 /* CharCode.l */:\n                // \\l => lower-cases one character.\n                case 76 /* CharCode.L */:\n                    // \\L => lower-cases ALL following characters.\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('', i + 1);\n                    caseOps.push(String.fromCharCode(nextChCode));\n                    break;\n            }\n            continue;\n        }\n        if (chCode === 36 /* CharCode.DollarSign */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a $\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            if (nextChCode === 36 /* CharCode.DollarSign */) {\n                // $$ => inserts a \"$\"\n                result.emitUnchanged(i - 1);\n                result.emitStatic('$', i + 1);\n                continue;\n            }\n            if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\n                // $& and $0 => inserts the matched substring.\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(0, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n            if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\n                // $n\n                let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\n                // peek next char to probe for $nn\n                if (i + 1 < len) {\n                    const nextNextChCode = replaceString.charCodeAt(i + 1);\n                    if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\n                        // $nn\n                        // move to next char\n                        i++;\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\n                        result.emitUnchanged(i - 2);\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                        caseOps.length = 0;\n                        continue;\n                    }\n                }\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n        }\n    }\n    return result.finalize();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */ }\n};\nexport const ToggleWholeWordKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */ }\n};\nexport const ToggleRegexKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */ }\n};\nexport const ToggleSearchScopeKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */ }\n};\nexport const TogglePreserveCaseKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */ }\n};\nexport const FIND_IDS = {\n    StartFindAction: 'actions.find',\n    StartFindWithSelection: 'actions.findWithSelection',\n    StartFindWithArgs: 'editor.actions.findWithArgs',\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n    CloseFindWidgetCommand: 'closeFindWidget',\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\n    ToggleRegexCommand: 'toggleFindRegex',\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\n    TogglePreserveCaseCommand: 'togglePreserveCase',\n    ReplaceOneAction: 'editor.action.replaceOne',\n    ReplaceAllAction: 'editor.action.replaceAll',\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n    constructor(editor, state) {\n        this._toDispose = new DisposableStore();\n        this._editor = editor;\n        this._state = state;\n        this._isDisposed = false;\n        this._startSearchingTimer = new TimeoutTimer();\n        this._decorations = new FindDecorations(editor);\n        this._toDispose.add(this._decorations);\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n        this._toDispose.add(this._updateDecorationsScheduler);\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */\n                || e.reason === 5 /* CursorChangeReason.Undo */\n                || e.reason === 6 /* CursorChangeReason.Redo */) {\n                this._decorations.setStartPosition(this._editor.getPosition());\n            }\n        }));\n        this._ignoreModelContentChanged = false;\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (this._ignoreModelContentChanged) {\n                return;\n            }\n            if (e.isFlush) {\n                // a model.setValue() was called\n                this._decorations.reset();\n            }\n            this._decorations.setStartPosition(this._editor.getPosition());\n            this._updateDecorationsScheduler.schedule();\n        }));\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this.research(false, this._state.searchScope);\n    }\n    dispose() {\n        this._isDisposed = true;\n        dispose(this._startSearchingTimer);\n        this._toDispose.dispose();\n    }\n    _onStateChanged(e) {\n        if (this._isDisposed) {\n            // The find model is disposed during a find state changed event\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            // The find model will be disposed momentarily\n            return;\n        }\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n            const model = this._editor.getModel();\n            if (model.isTooLargeForSyncing()) {\n                this._startSearchingTimer.cancel();\n                this._startSearchingTimer.setIfNotSet(() => {\n                    if (e.searchScope) {\n                        this.research(e.moveCursor, this._state.searchScope);\n                    }\n                    else {\n                        this.research(e.moveCursor);\n                    }\n                }, RESEARCH_DELAY);\n            }\n            else {\n                if (e.searchScope) {\n                    this.research(e.moveCursor, this._state.searchScope);\n                }\n                else {\n                    this.research(e.moveCursor);\n                }\n            }\n        }\n    }\n    static _getSearchRange(model, findScope) {\n        // If we have set now or before a find scope, use it for computing the search range\n        if (findScope) {\n            return findScope;\n        }\n        return model.getFullModelRange();\n    }\n    research(moveCursor, newFindScope) {\n        let findScopes = null;\n        if (typeof newFindScope !== 'undefined') {\n            if (newFindScope !== null) {\n                if (!Array.isArray(newFindScope)) {\n                    findScopes = [newFindScope];\n                }\n                else {\n                    findScopes = newFindScope;\n                }\n            }\n        }\n        else {\n            findScopes = this._decorations.getFindScopes();\n        }\n        if (findScopes !== null) {\n            findScopes = findScopes.map(findScope => {\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\n                    let endLineNumber = findScope.endLineNumber;\n                    if (findScope.endColumn === 1) {\n                        endLineNumber = endLineNumber - 1;\n                    }\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n                }\n                return findScope;\n            });\n        }\n        const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n        this._decorations.set(findMatches, findScopes);\n        const editorSelection = this._editor.getSelection();\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\n            // current selection is not on top of a match\n            // try to find its nearest result from the top of the document\n            const matchAfterSelection = findFirstInSorted(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n        }\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n        if (moveCursor && this._editor.getOption(37 /* EditorOption.find */).cursorMoveOnType) {\n            this._moveToNextMatch(this._decorations.getStartPosition());\n        }\n    }\n    _hasMatches() {\n        return (this._state.matchesCount > 0);\n    }\n    _cannotFind() {\n        if (!this._hasMatches()) {\n            const findScope = this._decorations.getFindScope();\n            if (findScope) {\n                // Reveal the selection so user is reminded that 'selection find' is on.\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\n            }\n            return true;\n        }\n        return false;\n    }\n    _setCurrentFindMatch(match) {\n        const matchesPosition = this._decorations.setCurrentFindMatch(match);\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n        this._editor.setSelection(match);\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\n    }\n    _prevSearchPosition(before) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === 1) {\n            if (lineNumber === 1) {\n                lineNumber = model.getLineCount();\n            }\n            else {\n                lineNumber--;\n            }\n            column = model.getLineMaxColumn(lineNumber);\n        }\n        else {\n            column--;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToPrevMatch(before, isRecursed = false) {\n        if (!this._state.canNavigateBack()) {\n            // we are beyond the first matched find result\n            // instead of doing nothing, we should refocus the first item\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n                before = this._prevSearchPosition(before);\n                prevMatchRange = this._decorations.matchBeforePosition(before);\n            }\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._cannotFind()) {\n            return;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(before)) {\n            before = searchRange.getEndPosition();\n        }\n        // ...|...(----)...\n        if (before.isBefore(searchRange.getStartPosition())) {\n            before = searchRange.getEndPosition();\n        }\n        const { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._prevSearchPosition(position);\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        }\n        if (!prevMatch) {\n            // there is precisely one match and selection is on top of it\n            return;\n        }\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n        }\n        this._setCurrentFindMatch(prevMatch.range);\n    }\n    moveToPrevMatch() {\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n    }\n    _nextSearchPosition(after) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n            if (lineNumber === model.getLineCount()) {\n                lineNumber = 1;\n            }\n            else {\n                lineNumber++;\n            }\n            column = 1;\n        }\n        else {\n            column++;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToNextMatch(after) {\n        if (!this._state.canNavigateForward()) {\n            // we are beyond the last matched find result\n            // instead of doing nothing, we should refocus the last item\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n                // Looks like we're stuck at this position, unacceptable!\n                after = this._nextSearchPosition(after);\n                nextMatchRange = this._decorations.matchAfterPosition(after);\n            }\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        const nextMatch = this._getNextMatch(after, false, true);\n        if (nextMatch) {\n            this._setCurrentFindMatch(nextMatch.range);\n        }\n    }\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n        if (this._cannotFind()) {\n            return null;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(after)) {\n            after = searchRange.getStartPosition();\n        }\n        // ...|...(----)...\n        if (after.isBefore(searchRange.getStartPosition())) {\n            after = searchRange.getStartPosition();\n        }\n        const { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches);\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._nextSearchPosition(position);\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches);\n        }\n        if (!nextMatch) {\n            // there is precisely one match and selection is on top of it\n            return null;\n        }\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n        }\n        return nextMatch;\n    }\n    moveToNextMatch() {\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n    }\n    _getReplacePattern() {\n        if (this._state.isRegex) {\n            return parseReplaceString(this._state.replaceString);\n        }\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\n    }\n    replace() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const replacePattern = this._getReplacePattern();\n        const selection = this._editor.getSelection();\n        const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n        if (nextMatch) {\n            if (selection.equalsRange(nextMatch.range)) {\n                // selection sits on a find match => replace it!\n                const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n                const command = new ReplaceCommand(selection, replaceString);\n                this._executeEditorCommand('replace', command);\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n                this.research(true);\n            }\n            else {\n                this._decorations.setStartPosition(this._editor.getPosition());\n                this._setCurrentFindMatch(nextMatch.range);\n            }\n        }\n    }\n    _findMatches(findScopes, captureMatches, limitResultCount) {\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\n    }\n    replaceAll() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n            this._largeReplaceAll();\n        }\n        else {\n            this._regularReplaceAll(findScopes);\n        }\n        this.research(false);\n    }\n    _largeReplaceAll() {\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null);\n        const searchData = searchParams.parseSearchRequest();\n        if (!searchData) {\n            return;\n        }\n        let searchRegex = searchData.regex;\n        if (!searchRegex.multiline) {\n            let mod = 'mu';\n            if (searchRegex.ignoreCase) {\n                mod += 'i';\n            }\n            if (searchRegex.global) {\n                mod += 'g';\n            }\n            searchRegex = new RegExp(searchRegex.source, mod);\n        }\n        const model = this._editor.getModel();\n        const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\n        const fullModelRange = model.getFullModelRange();\n        const replacePattern = this._getReplacePattern();\n        let resultText;\n        const preserveCase = this._state.preserveCase;\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\n            resultText = modelText.replace(searchRegex, function () {\n                return replacePattern.buildReplaceString(arguments, preserveCase);\n            });\n        }\n        else {\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n        }\n        const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n        this._executeEditorCommand('replaceAll', command);\n    }\n    _regularReplaceAll(findScopes) {\n        const replacePattern = this._getReplacePattern();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const replaceStrings = [];\n        for (let i = 0, len = matches.length; i < len; i++) {\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n        }\n        const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n        this._executeEditorCommand('replaceAll', command);\n    }\n    selectAllMatches() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n        // If one of the ranges is the editor selection, then maintain it as primary\n        const editorSelection = this._editor.getSelection();\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const sel = selections[i];\n            if (sel.equalsRange(editorSelection)) {\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n                break;\n            }\n        }\n        this._editor.setSelections(selections);\n    }\n    _executeEditorCommand(source, command) {\n        try {\n            this._ignoreModelContentChanged = true;\n            this._editor.pushUndoStop();\n            this._editor.executeCommand(source, command);\n            this._editor.pushUndoStop();\n        }\n        finally {\n            this._ignoreModelContentChanged = false;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { contrastBorder, editorWidgetBackground, editorWidgetForeground, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport class FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService, themeService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const inputActiveOptionBorderColor = themeService.getColorTheme().getColor(inputActiveOptionBorder);\n        const inputActiveOptionForegroundColor = themeService.getColorTheme().getColor(inputActiveOptionForeground);\n        const inputActiveOptionBackgroundColor = themeService.getColorTheme().getColor(inputActiveOptionBackground);\n        this.caseSensitive = this._register(new CaseSensitiveToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            isChecked: this._state.matchCase,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            isChecked: this._state.wholeWord,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            isChecked: this._state.isRegex,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    }\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n    _applyTheme(theme) {\n        const inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground)\n        };\n        this.caseSensitive.style(inputStyles);\n        this.wholeWords.style(inputStyles);\n        this.regex.style(inputStyles);\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n    if (override === 1 /* FindOptionOverride.True */) {\n        return true;\n    }\n    if (override === 2 /* FindOptionOverride.False */) {\n        return false;\n    }\n    return value;\n}\nexport class FindReplaceState extends Disposable {\n    constructor() {\n        super();\n        this._onFindReplaceStateChange = this._register(new Emitter());\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n        this._searchString = '';\n        this._replaceString = '';\n        this._isRevealed = false;\n        this._isReplaceRevealed = false;\n        this._isRegex = false;\n        this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\n        this._wholeWord = false;\n        this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\n        this._matchCase = false;\n        this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._preserveCase = false;\n        this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._searchScope = null;\n        this._matchesPosition = 0;\n        this._matchesCount = 0;\n        this._currentMatch = null;\n        this._loop = true;\n        this._isSearching = false;\n        this._filters = null;\n    }\n    get searchString() { return this._searchString; }\n    get replaceString() { return this._replaceString; }\n    get isRevealed() { return this._isRevealed; }\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n    get actualIsRegex() { return this._isRegex; }\n    get actualWholeWord() { return this._wholeWord; }\n    get actualMatchCase() { return this._matchCase; }\n    get actualPreserveCase() { return this._preserveCase; }\n    get searchScope() { return this._searchScope; }\n    get matchesPosition() { return this._matchesPosition; }\n    get matchesCount() { return this._matchesCount; }\n    get currentMatch() { return this._currentMatch; }\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n        const changeEvent = {\n            moveCursor: false,\n            updateHistory: false,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        if (matchesCount === 0) {\n            matchesPosition = 0;\n        }\n        if (matchesPosition > matchesCount) {\n            matchesPosition = matchesCount;\n        }\n        if (this._matchesPosition !== matchesPosition) {\n            this._matchesPosition = matchesPosition;\n            changeEvent.matchesPosition = true;\n            somethingChanged = true;\n        }\n        if (this._matchesCount !== matchesCount) {\n            this._matchesCount = matchesCount;\n            changeEvent.matchesCount = true;\n            somethingChanged = true;\n        }\n        if (typeof currentMatch !== 'undefined') {\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n                this._currentMatch = currentMatch;\n                changeEvent.currentMatch = true;\n                somethingChanged = true;\n            }\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    change(newState, moveCursor, updateHistory = true) {\n        var _a;\n        const changeEvent = {\n            moveCursor: moveCursor,\n            updateHistory: updateHistory,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        const oldEffectiveIsRegex = this.isRegex;\n        const oldEffectiveWholeWords = this.wholeWord;\n        const oldEffectiveMatchCase = this.matchCase;\n        const oldEffectivePreserveCase = this.preserveCase;\n        if (typeof newState.searchString !== 'undefined') {\n            if (this._searchString !== newState.searchString) {\n                this._searchString = newState.searchString;\n                changeEvent.searchString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.replaceString !== 'undefined') {\n            if (this._replaceString !== newState.replaceString) {\n                this._replaceString = newState.replaceString;\n                changeEvent.replaceString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRevealed !== 'undefined') {\n            if (this._isRevealed !== newState.isRevealed) {\n                this._isRevealed = newState.isRevealed;\n                changeEvent.isRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n                this._isReplaceRevealed = newState.isReplaceRevealed;\n                changeEvent.isReplaceRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRegex !== 'undefined') {\n            this._isRegex = newState.isRegex;\n        }\n        if (typeof newState.wholeWord !== 'undefined') {\n            this._wholeWord = newState.wholeWord;\n        }\n        if (typeof newState.matchCase !== 'undefined') {\n            this._matchCase = newState.matchCase;\n        }\n        if (typeof newState.preserveCase !== 'undefined') {\n            this._preserveCase = newState.preserveCase;\n        }\n        if (typeof newState.searchScope !== 'undefined') {\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\n                var _a;\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\n                });\n            }))) {\n                this._searchScope = newState.searchScope;\n                changeEvent.searchScope = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.loop !== 'undefined') {\n            if (this._loop !== newState.loop) {\n                this._loop = newState.loop;\n                changeEvent.loop = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isSearching !== 'undefined') {\n            if (this._isSearching !== newState.isSearching) {\n                this._isSearching = newState.isSearching;\n                changeEvent.isSearching = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.filters !== 'undefined') {\n            if (this._filters) {\n                this._filters.update(newState.filters);\n            }\n            else {\n                this._filters = newState.filters;\n            }\n            changeEvent.filters = true;\n            somethingChanged = true;\n        }\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */);\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */);\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        if (oldEffectiveIsRegex !== this.isRegex) {\n            somethingChanged = true;\n            changeEvent.isRegex = true;\n        }\n        if (oldEffectiveWholeWords !== this.wholeWord) {\n            somethingChanged = true;\n            changeEvent.wholeWord = true;\n        }\n        if (oldEffectiveMatchCase !== this.matchCase) {\n            somethingChanged = true;\n            changeEvent.matchCase = true;\n        }\n        if (oldEffectivePreserveCase !== this.preserveCase) {\n            somethingChanged = true;\n            changeEvent.preserveCase = true;\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    canNavigateBack() {\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\n    }\n    canNavigateForward() {\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n    }\n    canNavigateInLoop() {\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function showHistoryKeybindingHint(keybindingService) {\n    var _a, _b;\n    return ((_a = keybindingService.lookupKeybinding('history.showPrevious')) === null || _a === void 0 ? void 0 : _a.getElectronAccelerator()) === 'Up' && ((_b = keybindingService.lookupKeybinding('history.showNext')) === null || _b === void 0 ? void 0 : _b.getElectronAccelerator()) === 'Down';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, toolbarHoverBackground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nexport class FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(83 /* EditorOption.readOnly */)) {\n                if (this._codeEditor.getOption(83 /* EditorOption.readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(133 /* EditorOption.layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(37 /* EditorOption.find */)) {\n                const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\n            if (this._isVisible) {\n                const globalBufferTerm = yield this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        })));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(83 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        const selection = this._codeEditor.getSelection();\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        const isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\n        const matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        const canReplace = !this._codeEditor.getOption(83 /* EditorOption.readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(37 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(77 /* EditorOption.padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _applyTheme(theme) {\n        const inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputBackground: theme.getColor(inputBackground),\n            inputForeground: theme.getColor(inputForeground),\n            inputBorder: theme.getColor(inputBorder),\n            inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n            inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n            inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n            inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n            inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n            inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n            inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n            inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n            inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\n        };\n        this._findInput.style(inputStyles);\n        this._replaceInput.style(inputStyles);\n        this._toggleSelectionFind.style(inputStyles);\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!dom.isInDOM(this._domNode)) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            const widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        if (this._resized) {\n            this._findInput.inputBox.layout();\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            const selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        const findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Toggle({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    const selections = this._codeEditor.getSelections();\n                    selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter(element => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* KeyCode.Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        actionsContainer.appendChild(this._closeBtn.domNode);\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        const replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 });\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            const width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.title = this._opts.label;\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            var _a, _b;\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    addBackgroundColorRule('.find-widget', widgetBackground);\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\n    if (findMatchBorder) {\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n    const foreground = theme.getColor(editorWidgetForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n    }\n    const error = theme.getColor(errorForeground);\n    if (error) {\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n    }\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n    if (resizeBorderBackground) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n    }\n    else {\n        const border = theme.getColor(editorWidgetBorder);\n        if (border) {\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n        }\n    }\n    // Action bars\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\n    if (toolbarHoverBackgroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);\n    }\n    // This rule is used to override the outline color for synthetic-focus find input.\n    const focusOutline = theme.getColor(focusBorder);\n    if (focusOutline) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n    if (!editor.hasModel()) {\n        return null;\n    }\n    const selection = editor.getSelection();\n    // if selection spans multiple lines, default search string to empty\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n        || seedSearchStringFromSelection === 'multiple') {\n        if (selection.isEmpty()) {\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n                return wordAtPosition.word;\n            }\n        }\n        else {\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n                return editor.getModel().getValueInRange(selection);\n            }\n        }\n    }\n    return null;\n}\nlet CommonFindController = class CommonFindController extends Disposable {\n    constructor(editor, contextKeyService, storageService, clipboardService) {\n        super();\n        this._editor = editor;\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._clipboardService = clipboardService;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._state = this._register(new FindReplaceState());\n        this.loadQueryState();\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._model = null;\n        this._register(this._editor.onDidChangeModel(() => {\n            const shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n            this.disposeModel();\n            this._state.change({\n                searchScope: null,\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\n            }, false);\n            if (shouldRestartFind) {\n                this._start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: false,\n                    updateSearchScope: false,\n                    loop: this._editor.getOption(37 /* EditorOption.find */).loop\n                });\n            }\n        }));\n    }\n    get editor() {\n        return this._editor;\n    }\n    static get(editor) {\n        return editor.getContribution(CommonFindController.ID);\n    }\n    dispose() {\n        this.disposeModel();\n        super.dispose();\n    }\n    disposeModel() {\n        if (this._model) {\n            this._model.dispose();\n            this._model = null;\n        }\n    }\n    _onStateChanged(e) {\n        this.saveQueryState(e);\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._findWidgetVisible.set(true);\n            }\n            else {\n                this._findWidgetVisible.reset();\n                this.disposeModel();\n            }\n        }\n        if (e.searchString) {\n            this.setGlobalBufferTerm(this._state.searchString);\n        }\n    }\n    saveQueryState(e) {\n        if (e.isRegex) {\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.wholeWord) {\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.matchCase) {\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.preserveCase) {\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n    }\n    loadQueryState() {\n        this._state.change({\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\n        }, false);\n    }\n    isFindInputFocused() {\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n        return this._state;\n    }\n    closeFindWidget() {\n        this._state.change({\n            isRevealed: false,\n            searchScope: null\n        }, false);\n        this._editor.focus();\n    }\n    toggleCaseSensitive() {\n        this._state.change({ matchCase: !this._state.matchCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleWholeWords() {\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleRegex() {\n        this._state.change({ isRegex: !this._state.isRegex }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    togglePreserveCase() {\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleSearchScope() {\n        if (this._state.searchScope) {\n            this._state.change({ searchScope: null }, true);\n        }\n        else {\n            if (this._editor.hasModel()) {\n                const selections = this._editor.getSelections();\n                selections.map(selection => {\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                    }\n                    if (!selection.isEmpty()) {\n                        return selection;\n                    }\n                    return null;\n                }).filter(element => !!element);\n                if (selections.length) {\n                    this._state.change({ searchScope: selections }, true);\n                }\n            }\n        }\n    }\n    setSearchString(searchString) {\n        if (this._state.isRegex) {\n            searchString = strings.escapeRegExpCharacters(searchString);\n        }\n        this._state.change({ searchString: searchString }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        // overwritten in subclass\n    }\n    _start(opts, newState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disposeModel();\n            if (!this._editor.hasModel()) {\n                // cannot do anything with an editor that doesn't have a model...\n                return;\n            }\n            const stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\n            if (opts.seedSearchStringFromSelection === 'single') {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n                if (selectionSearchString) {\n                    if (this._state.isRegex) {\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n                    }\n                    else {\n                        stateChanges.searchString = selectionSearchString;\n                    }\n                }\n            }\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n                const selectionSearchString = yield this.getGlobalBufferTerm();\n                if (!this._editor.hasModel()) {\n                    // the editor has lost its model in the meantime\n                    return;\n                }\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            // Overwrite isReplaceRevealed\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n                stateChanges.isReplaceRevealed = true;\n            }\n            else if (!this._findWidgetVisible.get()) {\n                stateChanges.isReplaceRevealed = false;\n            }\n            if (opts.updateSearchScope) {\n                const currentSelections = this._editor.getSelections();\n                if (currentSelections.some(selection => !selection.isEmpty())) {\n                    stateChanges.searchScope = currentSelections;\n                }\n            }\n            stateChanges.loop = opts.loop;\n            this._state.change(stateChanges, false);\n            if (!this._model) {\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n            }\n        });\n    }\n    start(opts, newState) {\n        return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n        if (this._model) {\n            this._model.moveToNextMatch();\n            return true;\n        }\n        return false;\n    }\n    moveToPrevMatch() {\n        if (this._model) {\n            this._model.moveToPrevMatch();\n            return true;\n        }\n        return false;\n    }\n    replace() {\n        if (this._model) {\n            this._model.replace();\n            return true;\n        }\n        return false;\n    }\n    replaceAll() {\n        if (this._model) {\n            this._model.replaceAll();\n            return true;\n        }\n        return false;\n    }\n    selectAllMatches() {\n        if (this._model) {\n            this._model.selectAllMatches();\n            this._editor.focus();\n            return true;\n        }\n        return false;\n    }\n    getGlobalBufferTerm() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.getOption(37 /* EditorOption.find */).globalFindClipboard\n                && this._editor.hasModel()\n                && !this._editor.getModel().isTooLargeForSyncing()) {\n                return this._clipboardService.readFindText();\n            }\n            return '';\n        });\n    }\n    setGlobalBufferTerm(text) {\n        if (this._editor.getOption(37 /* EditorOption.find */).globalFindClipboard\n            && this._editor.hasModel()\n            && !this._editor.getModel().isTooLargeForSyncing()) {\n            // intentionally not awaited\n            this._clipboardService.writeFindText(text);\n        }\n    }\n};\nCommonFindController.ID = 'editor.contrib.findController';\nCommonFindController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IStorageService),\n    __param(3, IClipboardService)\n], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n        super(editor, _contextKeyService, _storageService, clipboardService);\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._themeService = _themeService;\n        this._notificationService = _notificationService;\n        this._widget = null;\n        this._findOptionsWidget = null;\n    }\n    _start(opts, newState) {\n        const _super = Object.create(null, {\n            _start: { get: () => super._start }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._widget) {\n                this._createFindWidget();\n            }\n            const selection = this._editor.getSelection();\n            let updateSearchScope = false;\n            switch (this._editor.getOption(37 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    updateSearchScope = true;\n                    break;\n                case 'never':\n                    updateSearchScope = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    updateSearchScope = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n            yield _super._start.call(this, opts, newState);\n            if (this._widget) {\n                if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\n                    this._widget.focusReplaceInput();\n                }\n                else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\n                    this._widget.focusFindInput();\n                }\n            }\n        });\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        if (!this._widget) {\n            this._createFindWidget();\n        }\n        if (this._state.isRevealed && !ignoreWhenVisible) {\n            this._widget.highlightFindOptions();\n        }\n        else {\n            this._findOptionsWidget.highlightFindOptions();\n        }\n    }\n    _createFindWidget() {\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\n    }\n};\nFindController = __decorate([\n    __param(1, IContextViewService),\n    __param(2, IContextKeyService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService),\n    __param(5, INotificationService),\n    __param(6, IStorageService),\n    __param(7, IClipboardService)\n], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindAction,\n    label: nls.localize('startFindAction', \"Find\"),\n    alias: 'Find',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n        order: 1\n    }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    return controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(37 /* EditorOption.find */).globalFindClipboard,\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(37 /* EditorOption.find */).loop\n    });\n});\nconst findArgDescription = {\n    description: 'Open a new In-Editor Find Widget.',\n    args: [{\n            name: 'Open a new In-Editor Find Widget args',\n            schema: {\n                properties: {\n                    searchString: { type: 'string' },\n                    replaceString: { type: 'string' },\n                    regex: { type: 'boolean' },\n                    regexOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    wholeWord: { type: 'boolean' },\n                    wholeWordOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    matchCase: { type: 'boolean' },\n                    matchCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    preserveCase: { type: 'boolean' },\n                    preserveCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    findInSelection: { type: 'boolean' },\n                }\n            }\n        }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithArgs,\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n            alias: 'Find With Arguments',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: findArgDescription\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                const newState = args ? {\n                    searchString: args.searchString,\n                    replaceString: args.replaceString,\n                    isReplaceRevealed: args.replaceString !== undefined,\n                    isRegex: args.isRegex,\n                    // isRegexOverride: args.regexOverride,\n                    wholeWord: args.matchWholeWord,\n                    // wholeWordOverride: args.wholeWordOverride,\n                    matchCase: args.isCaseSensitive,\n                    // matchCaseOverride: args.matchCaseOverride,\n                    preserveCase: args.preserveCase,\n                    // preserveCaseOverride: args.preserveCaseOverride,\n                } : {};\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n                    shouldAnimate: true,\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                }, newState);\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithSelection,\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n            alias: 'Find With Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */,\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'multiple',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class MatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller && !this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextMatchFindAction,\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\n            alias: 'Find Next',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */, secondary: [61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }]\n        });\n    }\n    _run(controller) {\n        const result = controller.moveToNextMatch();\n        if (result) {\n            controller.editor.pushUndoStop();\n            return true;\n        }\n        return false;\n    }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousMatchFindAction,\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n            alias: 'Find Previous',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */, secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            ]\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (!controller) {\n                return;\n            }\n            const seedSearchStringFromNonEmptySelection = editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection';\n            let selectionSearchString = null;\n            if (editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never') {\n                selectionSearchString = getSelectionSearchString(editor, 'single', seedSearchStringFromNonEmptySelection);\n            }\n            if (selectionSearchString) {\n                controller.setSearchString(selectionSearchString);\n            }\n            if (!this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: seedSearchStringFromNonEmptySelection,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextSelectionMatchFindAction,\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n            alias: 'Find Next Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToNextMatch();\n    }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n            alias: 'Find Previous Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindReplaceAction,\n    label: nls.localize('startReplace', \"Replace\"),\n    alias: 'Replace',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */ },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n        order: 2\n    }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n    if (!editor.hasModel() || editor.getOption(83 /* EditorOption.readOnly */)) {\n        return false;\n    }\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    const currentSelection = editor.getSelection();\n    const findInputFocused = controller.isFindInputFocused();\n    // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\n        && (editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never')\n        && !findInputFocused;\n    /*\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n    */\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n        2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\n    return controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(37 /* EditorOption.find */).loop\n    });\n});\nregisterEditorContribution(CommonFindController.ID, FindController);\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.CloseFindWidgetCommand,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.closeFindWidget(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\n    precondition: undefined,\n    handler: x => x.toggleCaseSensitive(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleCaseSensitiveKeybinding.primary,\n        mac: ToggleCaseSensitiveKeybinding.mac,\n        win: ToggleCaseSensitiveKeybinding.win,\n        linux: ToggleCaseSensitiveKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleWholeWordCommand,\n    precondition: undefined,\n    handler: x => x.toggleWholeWords(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleWholeWordKeybinding.primary,\n        mac: ToggleWholeWordKeybinding.mac,\n        win: ToggleWholeWordKeybinding.win,\n        linux: ToggleWholeWordKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleRegexCommand,\n    precondition: undefined,\n    handler: x => x.toggleRegex(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleRegexKeybinding.primary,\n        mac: ToggleRegexKeybinding.mac,\n        win: ToggleRegexKeybinding.win,\n        linux: ToggleRegexKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleSearchScopeCommand,\n    precondition: undefined,\n    handler: x => x.toggleSearchScope(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleSearchScopeKeybinding.primary,\n        mac: ToggleSearchScopeKeybinding.mac,\n        win: ToggleSearchScopeKeybinding.win,\n        linux: ToggleSearchScopeKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.TogglePreserveCaseCommand,\n    precondition: undefined,\n    handler: x => x.togglePreserveCase(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: TogglePreserveCaseKeybinding.primary,\n        mac: TogglePreserveCaseKeybinding.mac,\n        win: TogglePreserveCaseKeybinding.win,\n        linux: TogglePreserveCaseKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: undefined,\n        mac: {\n            primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        }\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.SelectAllMatchesAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.selectAllMatches(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\nconst MASK_INDENT = 0xFF000000;\nclass BitField {\n    constructor(size) {\n        const numWords = Math.ceil(size / 32);\n        this._states = new Uint32Array(numWords);\n    }\n    get(index) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        return (this._states[arrayIndex] & (1 << bit)) !== 0;\n    }\n    set(index, newState) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        const value = this._states[arrayIndex];\n        if (newState) {\n            this._states[arrayIndex] = value | (1 << bit);\n        }\n        else {\n            this._states[arrayIndex] = value & ~(1 << bit);\n        }\n    }\n}\nexport class FoldingRegions {\n    constructor(startIndexes, endIndexes, types) {\n        this.sourceAbbr = {\n            [0 /* FoldSource.provider */]: ' ',\n            [1 /* FoldSource.userDefined */]: 'u',\n            [2 /* FoldSource.recovered */]: 'r',\n        };\n        if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n            throw new Error('invalid startIndexes or endIndexes size');\n        }\n        this._startIndexes = startIndexes;\n        this._endIndexes = endIndexes;\n        this._collapseStates = new BitField(startIndexes.length);\n        this._userDefinedStates = new BitField(startIndexes.length);\n        this._recoveredStates = new BitField(startIndexes.length);\n        this._types = types;\n        this._parentsComputed = false;\n    }\n    ensureParentIndices() {\n        if (!this._parentsComputed) {\n            this._parentsComputed = true;\n            const parentIndexes = [];\n            const isInsideLast = (startLineNumber, endLineNumber) => {\n                const index = parentIndexes[parentIndexes.length - 1];\n                return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\n            };\n            for (let i = 0, len = this._startIndexes.length; i < len; i++) {\n                const startLineNumber = this._startIndexes[i];\n                const endLineNumber = this._endIndexes[i];\n                if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n                    throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n                }\n                while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n                    parentIndexes.pop();\n                }\n                const parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\n                parentIndexes.push(i);\n                this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n                this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n            }\n        }\n    }\n    get length() {\n        return this._startIndexes.length;\n    }\n    getStartLineNumber(index) {\n        return this._startIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getEndLineNumber(index) {\n        return this._endIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getType(index) {\n        return this._types ? this._types[index] : undefined;\n    }\n    hasTypes() {\n        return !!this._types;\n    }\n    isCollapsed(index) {\n        return this._collapseStates.get(index);\n    }\n    setCollapsed(index, newState) {\n        this._collapseStates.set(index, newState);\n    }\n    isUserDefined(index) {\n        return this._userDefinedStates.get(index);\n    }\n    setUserDefined(index, newState) {\n        return this._userDefinedStates.set(index, newState);\n    }\n    isRecovered(index) {\n        return this._recoveredStates.get(index);\n    }\n    setRecovered(index, newState) {\n        return this._recoveredStates.set(index, newState);\n    }\n    getSource(index) {\n        if (this.isUserDefined(index)) {\n            return 1 /* FoldSource.userDefined */;\n        }\n        else if (this.isRecovered(index)) {\n            return 2 /* FoldSource.recovered */;\n        }\n        return 0 /* FoldSource.provider */;\n    }\n    setSource(index, source) {\n        if (source === 1 /* FoldSource.userDefined */) {\n            this.setUserDefined(index, true);\n            this.setRecovered(index, false);\n        }\n        else if (source === 2 /* FoldSource.recovered */) {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, true);\n        }\n        else {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, false);\n        }\n    }\n    setCollapsedAllOfType(type, newState) {\n        let hasChanged = false;\n        if (this._types) {\n            for (let i = 0; i < this._types.length; i++) {\n                if (this._types[i] === type) {\n                    this.setCollapsed(i, newState);\n                    hasChanged = true;\n                }\n            }\n        }\n        return hasChanged;\n    }\n    toRegion(index) {\n        return new FoldingRegion(this, index);\n    }\n    getParentIndex(index) {\n        this.ensureParentIndices();\n        const parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n        if (parent === MAX_FOLDING_REGIONS) {\n            return -1;\n        }\n        return parent;\n    }\n    contains(index, line) {\n        return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n    }\n    findIndex(line) {\n        let low = 0, high = this._startIndexes.length;\n        if (high === 0) {\n            return -1; // no children\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (line < this.getStartLineNumber(mid)) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        return low - 1;\n    }\n    findRange(line) {\n        let index = this.findIndex(line);\n        if (index >= 0) {\n            const endLineNumber = this.getEndLineNumber(index);\n            if (endLineNumber >= line) {\n                return index;\n            }\n            index = this.getParentIndex(index);\n            while (index !== -1) {\n                if (this.contains(index, line)) {\n                    return index;\n                }\n                index = this.getParentIndex(index);\n            }\n        }\n        return -1;\n    }\n    toString() {\n        const res = [];\n        for (let i = 0; i < this.length; i++) {\n            res[i] = `[${this.sourceAbbr[this.getSource(i)]}${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\n        }\n        return res.join(', ');\n    }\n    toFoldRange(index) {\n        return {\n            startLineNumber: this._startIndexes[index] & MAX_LINE_NUMBER,\n            endLineNumber: this._endIndexes[index] & MAX_LINE_NUMBER,\n            type: this._types ? this._types[index] : undefined,\n            isCollapsed: this.isCollapsed(index),\n            source: this.getSource(index)\n        };\n    }\n    static fromFoldRanges(ranges) {\n        const rangesLength = ranges.length;\n        const startIndexes = new Uint32Array(rangesLength);\n        const endIndexes = new Uint32Array(rangesLength);\n        let types = [];\n        let gotTypes = false;\n        for (let i = 0; i < rangesLength; i++) {\n            const range = ranges[i];\n            startIndexes[i] = range.startLineNumber;\n            endIndexes[i] = range.endLineNumber;\n            types.push(range.type);\n            if (range.type) {\n                gotTypes = true;\n            }\n        }\n        if (!gotTypes) {\n            types = undefined;\n        }\n        const regions = new FoldingRegions(startIndexes, endIndexes, types);\n        for (let i = 0; i < rangesLength; i++) {\n            if (ranges[i].isCollapsed) {\n                regions.setCollapsed(i, true);\n            }\n            regions.setSource(i, ranges[i].source);\n        }\n        return regions;\n    }\n    /**\n     * Two inputs, each a FoldingRegions or a FoldRange[], are merged.\n     * Each input must be pre-sorted on startLineNumber.\n     * The first list is assumed to always include all regions currently defined by range providers.\n     * The second list only contains the previously collapsed and all manual ranges.\n     * If the line position matches, the range of the new range is taken, and the range is no longer manual\n     * When an entry in one list overlaps an entry in the other, the second list's entry \"wins\" and\n     * overlapping entries in the first list are discarded.\n     * Invalid entries are discarded. An entry is invalid if:\n     * \t\tthe start and end line numbers aren't a valid range of line numbers,\n     * \t\tit is out of sequence or has the same start line as a preceding entry,\n     * \t\tit overlaps a preceding entry and is not fully contained by that entry.\n     */\n    static sanitizeAndMerge(rangesA, rangesB, maxLineNumber) {\n        maxLineNumber = maxLineNumber !== null && maxLineNumber !== void 0 ? maxLineNumber : Number.MAX_VALUE;\n        const getIndexedFunction = (r, limit) => {\n            return Array.isArray(r)\n                ? ((i) => { return (i < limit) ? r[i] : undefined; })\n                : ((i) => { return (i < limit) ? r.toFoldRange(i) : undefined; });\n        };\n        const getA = getIndexedFunction(rangesA, rangesA.length);\n        const getB = getIndexedFunction(rangesB, rangesB.length);\n        let indexA = 0;\n        let indexB = 0;\n        let nextA = getA(0);\n        let nextB = getB(0);\n        const stackedRanges = [];\n        let topStackedRange;\n        let prevLineNumber = 0;\n        const resultRanges = [];\n        while (nextA || nextB) {\n            let useRange = undefined;\n            if (nextB && (!nextA || nextA.startLineNumber >= nextB.startLineNumber)) {\n                if (nextA && nextA.startLineNumber === nextB.startLineNumber) {\n                    if (nextB.source === 1 /* FoldSource.userDefined */) {\n                        // a user defined range (possibly unfolded)\n                        useRange = nextB;\n                    }\n                    else {\n                        // a previously folded range or a (possibly unfolded) recovered range\n                        useRange = nextA;\n                        useRange.isCollapsed = nextB.isCollapsed && nextA.endLineNumber === nextB.endLineNumber;\n                        useRange.source = 0 /* FoldSource.provider */;\n                    }\n                    nextA = getA(++indexA); // not necessary, just for speed\n                }\n                else {\n                    useRange = nextB;\n                    if (nextB.isCollapsed && nextB.source === 0 /* FoldSource.provider */) {\n                        // a previously collapsed range\n                        useRange.source = 2 /* FoldSource.recovered */;\n                    }\n                }\n                nextB = getB(++indexB);\n            }\n            else {\n                // nextA is next. The user folded B set takes precedence and we sometimes need to look\n                // ahead in it to check for an upcoming conflict.\n                let scanIndex = indexB;\n                let prescanB = nextB;\n                while (true) {\n                    if (!prescanB || prescanB.startLineNumber > nextA.endLineNumber) {\n                        useRange = nextA;\n                        break; // no conflict, use this nextA\n                    }\n                    if (prescanB.source === 1 /* FoldSource.userDefined */ && prescanB.endLineNumber > nextA.endLineNumber) {\n                        // we found a user folded range, it wins\n                        break; // without setting nextResult, so this nextA gets skipped\n                    }\n                    prescanB = getB(++scanIndex);\n                }\n                nextA = getA(++indexA);\n            }\n            if (useRange) {\n                while (topStackedRange\n                    && topStackedRange.endLineNumber < useRange.startLineNumber) {\n                    topStackedRange = stackedRanges.pop();\n                }\n                if (useRange.endLineNumber > useRange.startLineNumber\n                    && useRange.startLineNumber > prevLineNumber\n                    && useRange.endLineNumber <= maxLineNumber\n                    && (!topStackedRange\n                        || topStackedRange.endLineNumber >= useRange.endLineNumber)) {\n                    resultRanges.push(useRange);\n                    prevLineNumber = useRange.startLineNumber;\n                    if (topStackedRange) {\n                        stackedRanges.push(topStackedRange);\n                    }\n                    topStackedRange = useRange;\n                }\n            }\n        }\n        return resultRanges;\n    }\n}\nexport class FoldingRegion {\n    constructor(ranges, index) {\n        this.ranges = ranges;\n        this.index = index;\n    }\n    get startLineNumber() {\n        return this.ranges.getStartLineNumber(this.index);\n    }\n    get endLineNumber() {\n        return this.ranges.getEndLineNumber(this.index);\n    }\n    get regionIndex() {\n        return this.index;\n    }\n    get parentIndex() {\n        return this.ranges.getParentIndex(this.index);\n    }\n    get isCollapsed() {\n        return this.ranges.isCollapsed(this.index);\n    }\n    containedBy(range) {\n        return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n    }\n    containsLine(lineNumber) {\n        return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { hash } from '../../../../base/common/hash.js';\nexport class FoldingModel {\n    constructor(textModel, decorationProvider) {\n        this._updateEventEmitter = new Emitter();\n        this.onDidChange = this._updateEventEmitter.event;\n        this._textModel = textModel;\n        this._decorationProvider = decorationProvider;\n        this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n        this._editorDecorationIds = [];\n    }\n    get regions() { return this._regions; }\n    get textModel() { return this._textModel; }\n    toggleCollapseState(toggledRegions) {\n        if (!toggledRegions.length) {\n            return;\n        }\n        toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\n        const processed = {};\n        this._decorationProvider.changeDecorations(accessor => {\n            let k = 0; // index from [0 ... this.regions.length]\n            let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\n            let lastHiddenLine = -1; // the end of the last hidden lines\n            const updateDecorationsUntil = (index) => {\n                while (k < index) {\n                    const endLineNumber = this._regions.getEndLineNumber(k);\n                    const isCollapsed = this._regions.isCollapsed(k);\n                    if (endLineNumber <= dirtyRegionEndLine) {\n                        const isManual = this.regions.getSource(k) !== 0 /* FoldSource.provider */;\n                        accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual));\n                    }\n                    if (isCollapsed && endLineNumber > lastHiddenLine) {\n                        lastHiddenLine = endLineNumber;\n                    }\n                    k++;\n                }\n            };\n            for (const region of toggledRegions) {\n                const index = region.regionIndex;\n                const editorDecorationId = this._editorDecorationIds[index];\n                if (editorDecorationId && !processed[editorDecorationId]) {\n                    processed[editorDecorationId] = true;\n                    updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\n                    const newCollapseState = !this._regions.isCollapsed(index);\n                    this._regions.setCollapsed(index, newCollapseState);\n                    dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\n                }\n            }\n            updateDecorationsUntil(this._regions.length);\n        });\n        this._updateEventEmitter.fire({ model: this, collapseStateChanged: toggledRegions });\n    }\n    removeManualRanges(ranges) {\n        const newFoldingRanges = new Array();\n        const intersects = (foldRange) => {\n            for (const range of ranges) {\n                if (!(range.startLineNumber > foldRange.endLineNumber || foldRange.startLineNumber > range.endLineNumber)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        for (let i = 0; i < this._regions.length; i++) {\n            const foldRange = this._regions.toFoldRange(i);\n            if (foldRange.source === 0 /* FoldSource.provider */ || !intersects(foldRange)) {\n                newFoldingRanges.push(foldRange);\n            }\n        }\n        this.updatePost(FoldingRegions.fromFoldRanges(newFoldingRanges));\n    }\n    update(newRegions, blockedLineNumers = []) {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges(blockedLineNumers);\n        const newRanges = FoldingRegions.sanitizeAndMerge(newRegions, foldedOrManualRanges, this._textModel.getLineCount());\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    updatePost(newRegions) {\n        const newEditorDecorations = [];\n        let lastHiddenLine = -1;\n        for (let index = 0, limit = newRegions.length; index < limit; index++) {\n            const startLineNumber = newRegions.getStartLineNumber(index);\n            const endLineNumber = newRegions.getEndLineNumber(index);\n            const isCollapsed = newRegions.isCollapsed(index);\n            const isManual = newRegions.getSource(index) !== 0 /* FoldSource.provider */;\n            const decorationRange = {\n                startLineNumber: startLineNumber,\n                startColumn: this._textModel.getLineMaxColumn(startLineNumber),\n                endLineNumber: endLineNumber,\n                endColumn: this._textModel.getLineMaxColumn(endLineNumber) + 1\n            };\n            newEditorDecorations.push({ range: decorationRange, options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual) });\n            if (isCollapsed && endLineNumber > lastHiddenLine) {\n                lastHiddenLine = endLineNumber;\n            }\n        }\n        this._decorationProvider.changeDecorations(accessor => this._editorDecorationIds = accessor.deltaDecorations(this._editorDecorationIds, newEditorDecorations));\n        this._regions = newRegions;\n        this._updateEventEmitter.fire({ model: this });\n    }\n    _currentFoldedOrManualRanges(blockedLineNumers = []) {\n        const isBlocked = (startLineNumber, endLineNumber) => {\n            for (const blockedLineNumber of blockedLineNumers) {\n                if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) { // first line is visible\n                    return true;\n                }\n            }\n            return false;\n        };\n        const foldedRanges = [];\n        for (let i = 0, limit = this._regions.length; i < limit; i++) {\n            let isCollapsed = this.regions.isCollapsed(i);\n            const source = this.regions.getSource(i);\n            if (isCollapsed || source !== 0 /* FoldSource.provider */) {\n                const foldRange = this._regions.toFoldRange(i);\n                const decRange = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n                if (decRange) {\n                    if (isCollapsed && (isBlocked(decRange.startLineNumber, decRange.endLineNumber) || decRange.endLineNumber - decRange.startLineNumber !== foldRange.endLineNumber - foldRange.startLineNumber)) {\n                        isCollapsed = false; // uncollapse is the range is blocked or there has been lines removed or added\n                    }\n                    foldedRanges.push({\n                        startLineNumber: decRange.startLineNumber,\n                        endLineNumber: decRange.endLineNumber,\n                        type: foldRange.type,\n                        isCollapsed,\n                        source\n                    });\n                }\n            }\n        }\n        return foldedRanges;\n    }\n    /**\n     * Collapse state memento, for persistence only\n     */\n    getMemento() {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges();\n        const result = [];\n        for (let i = 0, limit = foldedOrManualRanges.length; i < limit; i++) {\n            const range = foldedOrManualRanges[i];\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            result.push({\n                startLineNumber: range.startLineNumber,\n                endLineNumber: range.endLineNumber,\n                isCollapsed: range.isCollapsed,\n                source: range.source,\n                checksum: checksum\n            });\n        }\n        return (result.length > 0) ? result : undefined;\n    }\n    /**\n     * Apply persisted state, for persistence only\n     */\n    applyMemento(state) {\n        var _a, _b;\n        if (!Array.isArray(state)) {\n            return;\n        }\n        const rangesToRestore = [];\n        const maxLineNumber = this._textModel.getLineCount();\n        for (const range of state) {\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n                continue;\n            }\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            if (!range.checksum || checksum === range.checksum) {\n                rangesToRestore.push({\n                    startLineNumber: range.startLineNumber,\n                    endLineNumber: range.endLineNumber,\n                    type: undefined,\n                    isCollapsed: (_a = range.isCollapsed) !== null && _a !== void 0 ? _a : true,\n                    source: (_b = range.source) !== null && _b !== void 0 ? _b : 0 /* FoldSource.provider */\n                });\n            }\n        }\n        const newRanges = FoldingRegions.sanitizeAndMerge(this._regions, rangesToRestore, maxLineNumber);\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    _getLinesChecksum(lineNumber1, lineNumber2) {\n        const h = hash(this._textModel.getLineContent(lineNumber1)\n            + this._textModel.getLineContent(lineNumber2));\n        return h % 1000000; // 6 digits is plenty\n    }\n    dispose() {\n        this._decorationProvider.removeDecorations(this._editorDecorationIds);\n    }\n    getAllRegionsAtLine(lineNumber, filter) {\n        const result = [];\n        if (this._regions) {\n            let index = this._regions.findRange(lineNumber);\n            let level = 1;\n            while (index >= 0) {\n                const current = this._regions.toRegion(index);\n                if (!filter || filter(current, level)) {\n                    result.push(current);\n                }\n                level++;\n                index = current.parentIndex;\n            }\n        }\n        return result;\n    }\n    getRegionAtLine(lineNumber) {\n        if (this._regions) {\n            const index = this._regions.findRange(lineNumber);\n            if (index >= 0) {\n                return this._regions.toRegion(index);\n            }\n        }\n        return null;\n    }\n    getRegionsInside(region, filter) {\n        const result = [];\n        const index = region ? region.regionIndex + 1 : 0;\n        const endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n        if (filter && filter.length === 2) {\n            const levelStack = [];\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n                        levelStack.pop();\n                    }\n                    levelStack.push(current);\n                    if (filter(current, levelStack.length)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    if (!filter || filter(current)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n}\n/**\n * Collapse or expand the regions at the given locations\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region) {\n            const doCollapse = !region.isCollapsed;\n            toToggle.push(region);\n            if (levels > 1) {\n                const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                toToggle.push(...regionsInside);\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\n    const toToggle = [];\n    if (lineNumbers && lineNumbers.length > 0) {\n        for (const lineNumber of lineNumbers) {\n            const region = foldingModel.getRegionAtLine(lineNumber);\n            if (region) {\n                if (region.isCollapsed !== doCollapse) {\n                    toToggle.push(region);\n                }\n                if (levels > 1) {\n                    const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                    toToggle.push(...regionsInside);\n                }\n            }\n        }\n    }\n    else {\n        const regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n        toToggle.push(...regionsInside);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\n        toToggle.push(...regions);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\n * @param doCollapse Whether to collapse or expand\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region) => region.isCollapsed !== doCollapse);\n        if (regions.length > 0) {\n            toToggle.push(regions[0]);\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Whether to collapse or expand\n*/\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n    const filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\n * @param doCollapse Whether to collapse or expand\n * @param blockedLineNumbers the location of regions to not collapse or expand\n */\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\n    const filteredRegions = [];\n    for (const lineNumber of blockedLineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\n        if (regions.length > 0) {\n            filteredRegions.push(regions[0]);\n        }\n    }\n    const filter = (region) => filteredRegions.every((filteredRegion) => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n    const editorModel = foldingModel.textModel;\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i)) {\n            const startLineNumber = regions.getStartLineNumber(i);\n            if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n                toToggle.push(regions.toRegion(i));\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n            toToggle.push(regions.toRegion(i));\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Get line to go to for parent fold of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Parent fold start line\n */\nexport function getParentFoldLine(lineNumber, foldingModel) {\n    let startLineNumber = null;\n    const foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    if (foldingRegion !== null) {\n        startLineNumber = foldingRegion.startLineNumber;\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\n        if (lineNumber === startLineNumber) {\n            const parentFoldingIdx = foldingRegion.parentIndex;\n            if (parentFoldingIdx !== -1) {\n                startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\n            }\n            else {\n                startLineNumber = null;\n            }\n        }\n    }\n    return startLineNumber;\n}\n/**\n * Get line to go to for previous fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Previous fold start line\n */\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to previous sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\n        if (lineNumber !== foldingRegion.startLineNumber) {\n            return foldingRegion.startLineNumber;\n        }\n        else {\n            // Find min line number to stay within parent.\n            const expectedParentIndex = foldingRegion.parentIndex;\n            let minLineNumber = 0;\n            if (expectedParentIndex !== -1) {\n                minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\n            }\n            // Find fold at same level.\n            while (foldingRegion !== null) {\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                    // Keep at same level.\n                    if (foldingRegion.startLineNumber <= minLineNumber) {\n                        return null;\n                    }\n                    else if (foldingRegion.parentIndex === expectedParentIndex) {\n                        return foldingRegion.startLineNumber;\n                    }\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n    }\n    else {\n        // Go to last fold that's before the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\n            while (foldingRegion !== null) {\n                // Found fold before current line.\n                if (foldingRegion.startLineNumber < lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get line to go to next fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Next fold start line\n */\nexport function getNextFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to next sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // Find max line number to stay within parent.\n        const expectedParentIndex = foldingRegion.parentIndex;\n        let maxLineNumber = 0;\n        if (expectedParentIndex !== -1) {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\n        }\n        else if (foldingModel.regions.length === 0) {\n            return null;\n        }\n        else {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\n        }\n        // Find fold at same level.\n        while (foldingRegion !== null) {\n            if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                // Keep at same level.\n                if (foldingRegion.startLineNumber >= maxLineNumber) {\n                    return null;\n                }\n                else if (foldingRegion.parentIndex === expectedParentIndex) {\n                    return foldingRegion.startLineNumber;\n                }\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    else {\n        // Go to first fold that's after the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(0);\n            while (foldingRegion !== null) {\n                // Found fold after current line.\n                if (foldingRegion.startLineNumber > lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Range } from '../../../common/core/range.js';\nimport { countEOL } from '../../../common/core/eolCounter.js';\nexport class HiddenRangeModel {\n    constructor(model) {\n        this._updateEventEmitter = new Emitter();\n        this._hasLineChanges = false;\n        this._foldingModel = model;\n        this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\n        this._hiddenRanges = [];\n        if (model.regions.length) {\n            this.updateHiddenRanges();\n        }\n    }\n    get onDidChange() { return this._updateEventEmitter.event; }\n    get hiddenRanges() { return this._hiddenRanges; }\n    notifyChangeModelContent(e) {\n        if (this._hiddenRanges.length && !this._hasLineChanges) {\n            this._hasLineChanges = e.changes.some(change => {\n                return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\n            });\n        }\n    }\n    updateHiddenRanges() {\n        let updateHiddenAreas = false;\n        const newHiddenAreas = [];\n        let i = 0; // index into hidden\n        let k = 0;\n        let lastCollapsedStart = Number.MAX_VALUE;\n        let lastCollapsedEnd = -1;\n        const ranges = this._foldingModel.regions;\n        for (; i < ranges.length; i++) {\n            if (!ranges.isCollapsed(i)) {\n                continue;\n            }\n            const startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n            const endLineNumber = ranges.getEndLineNumber(i);\n            if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n                // ignore ranges contained in collapsed regions\n                continue;\n            }\n            if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n                // reuse the old ranges\n                newHiddenAreas.push(this._hiddenRanges[k]);\n                k++;\n            }\n            else {\n                updateHiddenAreas = true;\n                newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n            }\n            lastCollapsedStart = startLineNumber;\n            lastCollapsedEnd = endLineNumber;\n        }\n        if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\n            this.applyHiddenRanges(newHiddenAreas);\n        }\n    }\n    applyHiddenRanges(newHiddenAreas) {\n        this._hiddenRanges = newHiddenAreas;\n        this._hasLineChanges = false;\n        this._updateEventEmitter.fire(newHiddenAreas);\n    }\n    hasRanges() {\n        return this._hiddenRanges.length > 0;\n    }\n    isHidden(line) {\n        return findRange(this._hiddenRanges, line) !== null;\n    }\n    adjustSelections(selections) {\n        let hasChanges = false;\n        const editorModel = this._foldingModel.textModel;\n        let lastRange = null;\n        const adjustLine = (line) => {\n            if (!lastRange || !isInside(line, lastRange)) {\n                lastRange = findRange(this._hiddenRanges, line);\n            }\n            if (lastRange) {\n                return lastRange.startLineNumber - 1;\n            }\n            return null;\n        };\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            const adjustedStartLine = adjustLine(selection.startLineNumber);\n            if (adjustedStartLine) {\n                selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n                hasChanges = true;\n            }\n            const adjustedEndLine = adjustLine(selection.endLineNumber);\n            if (adjustedEndLine) {\n                selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n                hasChanges = true;\n            }\n            selections[i] = selection;\n        }\n        return hasChanges;\n    }\n    dispose() {\n        if (this.hiddenRanges.length > 0) {\n            this._hiddenRanges = [];\n            this._updateEventEmitter.fire(this._hiddenRanges);\n        }\n        if (this._foldingModelListener) {\n            this._foldingModelListener.dispose();\n            this._foldingModelListener = null;\n        }\n    }\n}\nfunction isInside(line, range) {\n    return line >= range.startLineNumber && line <= range.endLineNumber;\n}\nfunction findRange(ranges, line) {\n    const i = findFirstInSorted(ranges, r => line < r.startLineNumber) - 1;\n    if (i >= 0 && ranges[i].endLineNumber >= line) {\n        return ranges[i];\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\nexport const ID_INDENT_PROVIDER = 'indent';\nexport class IndentRangeProvider {\n    constructor(editorModel, languageConfigurationService, maxFoldingRegions) {\n        this.editorModel = editorModel;\n        this.languageConfigurationService = languageConfigurationService;\n        this.maxFoldingRegions = maxFoldingRegions;\n        this.id = ID_INDENT_PROVIDER;\n    }\n    dispose() { }\n    compute(cancelationToken, notifyTooManyRegions) {\n        const foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\n        const offSide = foldingRules && !!foldingRules.offSide;\n        const markers = foldingRules && foldingRules.markers;\n        return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.maxFoldingRegions, notifyTooManyRegions));\n    }\n}\n// public only for testing\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._indentOccurrences = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    insertFirst(startLineNumber, endLineNumber, indent) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._length++;\n        if (indent < 1000) {\n            this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n        }\n    }\n    toIndentRanges(model) {\n        var _a;\n        if (this._length <= this._foldingRangesLimit) {\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\n                startIndexes[k] = this._startIndexes[i];\n                endIndexes[k] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n        else {\n            (_a = this._notifyTooManyRegions) === null || _a === void 0 ? void 0 : _a.call(this, this._foldingRangesLimit);\n            let entries = 0;\n            let maxIndent = this._indentOccurrences.length;\n            for (let i = 0; i < this._indentOccurrences.length; i++) {\n                const n = this._indentOccurrences[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxIndent = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const tabSize = model.getOptions().tabSize;\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._foldingRangesLimit);\n            const endIndexes = new Uint32Array(this._foldingRangesLimit);\n            for (let i = this._length - 1, k = 0; i >= 0; i--) {\n                const startIndex = this._startIndexes[i];\n                const lineContent = model.getLineContent(startIndex);\n                const indent = computeIndentLevel(lineContent, tabSize);\n                if (indent < maxIndent || (indent === maxIndent && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = startIndex;\n                    endIndexes[k] = this._endIndexes[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n    }\n}\nexport function computeRanges(model, offSide, markers, foldingRangesLimit, notifyTooManyRegions) {\n    const tabSize = model.getOptions().tabSize;\n    foldingRangesLimit = foldingRangesLimit !== null && foldingRangesLimit !== void 0 ? foldingRangesLimit : MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT;\n    const result = new RangesCollector(foldingRangesLimit, notifyTooManyRegions);\n    let pattern = undefined;\n    if (markers) {\n        pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\n    }\n    const previousRegions = [];\n    const line = model.getLineCount() + 1;\n    previousRegions.push({ indent: -1, endAbove: line, line }); // sentinel, to make sure there's at least one entry\n    for (let line = model.getLineCount(); line > 0; line--) {\n        const lineContent = model.getLineContent(line);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        let previous = previousRegions[previousRegions.length - 1];\n        if (indent === -1) {\n            if (offSide) {\n                // for offSide languages, empty lines are associated to the previous block\n                // note: the next block is already written to the results, so this only\n                // impacts the end position of the block before\n                previous.endAbove = line;\n            }\n            continue; // only whitespace\n        }\n        let m;\n        if (pattern && (m = lineContent.match(pattern))) {\n            // folding pattern match\n            if (m[1]) { // start pattern match\n                // discard all regions until the folding pattern\n                let i = previousRegions.length - 1;\n                while (i > 0 && previousRegions[i].indent !== -2) {\n                    i--;\n                }\n                if (i > 0) {\n                    previousRegions.length = i + 1;\n                    previous = previousRegions[i];\n                    // new folding range from pattern, includes the end line\n                    result.insertFirst(line, previous.line, indent);\n                    previous.line = line;\n                    previous.indent = indent;\n                    previous.endAbove = line;\n                    continue;\n                }\n                else {\n                    // no end marker found, treat line as a regular line\n                }\n            }\n            else { // end pattern match\n                previousRegions.push({ indent: -2, endAbove: line, line });\n                continue;\n            }\n        }\n        if (previous.indent > indent) {\n            // discard all regions with larger indent\n            do {\n                previousRegions.pop();\n                previous = previousRegions[previousRegions.length - 1];\n            } while (previous.indent > indent);\n            // new folding range\n            const endLineNumber = previous.endAbove - 1;\n            if (endLineNumber - line >= 1) { // needs at east size 1\n                result.insertFirst(line, endLineNumber, indent);\n            }\n        }\n        if (previous.indent === indent) {\n            previous.endAbove = line;\n        }\n        else { // previous.indent < indent\n            // new region with a bigger indent\n            previousRegions.push({ indent, endAbove: line, line });\n        }\n    }\n    return result.toIndentRanges(model);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\nexport class FoldingDecorationProvider {\n    constructor(editor) {\n        this.editor = editor;\n        this.showFoldingControls = 'mouseover';\n        this.showFoldingHighlights = true;\n    }\n    getDecorationOption(isCollapsed, isHidden, isManual) {\n        if (isHidden // is inside another collapsed region\n            || this.showFoldingControls === 'never') {\n            return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n        }\n        if (isCollapsed) {\n            return isManual ?\n                (this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\n                : (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\n        }\n        else if (this.showFoldingControls === 'mouseover') {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n        }\n        else {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n        }\n    }\n    changeDecorations(callback) {\n        return this.editor.changeDecorations(callback);\n    }\n    removeDecorations(decorationIds) {\n        this.editor.removeDecorations(decorationIds);\n    }\n}\nFoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n});\nFoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-auto-hide-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-hidden-range-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst foldingContext = {};\nexport const ID_SYNTAX_PROVIDER = 'syntax';\nexport class SyntaxRangeProvider {\n    constructor(editorModel, providers, handleFoldingRangesChange, limit) {\n        this.editorModel = editorModel;\n        this.providers = providers;\n        this.limit = limit;\n        this.id = ID_SYNTAX_PROVIDER;\n        for (const provider of providers) {\n            if (typeof provider.onDidChange === 'function') {\n                if (!this.disposables) {\n                    this.disposables = new DisposableStore();\n                }\n                this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\n            }\n        }\n    }\n    compute(cancellationToken, notifyTooManyRegions) {\n        return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\n            if (ranges) {\n                const res = sanitizeRanges(ranges, this.limit, notifyTooManyRegions);\n                return res;\n            }\n            return null;\n        });\n    }\n    dispose() {\n        var _a;\n        (_a = this.disposables) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n    let rangeData = null;\n    const promises = providers.map((provider, i) => {\n        return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\n            if (cancellationToken.isCancellationRequested) {\n                return;\n            }\n            if (Array.isArray(ranges)) {\n                if (!Array.isArray(rangeData)) {\n                    rangeData = [];\n                }\n                const nLines = model.getLineCount();\n                for (const r of ranges) {\n                    if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n                        rangeData.push({ start: r.start, end: r.end, rank: i, kind: r.kind });\n                    }\n                }\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(_ => {\n        return rangeData;\n    });\n}\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._nestingLevels = [];\n        this._nestingLevelCounts = [];\n        this._types = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    add(startLineNumber, endLineNumber, type, nestingLevel) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._nestingLevels[index] = nestingLevel;\n        this._types[index] = type;\n        this._length++;\n        if (nestingLevel < 30) {\n            this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n        }\n    }\n    toIndentRanges() {\n        var _a;\n        if (this._length <= this._foldingRangesLimit) {\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = 0; i < this._length; i++) {\n                startIndexes[i] = this._startIndexes[i];\n                endIndexes[i] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes, this._types);\n        }\n        else {\n            (_a = this._notifyTooManyRegions) === null || _a === void 0 ? void 0 : _a.call(this, this._foldingRangesLimit);\n            let entries = 0;\n            let maxLevel = this._nestingLevelCounts.length;\n            for (let i = 0; i < this._nestingLevelCounts.length; i++) {\n                const n = this._nestingLevelCounts[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxLevel = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const startIndexes = new Uint32Array(this._foldingRangesLimit);\n            const endIndexes = new Uint32Array(this._foldingRangesLimit);\n            const types = [];\n            for (let i = 0, k = 0; i < this._length; i++) {\n                const level = this._nestingLevels[i];\n                if (level < maxLevel || (level === maxLevel && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = this._startIndexes[i];\n                    endIndexes[k] = this._endIndexes[i];\n                    types[k] = this._types[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes, types);\n        }\n    }\n}\nexport function sanitizeRanges(rangeData, limit, notifyTooManyRegions) {\n    const sorted = rangeData.sort((d1, d2) => {\n        let diff = d1.start - d2.start;\n        if (diff === 0) {\n            diff = d1.rank - d2.rank;\n        }\n        return diff;\n    });\n    const collector = new RangesCollector(limit, notifyTooManyRegions);\n    let top = undefined;\n    const previous = [];\n    for (const entry of sorted) {\n        if (!top) {\n            top = entry;\n            collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n        else {\n            if (entry.start > top.start) {\n                if (entry.end <= top.end) {\n                    previous.push(top);\n                    top = entry;\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n                else {\n                    if (entry.start > top.end) {\n                        do {\n                            top = previous.pop();\n                        } while (top && entry.start > top.end);\n                        if (top) {\n                            previous.push(top);\n                        }\n                        top = entry;\n                    }\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n            }\n        }\n    }\n    return collector.toIndentRanges();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport * as types from '../../../../base/common/types.js';\nimport './folding.css';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { FoldingRangeKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine as getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { foldingCollapsedIcon, FoldingDecorationProvider, foldingExpandedIcon, foldingManualCollapsedIcon, foldingManualExpandedIcon } from './foldingDecorations.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { SyntaxRangeProvider } from './syntaxRangeProvider.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\nlet FoldingController = class FoldingController extends Disposable {\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this.contextKeyService = contextKeyService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this._tooManyRegionsNotified = false;\n        this.localToDispose = this._register(new DisposableStore());\n        this.editor = editor;\n        const options = this.editor.getOptions();\n        this._isEnabled = options.get(39 /* EditorOption.folding */);\n        this._useFoldingProviders = options.get(40 /* EditorOption.foldingStrategy */) !== 'indentation';\n        this._unfoldOnClickAfterEndOfLine = options.get(44 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n        this._restoringViewState = false;\n        this._currentModelHasFoldedImports = false;\n        this._foldingImportsByDefault = options.get(42 /* EditorOption.foldingImportsByDefault */);\n        this._maxFoldingRegions = options.get(43 /* EditorOption.foldingMaximumRegions */);\n        this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', { min: 200 });\n        this.foldingModel = null;\n        this.hiddenRangeModel = null;\n        this.rangeProvider = null;\n        this.foldingRegionPromise = null;\n        this.foldingModelPromise = null;\n        this.updateScheduler = null;\n        this.cursorChangedScheduler = null;\n        this.mouseDownInfo = null;\n        this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n        this.foldingDecorationProvider.showFoldingControls = options.get(101 /* EditorOption.showFoldingControls */);\n        this.foldingDecorationProvider.showFoldingHighlights = options.get(41 /* EditorOption.foldingHighlight */);\n        this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\n        this.foldingEnabled.set(this._isEnabled);\n        this._notifyTooManyRegions = (maxFoldingRegions) => {\n            // Message will display once per time vscode runs. Once per file would be tricky.\n            if (!this._tooManyRegionsNotified) {\n                notificationService.notify({\n                    severity: Severity.Warning,\n                    sticky: true,\n                    message: nls.localize('maximum fold ranges', \"The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?[\\\"editor.foldingMaximumRegions\\\"]) to enable more.\", maxFoldingRegions)\n                });\n                this._tooManyRegionsNotified = true;\n            }\n        };\n        this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(39 /* EditorOption.folding */)) {\n                this._isEnabled = this.editor.getOptions().get(39 /* EditorOption.folding */);\n                this.foldingEnabled.set(this._isEnabled);\n                this.onModelChanged();\n            }\n            if (e.hasChanged(43 /* EditorOption.foldingMaximumRegions */)) {\n                this._maxFoldingRegions = this.editor.getOptions().get(43 /* EditorOption.foldingMaximumRegions */);\n                this._tooManyRegionsNotified = false;\n                this.onModelChanged();\n            }\n            if (e.hasChanged(101 /* EditorOption.showFoldingControls */) || e.hasChanged(41 /* EditorOption.foldingHighlight */)) {\n                const options = this.editor.getOptions();\n                this.foldingDecorationProvider.showFoldingControls = options.get(101 /* EditorOption.showFoldingControls */);\n                this.foldingDecorationProvider.showFoldingHighlights = options.get(41 /* EditorOption.foldingHighlight */);\n                this.triggerFoldingModelChanged();\n            }\n            if (e.hasChanged(40 /* EditorOption.foldingStrategy */)) {\n                this._useFoldingProviders = this.editor.getOptions().get(40 /* EditorOption.foldingStrategy */) !== 'indentation';\n                this.onFoldingStrategyChanged();\n            }\n            if (e.hasChanged(44 /* EditorOption.unfoldOnClickAfterEndOfLine */)) {\n                this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(44 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n            }\n            if (e.hasChanged(42 /* EditorOption.foldingImportsByDefault */)) {\n                this._foldingImportsByDefault = this.editor.getOptions().get(42 /* EditorOption.foldingImportsByDefault */);\n            }\n        }));\n        this.onModelChanged();\n    }\n    static get(editor) {\n        return editor.getContribution(FoldingController.ID);\n    }\n    /**\n     * Store view state.\n     */\n    saveViewState() {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n            return {};\n        }\n        if (this.foldingModel) { // disposed ?\n            const collapsedRegions = this.foldingModel.getMemento();\n            const provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n            return { collapsedRegions, lineCount: model.getLineCount(), provider, foldedImports: this._currentModelHasFoldedImports };\n        }\n        return undefined;\n    }\n    /**\n     * Restore view state.\n     */\n    restoreViewState(state) {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n            return;\n        }\n        if (!state || state.lineCount !== model.getLineCount()) {\n            return;\n        }\n        this._currentModelHasFoldedImports = !!state.foldedImports;\n        if (state.collapsedRegions && state.collapsedRegions.length > 0 && this.foldingModel) {\n            this._restoringViewState = true;\n            try {\n                this.foldingModel.applyMemento(state.collapsedRegions);\n            }\n            finally {\n                this._restoringViewState = false;\n            }\n        }\n    }\n    onModelChanged() {\n        this.localToDispose.clear();\n        const model = this.editor.getModel();\n        if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n            // huge files get no view model, so they cannot support hidden areas\n            return;\n        }\n        this._currentModelHasFoldedImports = false;\n        this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n        this.localToDispose.add(this.foldingModel);\n        this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n        this.localToDispose.add(this.hiddenRangeModel);\n        this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\n        this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\n        this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\n        this.localToDispose.add(this.cursorChangedScheduler);\n        this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\n        this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\n        this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\n        this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\n        this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n        this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\n        this.localToDispose.add({\n            dispose: () => {\n                if (this.foldingRegionPromise) {\n                    this.foldingRegionPromise.cancel();\n                    this.foldingRegionPromise = null;\n                }\n                if (this.updateScheduler) {\n                    this.updateScheduler.cancel();\n                }\n                this.updateScheduler = null;\n                this.foldingModel = null;\n                this.foldingModelPromise = null;\n                this.hiddenRangeModel = null;\n                this.cursorChangedScheduler = null;\n                if (this.rangeProvider) {\n                    this.rangeProvider.dispose();\n                }\n                this.rangeProvider = null;\n            }\n        });\n        this.triggerFoldingModelChanged();\n    }\n    onFoldingStrategyChanged() {\n        if (this.rangeProvider) {\n            this.rangeProvider.dispose();\n        }\n        this.rangeProvider = null;\n        this.triggerFoldingModelChanged();\n    }\n    getRangeProvider(editorModel) {\n        if (this.rangeProvider) {\n            return this.rangeProvider;\n        }\n        this.rangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._maxFoldingRegions); // fallback\n        if (this._useFoldingProviders && this.foldingModel) {\n            const foldingProviders = this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);\n            if (foldingProviders.length > 0) {\n                this.rangeProvider = new SyntaxRangeProvider(editorModel, foldingProviders, () => this.triggerFoldingModelChanged(), this._maxFoldingRegions);\n            }\n        }\n        return this.rangeProvider;\n    }\n    getFoldingModel() {\n        return this.foldingModelPromise;\n    }\n    onDidChangeModelContent(e) {\n        var _a;\n        (_a = this.hiddenRangeModel) === null || _a === void 0 ? void 0 : _a.notifyChangeModelContent(e);\n        this.triggerFoldingModelChanged();\n    }\n    triggerFoldingModelChanged() {\n        if (this.updateScheduler) {\n            if (this.foldingRegionPromise) {\n                this.foldingRegionPromise.cancel();\n                this.foldingRegionPromise = null;\n            }\n            this.foldingModelPromise = this.updateScheduler.trigger(() => {\n                const foldingModel = this.foldingModel;\n                if (!foldingModel) { // null if editor has been disposed, or folding turned off\n                    return null;\n                }\n                const sw = new StopWatch(true);\n                const provider = this.getRangeProvider(foldingModel.textModel);\n                const foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token, this._notifyTooManyRegions));\n                return foldingRegionPromise.then(foldingRanges => {\n                    if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) { // new request or cancelled in the meantime?\n                        let scrollState;\n                        if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\n                            const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\n                            if (hasChanges) {\n                                scrollState = StableEditorScrollState.capture(this.editor);\n                                this._currentModelHasFoldedImports = hasChanges;\n                            }\n                        }\n                        // some cursors might have moved into hidden regions, make sure they are in expanded regions\n                        const selections = this.editor.getSelections();\n                        const selectionLineNumbers = selections ? selections.map(s => s.startLineNumber) : [];\n                        foldingModel.update(foldingRanges, selectionLineNumbers);\n                        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this.editor);\n                        // update debounce info\n                        const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\n                        if (this.updateScheduler) {\n                            this.updateScheduler.defaultDelay = newValue;\n                        }\n                    }\n                    return foldingModel;\n                });\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return null;\n            });\n        }\n    }\n    onHiddenRangesChanges(hiddenRanges) {\n        if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\n            const selections = this.editor.getSelections();\n            if (selections) {\n                if (this.hiddenRangeModel.adjustSelections(selections)) {\n                    this.editor.setSelections(selections);\n                }\n            }\n        }\n        this.editor.setHiddenAreas(hiddenRanges);\n    }\n    onCursorPositionChanged() {\n        if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n            this.cursorChangedScheduler.schedule();\n        }\n    }\n    revealCursor() {\n        const foldingModel = this.getFoldingModel();\n        if (!foldingModel) {\n            return;\n        }\n        foldingModel.then(foldingModel => {\n            if (foldingModel) {\n                const selections = this.editor.getSelections();\n                if (selections && selections.length > 0) {\n                    const toToggle = [];\n                    for (const selection of selections) {\n                        const lineNumber = selection.selectionStartLineNumber;\n                        if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\n                            toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\n                        }\n                    }\n                    if (toToggle.length) {\n                        foldingModel.toggleCollapseState(toToggle);\n                        this.reveal(selections[0].getPosition());\n                    }\n                }\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    onEditorMouseDown(e) {\n        this.mouseDownInfo = null;\n        if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n            return;\n        }\n        if (!e.event.leftButton && !e.event.middleButton) {\n            return;\n        }\n        const range = e.target.range;\n        let iconClicked = false;\n        switch (e.target.type) {\n            case 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */: {\n                const data = e.target.detail;\n                const offsetLeftInGutter = e.target.element.offsetLeft;\n                const gutterOffsetX = data.offsetX - offsetLeftInGutter;\n                // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n                // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n                if (gutterOffsetX < 5) { // the whitespace between the border and the real folding icon border is 5px\n                    return;\n                }\n                iconClicked = true;\n                break;\n            }\n            case 7 /* MouseTargetType.CONTENT_EMPTY */: {\n                if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\n                    const data = e.target.detail;\n                    if (!data.isAfterLines) {\n                        break;\n                    }\n                }\n                return;\n            }\n            case 6 /* MouseTargetType.CONTENT_TEXT */: {\n                if (this.hiddenRangeModel.hasRanges()) {\n                    const model = this.editor.getModel();\n                    if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n                        break;\n                    }\n                }\n                return;\n            }\n            default:\n                return;\n        }\n        this.mouseDownInfo = { lineNumber: range.startLineNumber, iconClicked };\n    }\n    onEditorMouseUp(e) {\n        const foldingModel = this.foldingModel;\n        if (!foldingModel || !this.mouseDownInfo || !e.target) {\n            return;\n        }\n        const lineNumber = this.mouseDownInfo.lineNumber;\n        const iconClicked = this.mouseDownInfo.iconClicked;\n        const range = e.target.range;\n        if (!range || range.startLineNumber !== lineNumber) {\n            return;\n        }\n        if (iconClicked) {\n            if (e.target.type !== 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n                return;\n            }\n        }\n        else {\n            const model = this.editor.getModel();\n            if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n                return;\n            }\n        }\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region && region.startLineNumber === lineNumber) {\n            const isCollapsed = region.isCollapsed;\n            if (iconClicked || isCollapsed) {\n                const surrounding = e.event.altKey;\n                let toToggle = [];\n                if (surrounding) {\n                    const filter = (otherRegion) => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\n                    const toMaybeToggle = foldingModel.getRegionsInside(null, filter);\n                    for (const r of toMaybeToggle) {\n                        if (r.isCollapsed) {\n                            toToggle.push(r);\n                        }\n                    }\n                    // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\n                    if (toToggle.length === 0) {\n                        toToggle = toMaybeToggle;\n                    }\n                }\n                else {\n                    const recursive = e.event.middleButton || e.event.shiftKey;\n                    if (recursive) {\n                        for (const r of foldingModel.getRegionsInside(region)) {\n                            if (r.isCollapsed === isCollapsed) {\n                                toToggle.push(r);\n                            }\n                        }\n                    }\n                    // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\n                    if (isCollapsed || !recursive || toToggle.length === 0) {\n                        toToggle.push(region);\n                    }\n                }\n                foldingModel.toggleCollapseState(toToggle);\n                this.reveal({ lineNumber, column: 1 });\n            }\n        }\n    }\n    reveal(position) {\n        this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n    }\n};\nFoldingController.ID = 'editor.contrib.folding';\nFoldingController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageConfigurationService),\n    __param(3, INotificationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], FoldingController);\nexport { FoldingController };\nclass FoldingAction extends EditorAction {\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const foldingController = FoldingController.get(editor);\n        if (!foldingController) {\n            return;\n        }\n        const foldingModelPromise = foldingController.getFoldingModel();\n        if (foldingModelPromise) {\n            this.reportTelemetry(accessor, editor);\n            return foldingModelPromise.then(foldingModel => {\n                if (foldingModel) {\n                    this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\n                    const selection = editor.getSelection();\n                    if (selection) {\n                        foldingController.reveal(selection.getStartPosition());\n                    }\n                }\n            });\n        }\n    }\n    getSelectedLines(editor) {\n        const selections = editor.getSelections();\n        return selections ? selections.map(s => s.startLineNumber) : [];\n    }\n    getLineNumbers(args, editor) {\n        if (args && args.selectionLines) {\n            return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\n        }\n        return this.getSelectedLines(editor);\n    }\n    run(_accessor, _editor) {\n    }\n}\nfunction foldingArgumentsConstraint(args) {\n    if (!types.isUndefined(args)) {\n        if (!types.isObject(args)) {\n            return false;\n        }\n        const foldingArgs = args;\n        if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.selectionLines) && (!types.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n            return false;\n        }\n    }\n    return true;\n}\nclass UnfoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfold',\n            label: nls.localize('unfoldAction.label', \"Unfold\"),\n            alias: 'Unfold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.BracketRight */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Unfold the content in the editor',\n                args: [\n                    {\n                        name: 'Unfold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                    'default': 1\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                    'default': 'down'\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const levels = args && args.levels || 1;\n        const lineNumbers = this.getLineNumbers(args, editor);\n        if (args && args.direction === 'up') {\n            setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n        }\n        else {\n            setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n        }\n    }\n}\nclass UnFoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldRecursively',\n            label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n            alias: 'Unfold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, _args) {\n        setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n    }\n}\nclass FoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.fold',\n            label: nls.localize('foldAction.label', \"Fold\"),\n            alias: 'Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.BracketLeft */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Fold the content in the editor',\n                args: [\n                    {\n                        name: 'Fold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const lineNumbers = this.getLineNumbers(args, editor);\n        const levels = args && args.levels;\n        const direction = args && args.direction;\n        if (typeof levels !== 'number' && typeof direction !== 'string') {\n            // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\n            setCollapseStateUp(foldingModel, true, lineNumbers);\n        }\n        else {\n            if (direction === 'up') {\n                setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\n            }\n            else {\n                setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\n            }\n        }\n    }\n}\nclass ToggleFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.toggleFold',\n            label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\n            alias: 'Toggle Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        toggleCollapseState(foldingModel, 1, selectedLines);\n    }\n}\nclass FoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldRecursively',\n            label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n            alias: 'Fold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n    }\n}\nclass FoldAllBlockCommentsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllBlockComments',\n            label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n            alias: 'Fold All Block Comments',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\n            if (comments && comments.blockCommentStartToken) {\n                const regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass FoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllMarkerRegions',\n            label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n            alias: 'Fold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 29 /* KeyCode.Digit8 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass UnfoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllMarkerRegions',\n            label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n            alias: 'Unfold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 30 /* KeyCode.Digit9 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, false);\n            }\n        }\n    }\n}\nclass FoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllExcept',\n            label: nls.localize('foldAllExcept.label', \"Fold All Regions Except Selected\"),\n            alias: 'Fold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 83 /* KeyCode.Minus */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, true, selectedLines);\n    }\n}\nclass UnfoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllExcept',\n            label: nls.localize('unfoldAllExcept.label', \"Unfold All Regions Except Selected\"),\n            alias: 'Unfold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 81 /* KeyCode.Equal */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, false, selectedLines);\n    }\n}\nclass FoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAll',\n            label: nls.localize('foldAllAction.label', \"Fold All\"),\n            alias: 'Fold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, true);\n    }\n}\nclass UnfoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAll',\n            label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n            alias: 'Unfold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 40 /* KeyCode.KeyJ */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, false);\n    }\n}\nclass FoldLevelAction extends FoldingAction {\n    getFoldingLevel() {\n        return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n    }\n}\nFoldLevelAction.ID_PREFIX = 'editor.foldLevel';\nFoldLevelAction.ID = (level) => FoldLevelAction.ID_PREFIX + level;\n/** Action to go to the parent fold of current line */\nclass GotoParentFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoParentFold',\n            label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\n            alias: 'Go to Parent Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the previous fold of current line */\nclass GotoPreviousFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoPreviousFold',\n            label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\n            alias: 'Go to Previous Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the next fold of current line */\nclass GotoNextFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoNextFold',\n            label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\n            alias: 'Go to Next Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\nclass FoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.createFoldingRangeFromSelection',\n            label: nls.localize('createManualFoldRange.label', \"Create Manual Folding Range from Selection\"),\n            alias: 'Create Folding Range from Selection',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 82 /* KeyCode.Comma */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        var _a;\n        const collapseRanges = [];\n        const selections = editor.getSelections();\n        if (selections) {\n            for (const selection of selections) {\n                let endLineNumber = selection.endLineNumber;\n                if (selection.endColumn === 1) {\n                    --endLineNumber;\n                }\n                if (endLineNumber > selection.startLineNumber) {\n                    collapseRanges.push({\n                        startLineNumber: selection.startLineNumber,\n                        endLineNumber: endLineNumber,\n                        type: undefined,\n                        isCollapsed: true,\n                        source: 1 /* FoldSource.userDefined */\n                    });\n                    editor.setSelection({\n                        startLineNumber: selection.startLineNumber,\n                        startColumn: 1,\n                        endLineNumber: selection.startLineNumber,\n                        endColumn: 1\n                    });\n                }\n            }\n            if (collapseRanges.length > 0) {\n                collapseRanges.sort((a, b) => {\n                    return a.startLineNumber - b.startLineNumber;\n                });\n                const newRanges = FoldingRegions.sanitizeAndMerge(foldingModel.regions, collapseRanges, (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLineCount());\n                foldingModel.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n            }\n        }\n    }\n}\nclass RemoveFoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.removeManualFoldingRanges',\n            label: nls.localize('removeManualFoldingRanges.label', \"Remove Manual Folding Ranges\"),\n            alias: 'Remove Manual Folding Ranges',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(foldingController, foldingModel, editor) {\n        const selections = editor.getSelections();\n        if (selections) {\n            const ranges = [];\n            for (const selection of selections) {\n                const { startLineNumber, endLineNumber } = selection;\n                ranges.push(endLineNumber >= startLineNumber ? { startLineNumber, endLineNumber } : { endLineNumber, startLineNumber });\n            }\n            foldingModel.removeManualRanges(ranges);\n            foldingController.triggerFoldingModelChanged();\n        }\n    }\n}\nregisterEditorContribution(FoldingController.ID, FoldingController);\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\nregisterEditorAction(FoldAllRegionsExceptAction);\nregisterEditorAction(UnfoldAllRegionsExceptAction);\nregisterEditorAction(ToggleFoldAction);\nregisterEditorAction(GotoParentFoldAction);\nregisterEditorAction(GotoPreviousFoldAction);\nregisterEditorAction(GotoNextFoldAction);\nregisterEditorAction(FoldRangeFromSelectionAction);\nregisterEditorAction(RemoveFoldRangeFromSelectionAction);\nfor (let i = 1; i <= 7; i++) {\n    registerInstantiatedEditorAction(new FoldLevelAction({\n        id: FoldLevelAction.ID(i),\n        label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n        alias: `Fold Level ${i}`,\n        precondition: CONTEXT_FOLDING_ENABLED,\n        kbOpts: {\n            kbExpr: EditorContextKeys.editorTextFocus,\n            primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | (21 /* KeyCode.Digit0 */ + i)),\n            weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n    }));\n}\nexport const foldBackgroundBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, nls.localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nexport const editorFoldForeground = registerColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hcDark: iconForeground, hcLight: iconForeground }, nls.localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\nregisterThemingParticipant((theme, collector) => {\n    const foldBackground = theme.getColor(foldBackgroundBackground);\n    if (foldBackground) {\n        collector.addRule(`.monaco-editor .folded-background { background-color: ${foldBackground}; }`);\n    }\n    const editorFoldColor = theme.getColor(editorFoldForeground);\n    if (editorFoldColor) {\n        collector.addRule(`\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingCollapsedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingManualExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingManualCollapsedIcon)} {\n\t\t\tcolor: ${editorFoldColor} !important;\n\t\t}\n\t\t`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(51 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(51 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(50 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\nlet OutlineModelService = class OutlineModelService {\n    constructor(_languageFeaturesService, debounces, modelService) {\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposables = new DisposableStore();\n        this._cache = new LRUCache(10, 0.7);\n        this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', { min: 350 });\n        // don't cache outline models longer than their text model\n        this._disposables.add(modelService.onModelRemoved(textModel => {\n            this._cache.delete(textModel.id);\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    getOrCreate(textModel, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const registry = this._languageFeaturesService.documentSymbolProvider;\n            const provider = registry.ordered(textModel);\n            let data = this._cache.get(textModel.id);\n            if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\n                const source = new CancellationTokenSource();\n                data = {\n                    versionId: textModel.getVersionId(),\n                    provider,\n                    promiseCnt: 0,\n                    source,\n                    promise: OutlineModel.create(registry, textModel, source.token),\n                    model: undefined,\n                };\n                this._cache.set(textModel.id, data);\n                const now = Date.now();\n                data.promise.then(outlineModel => {\n                    data.model = outlineModel;\n                    this._debounceInformation.update(textModel, Date.now() - now);\n                }).catch(_err => {\n                    this._cache.delete(textModel.id);\n                });\n            }\n            if (data.model) {\n                // resolved -> return data\n                return data.model;\n            }\n            // increase usage counter\n            data.promiseCnt += 1;\n            const listener = token.onCancellationRequested(() => {\n                // last -> cancel provider request, remove cached promise\n                if (--data.promiseCnt === 0) {\n                    data.source.cancel();\n                    this._cache.delete(textModel.id);\n                }\n            });\n            try {\n                return yield data.promise;\n            }\n            finally {\n                listener.dispose();\n            }\n        });\n    }\n};\nOutlineModelService = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, ILanguageFeatureDebounceService),\n    __param(2, IModelService)\n], OutlineModelService);\nexport { OutlineModelService };\nregisterSingleton(IOutlineModelService, OutlineModelService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        assertType(URI.isUri(resource));\n        const outlineService = accessor.get(IOutlineModelService);\n        const modelService = accessor.get(ITextModelService);\n        const reference = yield modelService.createModelReference(resource);\n        try {\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport function createDisposableRef(object, disposable) {\n    return {\n        object,\n        dispose: () => disposable === null || disposable === void 0 ? void 0 : disposable.dispose(),\n    };\n}\nexport function applyEdits(text, edits) {\n    const transformer = new PositionOffsetTransformer(text);\n    const offsetEdits = edits.map(e => {\n        const range = Range.lift(e.range);\n        return ({\n            startOffset: transformer.getOffset(range.getStartPosition()),\n            endOffset: transformer.getOffset(range.getEndPosition()),\n            text: e.text\n        });\n    });\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n    for (const edit of offsetEdits) {\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n    }\n    return text;\n}\nclass PositionOffsetTransformer {\n    constructor(text) {\n        this.lineStartOffsetByLineIdx = [];\n        this.lineStartOffsetByLineIdx.push(0);\n        for (let i = 0; i < text.length; i++) {\n            if (text.charAt(i) === '\\n') {\n                this.lineStartOffsetByLineIdx.push(i + 1);\n            }\n        }\n    }\n    getOffset(position) {\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n    }\n}\nconst array = [];\nexport function getReadonlyEmptyArray() {\n    return array;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { applyEdits } from './utils.js';\nexport class GhostText {\n    constructor(lineNumber, parts, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.parts = parts;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n    }\n    renderForScreenReader(lineText) {\n        if (this.parts.length === 0) {\n            return '';\n        }\n        const lastPart = this.parts[this.parts.length - 1];\n        const cappedLineText = lineText.substr(0, lastPart.column - 1);\n        const text = applyEdits(cappedLineText, this.parts.map(p => ({\n            range: { startLineNumber: 1, endLineNumber: 1, startColumn: p.column, endColumn: p.column },\n            text: p.lines.join('\\n')\n        })));\n        return text.substring(this.parts[0].column - 1);\n    }\n    isEmpty() {\n        return this.parts.every(p => p.lines.length === 0);\n    }\n}\nexport class GhostTextPart {\n    constructor(column, lines, \n    /**\n     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\n    */\n    preview) {\n        this.column = column;\n        this.lines = lines;\n        this.preview = preview;\n    }\n}\nexport class GhostTextReplacement {\n    constructor(lineNumber, columnStart, length, newLines, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.columnStart = columnStart;\n        this.length = length;\n        this.newLines = newLines;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n        this.parts = [\n            new GhostTextPart(this.columnStart + this.length, this.newLines, false),\n        ];\n    }\n    renderForScreenReader(_lineText) {\n        return this.newLines.join('\\n');\n    }\n}\nexport class BaseGhostTextWidgetModel extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._expanded = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(108 /* EditorOption.suggest */) && this._expanded === undefined) {\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n    }\n    setExpanded(expanded) {\n        this._expanded = true;\n        this.onDidChangeEmitter.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../../base/common/diff/diff.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostText, GhostTextPart } from './ghostText.js';\nexport function minimizeInlineCompletion(model, inlineCompletion) {\n    if (!inlineCompletion) {\n        return inlineCompletion;\n    }\n    const valueToReplace = model.getValueInRange(inlineCompletion.range);\n    const commonPrefixLen = strings.commonPrefixLength(valueToReplace, inlineCompletion.insertText);\n    const startOffset = model.getOffsetAt(inlineCompletion.range.getStartPosition()) + commonPrefixLen;\n    const start = model.getPositionAt(startOffset);\n    const remainingValueToReplace = valueToReplace.substr(commonPrefixLen);\n    const commonSuffixLen = strings.commonSuffixLength(remainingValueToReplace, inlineCompletion.insertText);\n    const end = model.getPositionAt(Math.max(startOffset, model.getOffsetAt(inlineCompletion.range.getEndPosition()) - commonSuffixLen));\n    return {\n        range: Range.fromPositions(start, end),\n        insertText: inlineCompletion.insertText.substr(commonPrefixLen, inlineCompletion.insertText.length - commonPrefixLen - commonSuffixLen),\n        snippetInfo: inlineCompletion.snippetInfo,\n        filterText: inlineCompletion.filterText,\n        additionalTextEdits: inlineCompletion.additionalTextEdits,\n    };\n}\nexport function normalizedInlineCompletionsEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.range.equalsRange(b.range) && a.insertText === b.insertText && a.command === b.command;\n}\n/**\n * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\n * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\n*/\nexport function inlineCompletionToGhostText(inlineCompletion, textModel, mode, cursorPosition, previewSuffixLength = 0) {\n    if (inlineCompletion.range.startLineNumber !== inlineCompletion.range.endLineNumber) {\n        // Only single line replacements are supported.\n        return undefined;\n    }\n    const sourceLine = textModel.getLineContent(inlineCompletion.range.startLineNumber);\n    const sourceIndentationLength = strings.getLeadingWhitespace(sourceLine).length;\n    const suggestionTouchesIndentation = inlineCompletion.range.startColumn - 1 <= sourceIndentationLength;\n    if (suggestionTouchesIndentation) {\n        // source:      [abc]\n        //                         ^^^^^^^^^ inlineCompletion.range\n        //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\n        //                         ^^^^^^ replacedIndentation.length\n        //                               ^^^ rangeThatDoesNotReplaceIndentation\n        // inlineCompletion.text: 'foo'\n        //                         ^^ suggestionAddedIndentationLength\n        const suggestionAddedIndentationLength = strings.getLeadingWhitespace(inlineCompletion.insertText).length;\n        const replacedIndentation = sourceLine.substring(inlineCompletion.range.startColumn - 1, sourceIndentationLength);\n        const rangeThatDoesNotReplaceIndentation = Range.fromPositions(inlineCompletion.range.getStartPosition().delta(0, replacedIndentation.length), inlineCompletion.range.getEndPosition());\n        const suggestionWithoutIndentationChange = inlineCompletion.insertText.startsWith(replacedIndentation)\n            // Adds more indentation without changing existing indentation: We can add ghost text for this\n            ? inlineCompletion.insertText.substring(replacedIndentation.length)\n            // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\n            : inlineCompletion.insertText.substring(suggestionAddedIndentationLength);\n        inlineCompletion = {\n            range: rangeThatDoesNotReplaceIndentation,\n            insertText: suggestionWithoutIndentationChange,\n            command: inlineCompletion.command,\n            snippetInfo: undefined,\n            filterText: inlineCompletion.filterText,\n            additionalTextEdits: inlineCompletion.additionalTextEdits,\n        };\n    }\n    // This is a single line string\n    const valueToBeReplaced = textModel.getValueInRange(inlineCompletion.range);\n    const changes = cachingDiff(valueToBeReplaced, inlineCompletion.insertText);\n    if (!changes) {\n        // No ghost text in case the diff would be too slow to compute\n        return undefined;\n    }\n    const lineNumber = inlineCompletion.range.startLineNumber;\n    const parts = new Array();\n    if (mode === 'prefix') {\n        const filteredChanges = changes.filter(c => c.originalLength === 0);\n        if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\n            // Prefixes only have a single change.\n            return undefined;\n        }\n    }\n    const previewStartInCompletionText = inlineCompletion.insertText.length - previewSuffixLength;\n    for (const c of changes) {\n        const insertColumn = inlineCompletion.range.startColumn + c.originalStart + c.originalLength;\n        if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === inlineCompletion.range.startLineNumber && insertColumn < cursorPosition.column) {\n            // No ghost text before cursor\n            return undefined;\n        }\n        if (c.originalLength > 0) {\n            return undefined;\n        }\n        if (c.modifiedLength === 0) {\n            continue;\n        }\n        const modifiedEnd = c.modifiedStart + c.modifiedLength;\n        const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\n        const nonPreviewText = inlineCompletion.insertText.substring(c.modifiedStart, nonPreviewTextEnd);\n        const italicText = inlineCompletion.insertText.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\n        if (nonPreviewText.length > 0) {\n            const lines = strings.splitLines(nonPreviewText);\n            parts.push(new GhostTextPart(insertColumn, lines, false));\n        }\n        if (italicText.length > 0) {\n            const lines = strings.splitLines(italicText);\n            parts.push(new GhostTextPart(insertColumn, lines, true));\n        }\n    }\n    return new GhostText(lineNumber, parts, 0);\n}\nlet lastRequest = undefined;\nfunction cachingDiff(originalValue, newValue) {\n    if ((lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.originalValue) === originalValue && (lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.newValue) === newValue) {\n        return lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.changes;\n    }\n    else {\n        let changes = smartDiff(originalValue, newValue, true);\n        if (changes) {\n            const deletedChars = deletedCharacters(changes);\n            if (deletedChars > 0) {\n                // For performance reasons, don't compute diff if there is nothing to improve\n                const newChanges = smartDiff(originalValue, newValue, false);\n                if (newChanges && deletedCharacters(newChanges) < deletedChars) {\n                    // Disabling smartness seems to be better here\n                    changes = newChanges;\n                }\n            }\n        }\n        lastRequest = {\n            originalValue,\n            newValue,\n            changes\n        };\n        return changes;\n    }\n}\nfunction deletedCharacters(changes) {\n    let sum = 0;\n    for (const c of changes) {\n        sum += Math.max(c.originalLength - c.modifiedLength, 0);\n    }\n    return sum;\n}\n/**\n * When matching `if ()` with `if (f() = 1) { g(); }`,\n * align it like this:        `if (       )`\n * Not like this:\t\t\t  `if (  )`\n * Also not like this:\t\t  `if (             )`.\n *\n * The parenthesis are preprocessed to ensure that they match correctly.\n */\nfunction smartDiff(originalValue, newValue, smartBracketMatching) {\n    if (originalValue.length > 5000 || newValue.length > 5000) {\n        // We don't want to work on strings that are too big\n        return undefined;\n    }\n    function getMaxCharCode(val) {\n        let maxCharCode = 0;\n        for (let i = 0, len = val.length; i < len; i++) {\n            const charCode = val.charCodeAt(i);\n            if (charCode > maxCharCode) {\n                maxCharCode = charCode;\n            }\n        }\n        return maxCharCode;\n    }\n    const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\n    function getUniqueCharCode(id) {\n        if (id < 0) {\n            throw new Error('unexpected');\n        }\n        return maxCharCode + id + 1;\n    }\n    function getElements(source) {\n        let level = 0;\n        let group = 0;\n        const characters = new Int32Array(source.length);\n        for (let i = 0, len = source.length; i < len; i++) {\n            // TODO support more brackets\n            if (smartBracketMatching && source[i] === '(') {\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id);\n                level++;\n            }\n            else if (smartBracketMatching && source[i] === ')') {\n                level = Math.max(level - 1, 0);\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id + 1);\n                if (level === 0) {\n                    group++;\n                }\n            }\n            else {\n                characters[i] = source.charCodeAt(i);\n            }\n        }\n        return characters;\n    }\n    const elements1 = getElements(originalValue);\n    const elements2 = getElements(newValue);\n    return new LcsDiff({ getElements: () => elements1 }, { getElements: () => elements2 }).ComputeDiff(false).changes;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\nimport { lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\nimport { parseDocument } from './bracketPairsTree/parser.js';\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\nimport { TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\nexport function fixBracketsInLine(tokens, languageConfigurationService) {\n    const denseKeyProvider = new DenseKeyProvider();\n    const bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, (languageId) => languageConfigurationService.getLanguageConfiguration(languageId));\n    const tokenizer = new TextBufferTokenizer(new StaticTokenizerSource([tokens]), bracketTokens);\n    const node = parseDocument(tokenizer, [], undefined, true);\n    let str = '';\n    const line = tokens.getLineContent();\n    function processNode(node, offset) {\n        if (node.kind === 2 /* AstNodeKind.Pair */) {\n            processNode(node.openingBracket, offset);\n            offset = lengthAdd(offset, node.openingBracket.length);\n            if (node.child) {\n                processNode(node.child, offset);\n                offset = lengthAdd(offset, node.child.length);\n            }\n            if (node.closingBracket) {\n                processNode(node.closingBracket, offset);\n                offset = lengthAdd(offset, node.closingBracket.length);\n            }\n            else {\n                const singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\n                const closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\n                str += closingTokenText;\n            }\n        }\n        else if (node.kind === 3 /* AstNodeKind.UnexpectedClosingBracket */) {\n            // remove the bracket\n        }\n        else if (node.kind === 0 /* AstNodeKind.Text */ || node.kind === 1 /* AstNodeKind.Bracket */) {\n            str += line.substring(lengthGetColumnCountIfZeroLineCount(offset), lengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length)));\n        }\n        else if (node.kind === 4 /* AstNodeKind.List */) {\n            for (const child of node.children) {\n                processNode(child, offset);\n                offset = lengthAdd(offset, child.length);\n            }\n        }\n    }\n    processNode(node, lengthZero);\n    return str;\n}\nclass StaticTokenizerSource {\n    constructor(lines) {\n        this.lines = lines;\n        this.tokenization = {\n            getLineTokens: (lineNumber) => {\n                return this.lines[lineNumber - 1];\n            }\n        };\n    }\n    getLineCount() {\n        return this.lines.length;\n    }\n    getLineLength(lineNumber) {\n        return this.lines[lineNumber - 1].getLineContent().length;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { BaseGhostTextWidgetModel, GhostTextReplacement } from './ghostText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { inlineCompletionToGhostText } from './inlineCompletionToGhostText.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { fixBracketsInLine } from '../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { assertNever } from '../../../../base/common/types.js';\nimport { matchesSubString } from '../../../../base/common/filters.js';\nimport { getReadonlyEmptyArray } from './utils.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\n    constructor(editor, cache, commandService, languageConfigurationService, languageFeaturesService, debounceService, configurationService) {\n        super();\n        this.editor = editor;\n        this.cache = cache;\n        this.commandService = commandService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.debounceService = debounceService;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.completionSession = this._register(new MutableDisposable());\n        this.active = false;\n        this.disposed = false;\n        this.debounceValue = this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', { min: 50, max: 50 });\n        this._register(commandService.onDidExecuteCommand((e) => {\n            // These commands don't trigger onDidType.\n            const commands = new Set([\n                CoreEditingCommands.Tab.id,\n                CoreEditingCommands.DeleteLeft.id,\n                CoreEditingCommands.DeleteRight.id,\n                inlineSuggestCommitId,\n                'acceptSelectedSuggestion',\n            ]);\n            if (commands.has(e.commandId) && editor.hasTextFocus()) {\n                this.handleUserInput();\n            }\n        }));\n        this._register(this.editor.onDidType((e) => {\n            this.handleUserInput();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */ ||\n                this.session && !this.session.isValid) {\n                this.hide();\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.disposed = true;\n        }));\n        this._register(this.editor.onDidBlurEditorWidget(() => {\n            // This is a hidden setting very useful for debugging\n            if (configurationService.getValue('editor.inlineSuggest.hideOnBlur')) {\n                return;\n            }\n            this.hide();\n        }));\n    }\n    handleUserInput() {\n        if (this.session && !this.session.isValid) {\n            this.hide();\n        }\n        setTimeout(() => {\n            if (this.disposed) {\n                return;\n            }\n            // Wait for the cursor update that happens in the same iteration loop iteration\n            this.startSessionIfTriggered();\n        }, 0);\n    }\n    get session() {\n        return this.completionSession.value;\n    }\n    get ghostText() {\n        var _a;\n        return (_a = this.session) === null || _a === void 0 ? void 0 : _a.ghostText;\n    }\n    get minReservedLineCount() {\n        return this.session ? this.session.minReservedLineCount : 0;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    setActive(active) {\n        var _a;\n        this.active = active;\n        if (active) {\n            (_a = this.session) === null || _a === void 0 ? void 0 : _a.scheduleAutomaticUpdate();\n        }\n    }\n    startSessionIfTriggered() {\n        const suggestOptions = this.editor.getOption(57 /* EditorOption.inlineSuggest */);\n        if (!suggestOptions.enabled) {\n            return;\n        }\n        if (this.session && this.session.isValid) {\n            return;\n        }\n        this.trigger(InlineCompletionTriggerKind.Automatic);\n    }\n    trigger(triggerKind) {\n        if (this.completionSession.value) {\n            if (triggerKind === InlineCompletionTriggerKind.Explicit) {\n                void this.completionSession.value.ensureUpdateWithExplicitContext();\n            }\n            return;\n        }\n        this.completionSession.value = new InlineCompletionsSession(this.editor, this.editor.getPosition(), () => this.active, this.commandService, this.cache, triggerKind, this.languageConfigurationService, this.languageFeaturesService.inlineCompletionsProvider, this.debounceValue);\n        this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n    }\n    hide() {\n        this.completionSession.clear();\n        this.onDidChangeEmitter.fire();\n    }\n    commitCurrentSuggestion() {\n        var _a;\n        // Don't dispose the session, so that after committing, more suggestions are shown.\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.commitCurrentCompletion();\n    }\n    showNext() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPrevious() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.session) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nInlineCompletionsModel = __decorate([\n    __param(2, ICommandService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IConfigurationService)\n], InlineCompletionsModel);\nexport { InlineCompletionsModel };\nexport class InlineCompletionsSession extends BaseGhostTextWidgetModel {\n    constructor(editor, triggerPosition, shouldUpdate, commandService, cache, initialTriggerKind, languageConfigurationService, registry, debounce) {\n        super(editor);\n        this.triggerPosition = triggerPosition;\n        this.shouldUpdate = shouldUpdate;\n        this.commandService = commandService;\n        this.cache = cache;\n        this.initialTriggerKind = initialTriggerKind;\n        this.languageConfigurationService = languageConfigurationService;\n        this.registry = registry;\n        this.debounce = debounce;\n        this.minReservedLineCount = 0;\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateSoon = this._register(new RunOnceScheduler(() => {\n            const triggerKind = this.initialTriggerKind;\n            // All subsequent triggers are automatic.\n            this.initialTriggerKind = InlineCompletionTriggerKind.Automatic;\n            return this.update(triggerKind);\n        }, 50));\n        this.filteredCompletions = [];\n        //#region Selection\n        // We use a semantic id to track the selection even if the cache changes.\n        this.currentlySelectedCompletionId = undefined;\n        let lastCompletionItem = undefined;\n        this._register(this.onDidChange(() => {\n            var _a;\n            const currentCompletion = this.currentCompletion;\n            if (currentCompletion && currentCompletion.sourceInlineCompletion !== lastCompletionItem) {\n                lastCompletionItem = currentCompletion.sourceInlineCompletion;\n                const provider = currentCompletion.sourceProvider;\n                (_a = provider.handleItemDidShow) === null || _a === void 0 ? void 0 : _a.call(provider, currentCompletion.sourceInlineCompletions, lastCompletionItem);\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.cache.clear();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            var _a;\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                return;\n            }\n            // Ghost text depends on the cursor position\n            (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.updateRanges();\n            if (this.cache.value) {\n                this.updateFilteredInlineCompletions();\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n        this._register(this.editor.onDidChangeModelContent((e) => {\n            var _a;\n            // Call this in case `onDidChangeModelContent` calls us first.\n            (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.updateRanges();\n            this.updateFilteredInlineCompletions();\n            this.scheduleAutomaticUpdate();\n        }));\n        this._register(this.registry.onDidChange(() => {\n            this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n        }));\n        this.scheduleAutomaticUpdate();\n    }\n    updateFilteredInlineCompletions() {\n        if (!this.cache.value) {\n            this.filteredCompletions = [];\n            return;\n        }\n        const model = this.editor.getModel();\n        const cursorPosition = model.validatePosition(this.editor.getPosition());\n        this.filteredCompletions = this.cache.value.completions.filter(c => {\n            const originalValue = model.getValueInRange(c.synchronizedRange).toLowerCase();\n            const filterText = c.inlineCompletion.filterText.toLowerCase();\n            const indent = model.getLineIndentColumn(c.synchronizedRange.startLineNumber);\n            const cursorPosIndex = Math.max(0, cursorPosition.column - c.synchronizedRange.startColumn);\n            let filterTextBefore = filterText.substring(0, cursorPosIndex);\n            let filterTextAfter = filterText.substring(cursorPosIndex);\n            let originalValueBefore = originalValue.substring(0, cursorPosIndex);\n            let originalValueAfter = originalValue.substring(cursorPosIndex);\n            if (c.synchronizedRange.startColumn <= indent) {\n                // Remove indentation\n                originalValueBefore = originalValueBefore.trimStart();\n                if (originalValueBefore.length === 0) {\n                    originalValueAfter = originalValueAfter.trimStart();\n                }\n                filterTextBefore = filterTextBefore.trimStart();\n                if (filterTextBefore.length === 0) {\n                    filterTextAfter = filterTextAfter.trimStart();\n                }\n            }\n            return filterTextBefore.startsWith(originalValueBefore)\n                && matchesSubString(originalValueAfter, filterTextAfter);\n        });\n    }\n    fixAndGetIndexOfCurrentSelection() {\n        if (!this.currentlySelectedCompletionId || !this.cache.value) {\n            return 0;\n        }\n        if (this.cache.value.completions.length === 0) {\n            // don't reset the selection in this case\n            return 0;\n        }\n        const idx = this.filteredCompletions.findIndex(v => v.semanticId === this.currentlySelectedCompletionId);\n        if (idx === -1) {\n            // Reset the selection so that the selection does not jump back when it appears again\n            this.currentlySelectedCompletionId = undefined;\n            return 0;\n        }\n        return idx;\n    }\n    get currentCachedCompletion() {\n        if (!this.cache.value) {\n            return undefined;\n        }\n        return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()];\n    }\n    showNextInlineCompletion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = this.filteredCompletions || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    showPreviousInlineCompletion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = this.filteredCompletions || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + completions.length - 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    ensureUpdateWithExplicitContext() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.updateOperation.value) {\n                // Restart or wait for current update operation\n                if (this.updateOperation.value.triggerKind === InlineCompletionTriggerKind.Explicit) {\n                    yield this.updateOperation.value.promise;\n                }\n                else {\n                    yield this.update(InlineCompletionTriggerKind.Explicit);\n                }\n            }\n            else if (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.triggerKind) !== InlineCompletionTriggerKind.Explicit) {\n                // Refresh cache\n                yield this.update(InlineCompletionTriggerKind.Explicit);\n            }\n        });\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            return (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.length) || 0) > 1;\n        });\n    }\n    //#endregion\n    get ghostText() {\n        const currentCompletion = this.currentCompletion;\n        if (!currentCompletion) {\n            return undefined;\n        }\n        const cursorPosition = this.editor.getPosition();\n        if (currentCompletion.range.getEndPosition().isBefore(cursorPosition)) {\n            return undefined;\n        }\n        const mode = this.editor.getOptions().get(57 /* EditorOption.inlineSuggest */).mode;\n        const ghostText = inlineCompletionToGhostText(currentCompletion, this.editor.getModel(), mode, cursorPosition);\n        if (ghostText) {\n            if (ghostText.isEmpty()) {\n                return undefined;\n            }\n            return ghostText;\n        }\n        return new GhostTextReplacement(currentCompletion.range.startLineNumber, currentCompletion.range.startColumn, currentCompletion.range.endColumn - currentCompletion.range.startColumn, currentCompletion.insertText.split('\\n'), 0);\n    }\n    get currentCompletion() {\n        const completion = this.currentCachedCompletion;\n        if (!completion) {\n            return undefined;\n        }\n        return completion.toLiveInlineCompletion();\n    }\n    get isValid() {\n        return this.editor.getPosition().lineNumber === this.triggerPosition.lineNumber;\n    }\n    scheduleAutomaticUpdate() {\n        // Since updateSoon debounces, starvation can happen.\n        // To prevent stale cache, we clear the current update operation.\n        this.updateOperation.clear();\n        this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n    }\n    update(triggerKind) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.shouldUpdate()) {\n                return;\n            }\n            const position = this.editor.getPosition();\n            const startTime = new Date();\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.registry, position, this.editor.getModel(), { triggerKind, selectedSuggestionInfo: undefined }, token, this.languageConfigurationService);\n                    const endTime = new Date();\n                    this.debounce.update(this.editor.getModel(), endTime.getTime() - startTime.getTime());\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this.cache.setValue(this.editor, result, triggerKind);\n                this.updateFilteredInlineCompletions();\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, triggerKind);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    takeOwnership(disposable) {\n        this._register(disposable);\n    }\n    commitCurrentCompletion() {\n        const ghostText = this.ghostText;\n        if (!ghostText) {\n            // No ghost text was shown for this completion.\n            // Thus, we don't want to commit anything.\n            return;\n        }\n        const completion = this.currentCompletion;\n        if (completion) {\n            this.commit(completion);\n        }\n    }\n    commit(completion) {\n        var _a;\n        // Mark the cache as stale, but don't dispose it yet,\n        // otherwise command args might get disposed.\n        const cache = this.cache.clearAndLeak();\n        if (completion.snippetInfo) {\n            this.editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replaceMove(completion.range, ''),\n                ...completion.additionalTextEdits\n            ]);\n            this.editor.setPosition(completion.snippetInfo.range.getStartPosition());\n            (_a = SnippetController2.get(this.editor)) === null || _a === void 0 ? void 0 : _a.insert(completion.snippetInfo.snippet);\n        }\n        else {\n            this.editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replaceMove(completion.range, completion.insertText),\n                ...completion.additionalTextEdits\n            ]);\n        }\n        if (completion.command) {\n            this.commandService\n                .executeCommand(completion.command.id, ...(completion.command.arguments || []))\n                .finally(() => {\n                cache === null || cache === void 0 ? void 0 : cache.dispose();\n            })\n                .then(undefined, onUnexpectedExternalError);\n        }\n        else {\n            cache === null || cache === void 0 ? void 0 : cache.dispose();\n        }\n        this.onDidChangeEmitter.fire();\n    }\n    get commands() {\n        var _a;\n        const lists = new Set(((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.map(c => c.inlineCompletion.sourceInlineCompletions)) || []);\n        return [...lists].flatMap(l => l.commands || []);\n    }\n}\nexport class UpdateOperation {\n    constructor(promise, triggerKind) {\n        this.promise = promise;\n        this.triggerKind = triggerKind;\n    }\n    dispose() {\n        this.promise.cancel();\n    }\n}\n/**\n * The cache keeps itself in sync with the editor.\n * It also owns the completions result and disposes it when the cache is diposed.\n*/\nexport class SynchronizedInlineCompletionsCache extends Disposable {\n    constructor(completionsSource, editor, onChange, triggerKind) {\n        super();\n        this.editor = editor;\n        this.onChange = onChange;\n        this.triggerKind = triggerKind;\n        this.isDisposing = false;\n        const decorationIds = editor.changeDecorations((changeAccessor) => {\n            return changeAccessor.deltaDecorations([], completionsSource.items.map(i => ({\n                range: i.range,\n                options: {\n                    description: 'inline-completion-tracking-range'\n                },\n            })));\n        });\n        this._register(toDisposable(() => {\n            this.isDisposing = true;\n            editor.removeDecorations(decorationIds);\n        }));\n        this.completions = completionsSource.items.map((c, idx) => new CachedInlineCompletion(c, decorationIds[idx]));\n        this._register(editor.onDidChangeModelContent(() => {\n            this.updateRanges();\n        }));\n        this._register(completionsSource);\n    }\n    updateRanges() {\n        if (this.isDisposing) {\n            return;\n        }\n        let hasChanged = false;\n        const model = this.editor.getModel();\n        for (const c of this.completions) {\n            const newRange = model.getDecorationRange(c.decorationId);\n            if (!newRange) {\n                onUnexpectedError(new Error('Decoration has no range'));\n                continue;\n            }\n            if (!c.synchronizedRange.equalsRange(newRange)) {\n                hasChanged = true;\n                c.synchronizedRange = newRange;\n            }\n        }\n        if (hasChanged) {\n            this.onChange();\n        }\n    }\n}\nclass CachedInlineCompletion {\n    constructor(inlineCompletion, decorationId) {\n        this.inlineCompletion = inlineCompletion;\n        this.decorationId = decorationId;\n        this.semanticId = JSON.stringify({\n            text: this.inlineCompletion.insertText,\n            abbreviation: this.inlineCompletion.filterText,\n            startLine: this.inlineCompletion.range.startLineNumber,\n            startColumn: this.inlineCompletion.range.startColumn,\n            command: this.inlineCompletion.command\n        });\n        this.synchronizedRange = inlineCompletion.range;\n    }\n    toLiveInlineCompletion() {\n        return {\n            insertText: this.inlineCompletion.insertText,\n            range: this.synchronizedRange,\n            command: this.inlineCompletion.command,\n            sourceProvider: this.inlineCompletion.sourceProvider,\n            sourceInlineCompletions: this.inlineCompletion.sourceInlineCompletions,\n            sourceInlineCompletion: this.inlineCompletion.sourceInlineCompletion,\n            snippetInfo: this.inlineCompletion.snippetInfo,\n            filterText: this.inlineCompletion.filterText,\n            additionalTextEdits: this.inlineCompletion.additionalTextEdits,\n        };\n    }\n}\nexport function provideInlineCompletions(registry, position, model, context, token = CancellationToken.None, languageConfigurationService) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const defaultReplaceRange = getDefaultRange(position, model);\n        const providers = registry.all(model);\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            const completions = yield Promise.resolve(provider.provideInlineCompletions(model, position, context, token)).catch(onUnexpectedExternalError);\n            return ({\n                completions,\n                provider,\n                dispose: () => {\n                    if (completions) {\n                        provider.freeInlineCompletions(completions);\n                    }\n                }\n            });\n        })));\n        const itemsByHash = new Map();\n        for (const result of results) {\n            const completions = result.completions;\n            if (!completions) {\n                continue;\n            }\n            for (const item of completions.items) {\n                let range = item.range ? Range.lift(item.range) : defaultReplaceRange;\n                if (range.startLineNumber !== range.endLineNumber) {\n                    // Ignore invalid ranges.\n                    continue;\n                }\n                let insertText;\n                let snippetInfo;\n                if (typeof item.insertText === 'string') {\n                    insertText = item.insertText;\n                    if (languageConfigurationService && item.completeBracketPairs) {\n                        insertText = closeBrackets(insertText, range.getStartPosition(), model, languageConfigurationService);\n                        // Modify range depending on if brackets are added or removed\n                        const diff = insertText.length - item.insertText.length;\n                        if (diff !== 0) {\n                            range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n                        }\n                    }\n                    snippetInfo = undefined;\n                }\n                else if ('snippet' in item.insertText) {\n                    const snippet = new SnippetParser().parse(item.insertText.snippet);\n                    insertText = snippet.toString();\n                    snippetInfo = {\n                        snippet: item.insertText.snippet,\n                        range: range\n                    };\n                }\n                else {\n                    assertNever(item.insertText);\n                }\n                const trackedItem = ({\n                    insertText,\n                    snippetInfo,\n                    range,\n                    command: item.command,\n                    sourceProvider: result.provider,\n                    sourceInlineCompletions: completions,\n                    sourceInlineCompletion: item,\n                    filterText: item.filterText || insertText,\n                    additionalTextEdits: item.additionalTextEdits || getReadonlyEmptyArray()\n                });\n                itemsByHash.set(JSON.stringify({ insertText, range: item.range }), trackedItem);\n            }\n        }\n        return {\n            items: [...itemsByHash.values()],\n            dispose: () => {\n                for (const result of results) {\n                    result.dispose();\n                }\n            },\n        };\n    });\n}\nfunction getDefaultRange(position, model) {\n    const word = model.getWordAtPosition(position);\n    const maxColumn = model.getLineMaxColumn(position.lineNumber);\n    // By default, always replace up until the end of the current line.\n    // This default might be subject to change!\n    return word\n        ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn)\n        : Range.fromPositions(position, position.with(undefined, maxColumn));\n}\nfunction closeBrackets(text, position, model, languageConfigurationService) {\n    const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\n    const newLine = lineStart + text;\n    const newTokens = model.tokenization.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\n    const slicedTokens = newTokens === null || newTokens === void 0 ? void 0 : newTokens.sliceAndInflate(position.column - 1, newLine.length, 0);\n    if (!slicedTokens) {\n        return text;\n    }\n    const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\n    return newText;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(113 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(113 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            if (bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.bracketText;\n                // wait for closing\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.getClosedBrackets()[0].bracketText;\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            if (!bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.getClosedBrackets()[0].bracketText;\n                // wait for opening\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.bracketText;\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    const list = ranges.get(key);\n                    if (list) {\n                        const closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(108 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        const res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* Refilter.All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy, noSelect) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n        this.noSelect = noSelect;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(108 /* EditorOption.suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* State.Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g.  + u makes  but just  cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(83 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(111 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, noSelect: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* State.Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* State.Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* State.Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* State.Idle */ && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* State.Idle */ && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* State.Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(81 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* State.Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(81 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false, noSelect: false });\n        }, this._editor.getOption(82 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* State.Auto */, false, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing, noFilter) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* State.Auto */ : 1 /* State.Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* CompletionTriggerKind.Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, !noFilter ? itemKindFilter : new Set(), onlyFrom, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(108 /* EditorOption.suggest */), this._editor.getOption(103 /* EditorOption.snippetSuggestions */), undefined, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(108 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (const provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false, triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                noSelect: this._context.noSelect,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(110 /* EditorOption.suggestLineHeight */) || this._editor.getOption(46 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","//#endregion\n//#region Utilities\nexport var FileKind;\n(function (FileKind) {\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n})(FileKind || (FileKind = {}));\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\nexport function getIconClasses(modelService, languageService, resource, fileKind) {\n    // we always set these base classes even if we do not have a path\n    const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n    if (resource) {\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\n        let name;\n        if (resource.scheme === Schemas.data) {\n            const metadata = DataUri.parseMetaData(resource);\n            name = metadata.get(DataUri.META_DATA_LABEL);\n        }\n        else {\n            const match = resource.path.match(fileIconDirectoryRegex);\n            if (match) {\n                name = cssEscape(match[2].toLowerCase());\n                if (match[1]) {\n                    classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\n                }\n            }\n            else {\n                name = cssEscape(resource.authority.toLowerCase());\n            }\n        }\n        // Folders\n        if (fileKind === FileKind.FOLDER) {\n            classes.push(`${name}-name-folder-icon`);\n        }\n        // Files\n        else {\n            // Name & Extension(s)\n            if (name) {\n                classes.push(`${name}-name-file-icon`);\n                classes.push(`name-file-icon`); // extra segment to increase file-name score\n                // Avoid doing an explosive combination of extensions for very long filenames\n                // (most file systems do not allow files > 255 length) with lots of `.` characters\n                // https://github.com/microsoft/vscode/issues/116199\n                if (name.length <= 255) {\n                    const dotSegments = name.split('.');\n                    for (let i = 1; i < dotSegments.length; i++) {\n                        classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\n                    }\n                }\n                classes.push(`ext-file-icon`); // extra segment to increase file-ext score\n            }\n            // Detected Mode\n            const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\n            if (detectedLanguageId) {\n                classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\n            }\n        }\n    }\n    return classes;\n}\nfunction detectLanguageId(modelService, languageService, resource) {\n    if (!resource) {\n        return null; // we need a resource at least\n    }\n    let languageId = null;\n    // Data URI: check for encoded metadata\n    if (resource.scheme === Schemas.data) {\n        const metadata = DataUri.parseMetaData(resource);\n        const mime = metadata.get(DataUri.META_DATA_MIME);\n        if (mime) {\n            languageId = languageService.getLanguageIdByMimeType(mime);\n        }\n    }\n    // Any other URI: check for model if existing\n    else {\n        const model = modelService.getModel(resource);\n        if (model) {\n            languageId = model.getLanguageId();\n        }\n    }\n    // only take if the language id is specific (aka no just plain text)\n    if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\n        return languageId;\n    }\n    // otherwise fallback to path based detection\n    return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n}\nexport function cssEscape(str) {\n    return str.replace(/[\\11\\12\\14\\15\\40]/g, '/'); // HTML class names can not contain certain whitespace characters, use / instead, which doesn't exist in file names.\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            data.root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(109 /* EditorOption.suggestFontSize */) || e.hasChanged(110 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(108 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n        if (selectionIndex >= 0) {\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus([selectionIndex]);\n        }\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.shy) {\n                return;\n            }\n            let index = -1;\n            if (!e.noSelect) {\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false, noSelect: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(108 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter, noSelect) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false, noSelect: noSelect !== null && noSelect !== void 0 ? noSelect : false }, false, onlyFrom, undefined, noFilter);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true, noSelect: false });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        let noSelect;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n            if (args.noSelection === true) {\n                noSelect = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined, noSelect);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { compareBy, findMaxBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetSession } from '../../snippet/browser/snippetSession.js';\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\nimport { minimizeInlineCompletion, normalizedInlineCompletionsEquals } from './inlineCompletionToGhostText.js';\nexport class SuggestWidgetInlineCompletionProvider extends Disposable {\n    constructor(editor, suggestControllerPreselector) {\n        super();\n        this.editor = editor;\n        this.suggestControllerPreselector = suggestControllerPreselector;\n        this.isSuggestWidgetVisible = false;\n        this.isShiftKeyPressed = false;\n        this._isActive = false;\n        this._currentSuggestItemInfo = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        // This delay fixes a suggest widget issue when typing \".\" immediately restarts the suggestion session.\n        this.setInactiveDelayed = this._register(new RunOnceScheduler(() => {\n            if (!this.isSuggestWidgetVisible) {\n                if (this._isActive) {\n                    this._isActive = false;\n                    this.onDidChangeEmitter.fire();\n                }\n            }\n        }, 100));\n        // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\n        this._register(editor.onKeyDown(e => {\n            if (e.shiftKey && !this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = true;\n                this.update(this._isActive);\n            }\n        }));\n        this._register(editor.onKeyUp(e => {\n            if (e.shiftKey && this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = false;\n                this.update(this._isActive);\n            }\n        }));\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            this._register(suggestController.registerSelector({\n                priority: 100,\n                select: (model, pos, suggestItems) => {\n                    const textModel = this.editor.getModel();\n                    const normalizedItemToPreselect = minimizeInlineCompletion(textModel, this.suggestControllerPreselector());\n                    if (!normalizedItemToPreselect) {\n                        return -1;\n                    }\n                    const position = Position.lift(pos);\n                    const candidates = suggestItems\n                        .map((suggestItem, index) => {\n                        const inlineSuggestItem = suggestionToSuggestItemInfo(suggestController, position, suggestItem, this.isShiftKeyPressed);\n                        const normalizedSuggestItem = minimizeInlineCompletion(textModel, inlineSuggestItem === null || inlineSuggestItem === void 0 ? void 0 : inlineSuggestItem.normalizedInlineCompletion);\n                        if (!normalizedSuggestItem) {\n                            return undefined;\n                        }\n                        const valid = rangeStartsWith(normalizedItemToPreselect.range, normalizedSuggestItem.range) &&\n                            normalizedItemToPreselect.insertText.startsWith(normalizedSuggestItem.insertText);\n                        return { index, valid, prefixLength: normalizedSuggestItem.insertText.length, suggestItem };\n                    })\n                        .filter(item => item && item.valid);\n                    const result = findMaxBy(candidates, compareBy(s => s.prefixLength, numberComparator));\n                    return result ? result.index : -1;\n                }\n            }));\n            let isBoundToSuggestWidget = false;\n            const bindToSuggestWidget = () => {\n                if (isBoundToSuggestWidget) {\n                    return;\n                }\n                isBoundToSuggestWidget = true;\n                this._register(suggestController.widget.value.onDidShow(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n                this._register(suggestController.widget.value.onDidHide(() => {\n                    this.isSuggestWidgetVisible = false;\n                    this.setInactiveDelayed.schedule();\n                    this.update(this._isActive);\n                }));\n                this._register(suggestController.widget.value.onDidFocus(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n            };\n            this._register(Event.once(suggestController.model.onDidTrigger)(e => {\n                bindToSuggestWidget();\n            }));\n        }\n        this.update(this._isActive);\n    }\n    /**\n     * Returns undefined if the suggest widget is not active.\n    */\n    get state() {\n        if (!this._isActive) {\n            return undefined;\n        }\n        return { selectedItem: this._currentSuggestItemInfo };\n    }\n    update(newActive) {\n        const newInlineCompletion = this.getSuggestItemInfo();\n        let shouldFire = false;\n        if (!suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\n            this._currentSuggestItemInfo = newInlineCompletion;\n            shouldFire = true;\n        }\n        if (this._isActive !== newActive) {\n            this._isActive = newActive;\n            shouldFire = true;\n        }\n        if (shouldFire) {\n            this.onDidChangeEmitter.fire();\n        }\n    }\n    getSuggestItemInfo() {\n        const suggestController = SuggestController.get(this.editor);\n        if (!suggestController) {\n            return undefined;\n        }\n        if (!this.isSuggestWidgetVisible) {\n            return undefined;\n        }\n        const focusedItem = suggestController.widget.value.getFocusedItem();\n        if (!focusedItem) {\n            return undefined;\n        }\n        // TODO: item.isResolved\n        return suggestionToSuggestItemInfo(suggestController, this.editor.getPosition(), focusedItem.item, this.isShiftKeyPressed);\n    }\n    stopForceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.stopForceRenderingAbove();\n        }\n    }\n    forceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.forceRenderingAbove();\n        }\n    }\n}\nexport function rangeStartsWith(rangeToTest, prefix) {\n    return (prefix.startLineNumber === rangeToTest.startLineNumber &&\n        prefix.startColumn === rangeToTest.startColumn &&\n        (prefix.endLineNumber < rangeToTest.endLineNumber ||\n            (prefix.endLineNumber === rangeToTest.endLineNumber &&\n                prefix.endColumn <= rangeToTest.endColumn)));\n}\nfunction suggestItemInfoEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.completionItemKind === b.completionItemKind &&\n        a.isSnippetText === b.isSnippetText &&\n        normalizedInlineCompletionsEquals(a.normalizedInlineCompletion, b.normalizedInlineCompletion);\n}\nfunction suggestionToSuggestItemInfo(suggestController, position, item, toggleMode) {\n    // additionalTextEdits might not be resolved here, this could be problematic.\n    if (Array.isArray(item.completion.additionalTextEdits) && item.completion.additionalTextEdits.length > 0) {\n        // cannot represent additional text edits. TODO: Now we can.\n        return {\n            completionItemKind: item.completion.kind,\n            isSnippetText: false,\n            normalizedInlineCompletion: {\n                // Dummy element, so that space is reserved, but no text is shown\n                range: Range.fromPositions(position, position),\n                insertText: '',\n                filterText: '',\n                snippetInfo: undefined,\n                additionalTextEdits: [],\n            },\n        };\n    }\n    let { insertText } = item.completion;\n    let isSnippetText = false;\n    if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) {\n        const snippet = new SnippetParser().parse(insertText);\n        const model = suggestController.editor.getModel();\n        // Ignore snippets that are too large.\n        // Adjust whitespace is expensive for them.\n        if (snippet.children.length > 100) {\n            return undefined;\n        }\n        SnippetSession.adjustWhitespace(model, position, snippet, true, true);\n        insertText = snippet.toString();\n        isSnippetText = true;\n    }\n    const info = suggestController.getOverwriteInfo(item, toggleMode);\n    return {\n        isSnippetText,\n        completionItemKind: item.completion.kind,\n        normalizedInlineCompletion: {\n            insertText: insertText,\n            filterText: insertText,\n            range: Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))),\n            snippetInfo: undefined,\n            additionalTextEdits: [],\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { BaseGhostTextWidgetModel, GhostText } from './ghostText.js';\nimport { provideInlineCompletions, UpdateOperation } from './inlineCompletionsModel.js';\nimport { inlineCompletionToGhostText, minimizeInlineCompletion } from './inlineCompletionToGhostText.js';\nimport { SuggestWidgetInlineCompletionProvider } from './suggestWidgetInlineCompletionProvider.js';\nlet SuggestWidgetPreviewModel = class SuggestWidgetPreviewModel extends BaseGhostTextWidgetModel {\n    constructor(editor, cache, languageFeaturesService) {\n        super(editor);\n        this.cache = cache;\n        this.languageFeaturesService = languageFeaturesService;\n        this.suggestionInlineCompletionSource = this._register(new SuggestWidgetInlineCompletionProvider(this.editor, \n        // Use the first cache item (if any) as preselection.\n        () => { var _a, _b; return (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion(); }));\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateCacheSoon = this._register(new RunOnceScheduler(() => this.updateCache(), 50));\n        this.minReservedLineCount = 0;\n        this._register(this.suggestionInlineCompletionSource.onDidChange(() => {\n            if (!this.editor.hasModel()) {\n                // onDidChange might be called when calling setModel on the editor, before we are disposed.\n                return;\n            }\n            this.updateCacheSoon.schedule();\n            const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n            if (!suggestWidgetState) {\n                this.minReservedLineCount = 0;\n            }\n            const newGhostText = this.ghostText;\n            if (newGhostText) {\n                this.minReservedLineCount = Math.max(this.minReservedLineCount, sum(newGhostText.parts.map(p => p.lines.length - 1)));\n            }\n            if (this.minReservedLineCount >= 1) {\n                this.suggestionInlineCompletionSource.forceRenderingAbove();\n            }\n            else {\n                this.suggestionInlineCompletionSource.stopForceRenderingAbove();\n            }\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.cache.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            this.minReservedLineCount = 0;\n            this.updateCacheSoon.schedule();\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(toDisposable(() => this.suggestionInlineCompletionSource.stopForceRenderingAbove()));\n    }\n    get isActive() {\n        return this.suggestionInlineCompletionSource.state !== undefined;\n    }\n    isSuggestionPreviewEnabled() {\n        const suggestOptions = this.editor.getOption(108 /* EditorOption.suggest */);\n        return suggestOptions.preview;\n    }\n    updateCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = this.suggestionInlineCompletionSource.state;\n            if (!state || !state.selectedItem) {\n                return;\n            }\n            const info = {\n                text: state.selectedItem.normalizedInlineCompletion.insertText,\n                range: state.selectedItem.normalizedInlineCompletion.range,\n                isSnippetText: state.selectedItem.isSnippetText,\n                completionKind: state.selectedItem.completionItemKind,\n            };\n            const position = this.editor.getPosition();\n            if (state.selectedItem.isSnippetText ||\n                state.selectedItem.completionItemKind === 27 /* CompletionItemKind.Snippet */ ||\n                state.selectedItem.completionItemKind === 20 /* CompletionItemKind.File */ ||\n                state.selectedItem.completionItemKind === 23 /* CompletionItemKind.Folder */) {\n                // Don't ask providers for these types of suggestions.\n                this.cache.clear();\n                return;\n            }\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.editor.getModel(), { triggerKind: InlineCompletionTriggerKind.Automatic, selectedSuggestionInfo: info }, token);\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    result.dispose();\n                    return;\n                }\n                this.cache.setValue(this.editor, result, InlineCompletionTriggerKind.Automatic);\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, InlineCompletionTriggerKind.Automatic);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    get ghostText() {\n        var _a, _b, _c;\n        const isSuggestionPreviewEnabled = this.isSuggestionPreviewEnabled();\n        const model = this.editor.getModel();\n        const augmentedCompletion = minimizeInlineCompletion(model, (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion());\n        const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n        const suggestInlineCompletion = minimizeInlineCompletion(model, (_c = suggestWidgetState === null || suggestWidgetState === void 0 ? void 0 : suggestWidgetState.selectedItem) === null || _c === void 0 ? void 0 : _c.normalizedInlineCompletion);\n        const isAugmentedCompletionValid = augmentedCompletion\n            && suggestInlineCompletion\n            && augmentedCompletion.insertText.startsWith(suggestInlineCompletion.insertText)\n            && augmentedCompletion.range.equalsRange(suggestInlineCompletion.range);\n        if (!isSuggestionPreviewEnabled && !isAugmentedCompletionValid) {\n            return undefined;\n        }\n        // If the augmented completion is not valid and there is no suggest inline completion, we still show the augmented completion.\n        const finalCompletion = isAugmentedCompletionValid ? augmentedCompletion : (suggestInlineCompletion || augmentedCompletion);\n        const inlineCompletionPreviewLength = isAugmentedCompletionValid ? finalCompletion.insertText.length - suggestInlineCompletion.insertText.length : 0;\n        const newGhostText = this.toGhostText(finalCompletion, inlineCompletionPreviewLength);\n        return newGhostText;\n    }\n    toGhostText(completion, inlineCompletionPreviewLength) {\n        const mode = this.editor.getOptions().get(108 /* EditorOption.suggest */).previewMode;\n        return completion\n            ? (inlineCompletionToGhostText(completion, this.editor.getModel(), mode, this.editor.getPosition(), inlineCompletionPreviewLength) ||\n                // Show an invisible ghost text to reserve space\n                new GhostText(completion.range.endLineNumber, [], this.minReservedLineCount))\n            : undefined;\n    }\n};\nSuggestWidgetPreviewModel = __decorate([\n    __param(2, ILanguageFeaturesService)\n], SuggestWidgetPreviewModel);\nexport { SuggestWidgetPreviewModel };\nfunction sum(arr) {\n    return arr.reduce((a, b) => a + b, 0);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { InlineCompletionsModel, SynchronizedInlineCompletionsCache } from './inlineCompletionsModel.js';\nimport { SuggestWidgetPreviewModel } from './suggestWidgetPreviewModel.js';\nimport { createDisposableRef } from './utils.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport class DelegatingModel extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.hasCachedGhostText = false;\n        this.currentModelRef = this._register(new MutableDisposable());\n    }\n    get targetModel() {\n        var _a;\n        return (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object;\n    }\n    setTargetModel(model) {\n        var _a;\n        if (((_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === model) {\n            return;\n        }\n        this.currentModelRef.clear();\n        this.currentModelRef.value = model ? createDisposableRef(model, model.onDidChange(() => {\n            this.hasCachedGhostText = false;\n            this.onDidChangeEmitter.fire();\n        })) : undefined;\n        this.hasCachedGhostText = false;\n        this.onDidChangeEmitter.fire();\n    }\n    get ghostText() {\n        var _a, _b;\n        if (!this.hasCachedGhostText) {\n            this.cachedGhostText = (_b = (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === null || _b === void 0 ? void 0 : _b.ghostText;\n            this.hasCachedGhostText = true;\n        }\n        return this.cachedGhostText;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.targetModel) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    get minReservedLineCount() {\n        return this.targetModel ? this.targetModel.minReservedLineCount : 0;\n    }\n}\n/**\n * A ghost text model that is both driven by inline completions and the suggest widget.\n*/\nlet GhostTextModel = class GhostTextModel extends DelegatingModel {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.sharedCache = this._register(new SharedInlineCompletionCache());\n        this.suggestWidgetAdapterModel = this._register(this.instantiationService.createInstance(SuggestWidgetPreviewModel, this.editor, this.sharedCache));\n        this.inlineCompletionsModel = this._register(this.instantiationService.createInstance(InlineCompletionsModel, this.editor, this.sharedCache));\n        this._register(this.suggestWidgetAdapterModel.onDidChange(() => {\n            this.updateModel();\n        }));\n        this.updateModel();\n    }\n    get activeInlineCompletionsModel() {\n        if (this.targetModel === this.inlineCompletionsModel) {\n            return this.inlineCompletionsModel;\n        }\n        return undefined;\n    }\n    updateModel() {\n        this.setTargetModel(this.suggestWidgetAdapterModel.isActive\n            ? this.suggestWidgetAdapterModel\n            : this.inlineCompletionsModel);\n        this.inlineCompletionsModel.setActive(this.targetModel === this.inlineCompletionsModel);\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        const ghostText = (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText;\n        if (ghostText) {\n            return ghostText.parts.some(p => hoverRange.containsPosition(new Position(ghostText.lineNumber, p.column)));\n        }\n        return false;\n    }\n    triggerInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.trigger(InlineCompletionTriggerKind.Explicit);\n    }\n    commitInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.commitCurrentSuggestion();\n    }\n    hideInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showNext();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showPrevious();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextModel = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextModel);\nexport { GhostTextModel };\nexport class SharedInlineCompletionCache extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.cache = this._register(new MutableDisposable());\n    }\n    get value() {\n        return this.cache.value;\n    }\n    setValue(editor, completionsSource, triggerKind) {\n        this.cache.value = new SynchronizedInlineCompletionsCache(completionsSource, editor, () => this.onDidChangeEmitter.fire(), triggerKind);\n    }\n    clearAndLeak() {\n        return this.cache.clearAndLeak();\n    }\n    clear() {\n        this.cache.clear();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './ghostText.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ghostTextBackground, ghostTextBorder, ghostTextForeground } from '../../../common/core/editorColorRegistry.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { GhostTextReplacement } from './ghostText.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('editorGhostText', { createHTML: value => value });\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\n    constructor(editor, model, instantiationService, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.instantiationService = instantiationService;\n        this.languageService = languageService;\n        this.disposed = false;\n        this.partsWidget = this._register(this.instantiationService.createInstance(DecorationsWidget, this.editor));\n        this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec));\n        this.viewMoreContentWidget = undefined;\n        this.replacementDecoration = this._register(new DisposableDecorations(this.editor));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(29 /* EditorOption.disableMonospaceOptimizations */)\n                || e.hasChanged(107 /* EditorOption.stopRenderingLineAfter */)\n                || e.hasChanged(90 /* EditorOption.renderWhitespace */)\n                || e.hasChanged(85 /* EditorOption.renderControlCharacters */)\n                || e.hasChanged(47 /* EditorOption.fontLigatures */)\n                || e.hasChanged(46 /* EditorOption.fontInfo */)\n                || e.hasChanged(61 /* EditorOption.lineHeight */)) {\n                this.update();\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            this.disposed = true;\n            this.update();\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }));\n        this._register(model.onDidChange(() => {\n            this.update();\n        }));\n        this.update();\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        return (this.additionalLinesWidget.viewZoneId === viewZoneId);\n    }\n    update() {\n        var _a;\n        const ghostText = this.model.ghostText;\n        if (!this.editor.hasModel() || !ghostText || this.disposed) {\n            this.partsWidget.clear();\n            this.additionalLinesWidget.clear();\n            this.replacementDecoration.clear();\n            return;\n        }\n        const inlineTexts = new Array();\n        const additionalLines = new Array();\n        function addToAdditionalLines(lines, className) {\n            if (additionalLines.length > 0) {\n                const lastLine = additionalLines[additionalLines.length - 1];\n                if (className) {\n                    lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n                }\n                lastLine.content += lines[0];\n                lines = lines.slice(1);\n            }\n            for (const line of lines) {\n                additionalLines.push({\n                    content: line,\n                    decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n                });\n            }\n        }\n        if (ghostText instanceof GhostTextReplacement) {\n            this.replacementDecoration.setDecorations([\n                {\n                    range: new Range(ghostText.lineNumber, ghostText.columnStart, ghostText.lineNumber, ghostText.columnStart + ghostText.length),\n                    options: {\n                        inlineClassName: 'inline-completion-text-to-replace',\n                        description: 'GhostTextReplacement'\n                    }\n                },\n            ]);\n        }\n        else {\n            this.replacementDecoration.setDecorations([]);\n        }\n        const textBufferLine = this.editor.getModel().getLineContent(ghostText.lineNumber);\n        let hiddenTextStartColumn = undefined;\n        let lastIdx = 0;\n        for (const part of ghostText.parts) {\n            let lines = part.lines;\n            if (hiddenTextStartColumn === undefined) {\n                inlineTexts.push({\n                    column: part.column,\n                    text: lines[0],\n                    preview: part.preview,\n                });\n                lines = lines.slice(1);\n            }\n            else {\n                addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n            }\n            if (lines.length > 0) {\n                addToAdditionalLines(lines, 'ghost-text');\n                if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n                    hiddenTextStartColumn = part.column;\n                }\n            }\n            lastIdx = part.column - 1;\n        }\n        if (hiddenTextStartColumn !== undefined) {\n            addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n        }\n        this.partsWidget.setParts(ghostText.lineNumber, inlineTexts, hiddenTextStartColumn !== undefined ? { column: hiddenTextStartColumn, length: textBufferLine.length + 1 - hiddenTextStartColumn } : undefined);\n        this.additionalLinesWidget.updateLines(ghostText.lineNumber, additionalLines, ghostText.additionalReservedLineCount);\n        if (0 < 0) {\n            // Not supported at the moment, condition is always false.\n            this.viewMoreContentWidget = this.renderViewMoreLines(new Position(ghostText.lineNumber, this.editor.getModel().getLineMaxColumn(ghostText.lineNumber)), '', 0);\n        }\n        else {\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }\n    }\n    renderViewMoreLines(position, firstLineText, remainingLinesLength) {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const domNode = document.createElement('div');\n        domNode.className = 'suggest-preview-additional-widget';\n        applyFontInfo(domNode, fontInfo);\n        const spacer = document.createElement('span');\n        spacer.className = 'content-spacer';\n        spacer.append(firstLineText);\n        domNode.append(spacer);\n        const newline = document.createElement('span');\n        newline.className = 'content-newline suggest-preview-text';\n        newline.append('  ');\n        domNode.append(newline);\n        const disposableStore = new DisposableStore();\n        const button = document.createElement('div');\n        button.className = 'button suggest-preview-text';\n        button.append(`+${remainingLinesLength} lines`);\n        disposableStore.add(dom.addStandardDisposableListener(button, 'mousedown', (e) => {\n            var _a;\n            (_a = this.model) === null || _a === void 0 ? void 0 : _a.setExpanded(true);\n            e.preventDefault();\n            this.editor.focus();\n        }));\n        domNode.append(button);\n        return new ViewMoreLinesContentWidget(this.editor, position, domNode, disposableStore);\n    }\n};\nGhostTextWidget = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ILanguageService)\n], GhostTextWidget);\nexport { GhostTextWidget };\nclass DisposableDecorations {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n    }\n    setDecorations(decorations) {\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, decorations);\n        });\n    }\n    clear() {\n        this.setDecorations([]);\n    }\n    dispose() {\n        this.clear();\n    }\n}\nclass DecorationsWidget {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n    }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, []);\n        });\n    }\n    setParts(lineNumber, parts, hiddenText) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const hiddenTextDecorations = new Array();\n        if (hiddenText) {\n            hiddenTextDecorations.push({\n                range: Range.fromPositions(new Position(lineNumber, hiddenText.column), new Position(lineNumber, hiddenText.column + hiddenText.length)),\n                options: {\n                    inlineClassName: 'ghost-text-hidden',\n                    description: 'ghost-text-hidden',\n                }\n            });\n        }\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, parts.map(p => {\n                return ({\n                    range: Range.fromPositions(new Position(lineNumber, p.column)),\n                    options: {\n                        description: 'ghost-text',\n                        after: { content: p.text, inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration', cursorStops: InjectedTextCursorStops.Left },\n                        showIfCollapsed: true,\n                    }\n                });\n            }).concat(hiddenTextDecorations));\n        });\n    }\n}\nclass AdditionalLinesWidget {\n    constructor(editor, languageIdCodec) {\n        this.editor = editor;\n        this.languageIdCodec = languageIdCodec;\n        this._viewZoneId = undefined;\n    }\n    get viewZoneId() { return this._viewZoneId; }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n        });\n    }\n    updateLines(lineNumber, additionalLines, minReservedLineCount) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const { tabSize } = textModel.getOptions();\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n            const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\n            if (heightInLines > 0) {\n                const domNode = document.createElement('div');\n                renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\n                this._viewZoneId = changeAccessor.addZone({\n                    afterLineNumber: lineNumber,\n                    heightInLines: heightInLines,\n                    domNode,\n                    afterColumnAffinity: 1 /* PositionAffinity.Right */\n                });\n            }\n        });\n    }\n}\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\n    const disableMonospaceOptimizations = opts.get(29 /* EditorOption.disableMonospaceOptimizations */);\n    const stopRenderingLineAfter = opts.get(107 /* EditorOption.stopRenderingLineAfter */);\n    // To avoid visual confusion, we don't want to render visible whitespace\n    const renderWhitespace = 'none';\n    const renderControlCharacters = opts.get(85 /* EditorOption.renderControlCharacters */);\n    const fontLigatures = opts.get(47 /* EditorOption.fontLigatures */);\n    const fontInfo = opts.get(46 /* EditorOption.fontInfo */);\n    const lineHeight = opts.get(61 /* EditorOption.lineHeight */);\n    const sb = createStringBuilder(10000);\n    sb.appendASCIIString('<div class=\"suggest-preview-text\">');\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const lineData = lines[i];\n        const line = lineData.content;\n        sb.appendASCIIString('<div class=\"view-line');\n        sb.appendASCIIString('\" style=\"top:');\n        sb.appendASCIIString(String(i * lineHeight));\n        sb.appendASCIIString('px;width:1000000px;\">');\n        const isBasicASCII = strings.isBasicASCII(line);\n        const containsRTL = strings.containsRTL(line);\n        const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\n        renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\n        sb.appendASCIIString('</div>');\n    }\n    sb.appendASCIIString('</div>');\n    applyFontInfo(domNode, fontInfo);\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n}\nclass ViewMoreLinesContentWidget extends Disposable {\n    constructor(editor, position, domNode, disposableStore) {\n        super();\n        this.editor = editor;\n        this.position = position;\n        this.domNode = domNode;\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = false;\n        this._register(disposableStore);\n        this._register(toDisposable(() => {\n            this.editor.removeContentWidget(this);\n        }));\n        this.editor.addContentWidget(this);\n    }\n    getId() {\n        return 'editor.widget.viewMoreLinesWidget';\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: this.position,\n            preference: [0 /* ContentWidgetPositionPreference.EXACT */]\n        };\n    }\n}\nregisterThemingParticipant((theme, collector) => {\n    const foreground = theme.getColor(ghostTextForeground);\n    if (foreground) {\n        // `!important` ensures that other decorations don't cause a style conflict (#132017).\n        collector.addRule(`.monaco-editor .ghost-text-decoration { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${foreground.toString()} !important; }`);\n    }\n    const background = theme.getColor(ghostTextBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${background.toString()}; }`);\n    }\n    const border = theme.getColor(ghostTextBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${border}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { firstNonWhitespaceIndex } from '../../../../base/common/strings.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { GhostTextModel } from './ghostTextModel.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nlet GhostTextController = class GhostTextController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.triggeredExplicitly = false;\n        this.activeController = this._register(new MutableDisposable());\n        this.activeModelDidChangeEmitter = this._register(new Emitter());\n        this._register(this.editor.onDidChangeModel(() => {\n            this.updateModelController();\n        }));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                this.updateModelController();\n            }\n            if (e.hasChanged(57 /* EditorOption.inlineSuggest */)) {\n                this.updateModelController();\n            }\n        }));\n        this.updateModelController();\n    }\n    static get(editor) {\n        return editor.getContribution(GhostTextController.ID);\n    }\n    get activeModel() {\n        var _a;\n        return (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.model;\n    }\n    // Don't call this method when not necessary. It will recreate the activeController.\n    updateModelController() {\n        const suggestOptions = this.editor.getOption(108 /* EditorOption.suggest */);\n        const inlineSuggestOptions = this.editor.getOption(57 /* EditorOption.inlineSuggest */);\n        this.activeController.value = undefined;\n        // ActiveGhostTextController is only created if one of those settings is set or if the inline completions are triggered explicitly.\n        this.activeController.value =\n            this.editor.hasModel() && (suggestOptions.preview || inlineSuggestOptions.enabled || this.triggeredExplicitly)\n                ? this.instantiationService.createInstance(ActiveGhostTextController, this.editor)\n                : undefined;\n        this.activeModelDidChangeEmitter.fire();\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        return ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.shouldShowHoverAt(hoverRange)) || false;\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        var _a, _b;\n        return ((_b = (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.widget) === null || _b === void 0 ? void 0 : _b.shouldShowHoverAtViewZone(viewZoneId)) || false;\n    }\n    trigger() {\n        var _a;\n        this.triggeredExplicitly = true;\n        if (!this.activeController.value) {\n            this.updateModelController();\n        }\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.triggerInlineCompletion();\n    }\n    commit() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.commitInlineCompletion();\n    }\n    hide() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hideInlineCompletion();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextController.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, nls.localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\nGhostTextController.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, nls.localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\nGhostTextController.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, nls.localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\nGhostTextController.ID = 'editor.contrib.ghostTextController';\nGhostTextController = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextController);\nexport { GhostTextController };\nclass GhostTextContextKeys {\n    constructor(contextKeyService) {\n        this.contextKeyService = contextKeyService;\n        this.inlineCompletionVisible = GhostTextController.inlineSuggestionVisible.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentation = GhostTextController.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentationLessThanTabSize = GhostTextController.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\n    }\n}\n/**\n * The controller for a text editor with an initialized text model.\n * Must be disposed as soon as the model detaches from the editor.\n*/\nlet ActiveGhostTextController = class ActiveGhostTextController extends Disposable {\n    constructor(editor, instantiationService, contextKeyService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.contextKeys = new GhostTextContextKeys(this.contextKeyService);\n        this.model = this._register(this.instantiationService.createInstance(GhostTextModel, this.editor));\n        this.widget = this._register(this.instantiationService.createInstance(GhostTextWidget, this.editor, this.model));\n        this._register(toDisposable(() => {\n            this.contextKeys.inlineCompletionVisible.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentation.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(true);\n        }));\n        this._register(this.model.onDidChange(() => {\n            this.updateContextKeys();\n        }));\n        this.updateContextKeys();\n    }\n    updateContextKeys() {\n        var _a;\n        this.contextKeys.inlineCompletionVisible.set(((_a = this.model.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText) !== undefined);\n        let startsWithIndentation = false;\n        let startsWithIndentationLessThanTabSize = true;\n        const ghostText = this.model.inlineCompletionsModel.ghostText;\n        if (!!this.model.activeInlineCompletionsModel && ghostText && ghostText.parts.length > 0) {\n            const { column, lines } = ghostText.parts[0];\n            const firstLine = lines[0];\n            const indentationEndColumn = this.editor.getModel().getLineIndentColumn(ghostText.lineNumber);\n            const inIndentation = column <= indentationEndColumn;\n            if (inIndentation) {\n                let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\n                if (firstNonWsIdx === -1) {\n                    firstNonWsIdx = firstLine.length - 1;\n                }\n                startsWithIndentation = firstNonWsIdx > 0;\n                const tabSize = this.editor.getModel().getOptions().tabSize;\n                const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\n                startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\n            }\n        }\n        this.contextKeys.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\n        this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\n    }\n};\nActiveGhostTextController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService)\n], ActiveGhostTextController);\nexport { ActiveGhostTextController };\nexport class ShowNextInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowNextInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n            alias: 'Show Next Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showNextInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowNextInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showNext';\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowPreviousInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n            alias: 'Show Previous Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showPreviousInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowPreviousInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showPrevious';\nexport class TriggerInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.trigger',\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n            alias: 'Trigger Inline Suggestion',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.trigger();\n            }\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction } from './ghostTextController.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { inlineSuggestCommitId } from './consts.js';\nexport class InlineCompletionsHover {\n    constructor(owner, range, controller) {\n        this.owner = owner;\n        this.range = range;\n        this.controller = controller;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n    hasMultipleSuggestions() {\n        return this.controller.hasMultipleInlineCompletions();\n    }\n    get commands() {\n        var _a, _b, _c;\n        return ((_c = (_b = (_a = this.controller.activeModel) === null || _a === void 0 ? void 0 : _a.activeInlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.completionSession.value) === null || _c === void 0 ? void 0 : _c.commands) || [];\n    }\n}\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n    constructor(_editor, _commandService, _menuService, _contextKeyService, _languageService, _openerService, accessibilityService) {\n        this._editor = _editor;\n        this._commandService = _commandService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.accessibilityService = accessibilityService;\n        this.hoverOrdinal = 3;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        const controller = GhostTextController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        const target = mouseEvent.target;\n        if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            // handle the case where the mouse is over the view zone\n            const viewZoneData = target.detail;\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(viewZoneData.positionBefore || viewZoneData.position, viewZoneData.positionBefore || viewZoneData.position));\n            }\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            // handle the case where the mouse is over the empty portion of a line following ghost text\n            if (controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            // handle the case where the mouse is directly over ghost text\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        return null;\n    }\n    computeSync(anchor, lineDecorations) {\n        const controller = GhostTextController.get(this._editor);\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        const disposableStore = new DisposableStore();\n        const part = hoverParts[0];\n        if (this.accessibilityService.isScreenReaderOptimized()) {\n            this.renderScreenReaderText(context, part, disposableStore);\n        }\n        // TODO@hediet: deprecate MenuId.InlineCompletionsActions\n        const menu = disposableStore.add(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\n        const previousAction = context.statusBar.addAction({\n            label: nls.localize('showNextInlineSuggestion', \"Next\"),\n            commandId: ShowNextInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowNextInlineSuggestionAction.ID)\n        });\n        const nextAction = context.statusBar.addAction({\n            label: nls.localize('showPreviousInlineSuggestion', \"Previous\"),\n            commandId: ShowPreviousInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowPreviousInlineSuggestionAction.ID)\n        });\n        context.statusBar.addAction({\n            label: nls.localize('acceptInlineSuggestion', \"Accept\"),\n            commandId: inlineSuggestCommitId,\n            run: () => this._commandService.executeCommand(inlineSuggestCommitId)\n        });\n        const actions = [previousAction, nextAction];\n        for (const action of actions) {\n            action.setEnabled(false);\n        }\n        part.hasMultipleSuggestions().then(hasMore => {\n            for (const action of actions) {\n                action.setEnabled(hasMore);\n            }\n        });\n        for (const command of part.commands) {\n            context.statusBar.addAction({\n                label: command.title,\n                commandId: command.id,\n                run: () => this._commandService.executeCommand(command.id, ...(command.arguments || []))\n            });\n        }\n        for (const [_, group] of menu.getActions()) {\n            for (const action of group) {\n                if (action instanceof MenuItemAction) {\n                    context.statusBar.addAction({\n                        label: action.label,\n                        commandId: action.item.id,\n                        run: () => this._commandService.executeCommand(action.item.id)\n                    });\n                }\n            }\n        }\n        return disposableStore;\n    }\n    renderScreenReaderText(context, part, disposableStore) {\n        var _a, _b;\n        const $ = dom.$;\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\n        const render = (code) => {\n            disposableStore.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n            hoverContentsElement.replaceChildren(renderedContents.element);\n        };\n        const ghostText = (_b = (_a = part.controller.activeModel) === null || _a === void 0 ? void 0 : _a.inlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.ghostText;\n        if (ghostText) {\n            const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n            render(ghostText.renderForScreenReader(lineText));\n        }\n        context.fragment.appendChild(markdownHoverElement);\n    }\n};\nInlineCompletionsHoverParticipant = __decorate([\n    __param(1, ICommandService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageService),\n    __param(5, IOpenerService),\n    __param(6, IAccessibilityService)\n], InlineCompletionsHoverParticipant);\nexport { InlineCompletionsHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, TriggerInlineSuggestionAction } from './ghostTextController.js';\nimport { InlineCompletionsHoverParticipant } from './ghostTextHoverParticipant.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nregisterEditorContribution(GhostTextController.ID, GhostTextController);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\nconst GhostTextCommand = EditorCommand.bindToContribution(GhostTextController.get);\nexport const commitInlineSuggestionAction = new GhostTextCommand({\n    id: inlineSuggestCommitId,\n    precondition: GhostTextController.inlineSuggestionVisible,\n    handler(x) {\n        x.commit();\n        x.editor.focus();\n    }\n});\nregisterEditorCommand(commitInlineSuggestionAction);\nKeybindingsRegistry.registerKeybindingRule({\n    primary: 2 /* KeyCode.Tab */,\n    weight: 200,\n    id: commitInlineSuggestionAction.id,\n    when: ContextKeyExpr.and(commitInlineSuggestionAction.precondition, EditorContextKeys.tabMovesFocus.toNegated(), GhostTextController.inlineSuggestionHasIndentationLessThanTabSize),\n});\nregisterEditorCommand(new GhostTextCommand({\n    id: 'editor.action.inlineSuggest.hide',\n    precondition: GhostTextController.inlineSuggestionVisible,\n    kbOpts: {\n        weight: 100,\n        primary: 9 /* KeyCode.Escape */,\n    },\n    handler(x) {\n        x.hide();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n    let spacesCnt = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) === '\\t') {\n            spacesCnt += tabSize;\n        }\n        else {\n            spacesCnt++;\n        }\n    }\n    return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n    spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n    let result = '';\n    if (!insertSpaces) {\n        const tabsCnt = Math.floor(spacesCnt / tabSize);\n        spacesCnt = spacesCnt % tabSize;\n        for (let i = 0; i < tabsCnt; i++) {\n            result += '\\t';\n        }\n    }\n    for (let i = 0; i < spacesCnt; i++) {\n        result += ' ';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from './indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber, inheritedIndent) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return [];\n    }\n    const indentationRules = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentationRules;\n    if (!indentationRules) {\n        return [];\n    }\n    endLineNumber = Math.min(endLineNumber, model.getLineCount());\n    // Skip `unIndentedLinePattern` lines\n    while (startLineNumber <= endLineNumber) {\n        if (!indentationRules.unIndentedLinePattern) {\n            break;\n        }\n        const text = model.getLineContent(startLineNumber);\n        if (!indentationRules.unIndentedLinePattern.test(text)) {\n            break;\n        }\n        startLineNumber++;\n    }\n    if (startLineNumber > endLineNumber - 1) {\n        return [];\n    }\n    const { tabSize, indentSize, insertSpaces } = model.getOptions();\n    const shiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const unshiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const indentEdits = [];\n    // indentation being passed to lines below\n    let globalIndent;\n    // Calculate indentation for the first line\n    // If there is no passed-in indentation, we use the indentation of the first line as base.\n    const currentLineText = model.getLineContent(startLineNumber);\n    let adjustedLineContent = currentLineText;\n    if (inheritedIndent !== undefined && inheritedIndent !== null) {\n        globalIndent = inheritedIndent;\n        const oldIndentation = strings.getLeadingWhitespace(currentLineText);\n        adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = unshiftIndent(globalIndent);\n            adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        }\n        if (currentLineText !== adjustedLineContent) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(startLineNumber, 1, startLineNumber, oldIndentation.length + 1), normalizeIndentation(globalIndent, indentSize, insertSpaces)));\n        }\n    }\n    else {\n        globalIndent = strings.getLeadingWhitespace(currentLineText);\n    }\n    // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\n    let idealIndentForNextLine = globalIndent;\n    if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        globalIndent = shiftIndent(globalIndent);\n    }\n    else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    }\n    startLineNumber++;\n    // Calculate indentation adjustment for all following lines\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        const text = model.getLineContent(lineNumber);\n        const oldIndentation = strings.getLeadingWhitespace(text);\n        const adjustedLineContent = idealIndentForNextLine + text.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\n            globalIndent = unshiftIndent(globalIndent);\n        }\n        if (oldIndentation !== idealIndentForNextLine) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\n        }\n        // calculate idealIndentForNextLine\n        if (indentationRules.unIndentedLinePattern && indentationRules.unIndentedLinePattern.test(text)) {\n            // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\n            // but don't change globalIndent and idealIndentForNextLine.\n            continue;\n        }\n        else if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = shiftIndent(globalIndent);\n            idealIndentForNextLine = globalIndent;\n        }\n        else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        }\n        else {\n            idealIndentForNextLine = globalIndent;\n        }\n    }\n    return indentEdits;\n}\nexport class IndentationToSpacesAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToSpacesAction.ID,\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n            alias: 'Convert Indentation to Spaces',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: true\n        });\n    }\n}\nIndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\nexport class IndentationToTabsAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToTabsAction.ID,\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n            alias: 'Convert Indentation to Tabs',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: false\n        });\n    }\n}\nIndentationToTabsAction.ID = 'editor.action.indentationToTabs';\nexport class ChangeIndentationSizeAction extends EditorAction {\n    constructor(insertSpaces, opts) {\n        super(opts);\n        this.insertSpaces = insertSpaces;\n    }\n    run(accessor, editor) {\n        const quickInputService = accessor.get(IQuickInputService);\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n            id: n.toString(),\n            label: n.toString(),\n            // add description for tabSize value set in the configuration\n            description: n === creationOpts.tabSize ? nls.localize('configuredTabSize', \"Configured Tab Size\") : undefined\n        }));\n        // auto focus the tabSize set for the current editor\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n        setTimeout(() => {\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\n                if (pick) {\n                    if (model && !model.isDisposed()) {\n                        model.updateOptions({\n                            tabSize: parseInt(pick.label, 10),\n                            insertSpaces: this.insertSpaces\n                        });\n                    }\n                }\n            });\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\n    }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n    constructor() {\n        super(false, {\n            id: IndentUsingTabs.ID,\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n            alias: 'Indent Using Tabs',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingTabs.ID = 'editor.action.indentUsingTabs';\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    constructor() {\n        super(true, {\n            id: IndentUsingSpaces.ID,\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n            alias: 'Indent Using Spaces',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\nexport class DetectIndentation extends EditorAction {\n    constructor() {\n        super({\n            id: DetectIndentation.ID,\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n            alias: 'Detect Indentation from Content',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n}\nDetectIndentation.ID = 'editor.action.detectIndentation';\nexport class ReindentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentlines',\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n            alias: 'Reindent Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentselectedlines',\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n            alias: 'Reindent Selected Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const edits = [];\n        for (const selection of selections) {\n            let startLineNumber = selection.startLineNumber;\n            let endLineNumber = selection.endLineNumber;\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n                endLineNumber--;\n            }\n            if (startLineNumber === 1) {\n                if (startLineNumber === endLineNumber) {\n                    continue;\n                }\n            }\n            else {\n                startLineNumber--;\n            }\n            const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n            edits.push(...editOperations);\n        }\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class AutoIndentOnPasteCommand {\n    constructor(edits, initialSelection) {\n        this._initialSelection = initialSelection;\n        this._edits = [];\n        this._selectionId = null;\n        for (const edit of edits) {\n            if (edit.range && typeof edit.text === 'string') {\n                this._edits.push(edit);\n            }\n        }\n    }\n    getEditOperations(model, builder) {\n        for (const edit of this._edits) {\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\n        }\n        let selectionIsSet = false;\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\n            }\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\n            }\n        }\n        if (!selectionIsSet) {\n            this._selectionId = builder.trackSelection(this._initialSelection);\n        }\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\n    constructor(editor, _languageConfigurationService) {\n        this.editor = editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.callOnDispose = new DisposableStore();\n        this.callOnModel = new DisposableStore();\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n    }\n    update() {\n        // clean up\n        this.callOnModel.clear();\n        // we are disabled\n        if (this.editor.getOption(9 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(50 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\n            this.trigger(range);\n        }));\n    }\n    trigger(range) {\n        const selections = this.editor.getSelections();\n        if (selections === null || selections.length > 1) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n            return;\n        }\n        const autoIndent = this.editor.getOption(9 /* EditorOption.autoIndent */);\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const textEdits = [];\n        const indentConverter = {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n        let startLineNumber = range.startLineNumber;\n        while (startLineNumber <= range.endLineNumber) {\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber > range.endLineNumber) {\n            return;\n        }\n        let firstLineText = model.getLineContent(startLineNumber);\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n            const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfFirstLine !== null) {\n                const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n                const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                if (newSpaceCnt !== oldSpaceCnt) {\n                    const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                    textEdits.push({\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n                        text: newIndent\n                    });\n                    firstLineText = newIndent + firstLineText.substr(oldIndentation.length);\n                }\n                else {\n                    const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n                    if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n                        // we paste content into a line where only contains whitespaces\n                        // after pasting, the indentation of the first line is already correct\n                        // the first line doesn't match any indentation rule\n                        // then no-op.\n                        return;\n                    }\n                }\n            }\n        }\n        const firstLineNumber = startLineNumber;\n        // ignore empty or ignored lines\n        while (startLineNumber < range.endLineNumber) {\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber !== range.endLineNumber) {\n            const virtualModel = {\n                tokenization: {\n                    getLineTokens: (lineNumber) => {\n                        return model.tokenization.getLineTokens(lineNumber);\n                    },\n                    getLanguageId: () => {\n                        return model.getLanguageId();\n                    },\n                    getLanguageIdAtPosition: (lineNumber, column) => {\n                        return model.getLanguageIdAtPosition(lineNumber, column);\n                    },\n                },\n                getLineContent: (lineNumber) => {\n                    if (lineNumber === firstLineNumber) {\n                        return firstLineText;\n                    }\n                    else {\n                        return model.getLineContent(lineNumber);\n                    }\n                }\n            };\n            const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n            if (indentOfSecondLine !== null) {\n                const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n                const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n                    const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n                        const lineContent = model.getLineContent(i);\n                        const originalIndent = strings.getLeadingWhitespace(lineContent);\n                        const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n                        const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n                        const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n                        if (newIndent !== originalIndent) {\n                            textEdits.push({\n                                range: new Range(i, 1, i, originalIndent.length + 1),\n                                text: newIndent\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if (textEdits.length > 0) {\n            this.editor.pushUndoStop();\n            const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\n            this.editor.pushUndoStop();\n        }\n    }\n    shouldIgnoreLine(model, lineNumber) {\n        model.tokenization.forceTokenization(lineNumber);\n        const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (nonWhitespaceColumn === 0) {\n            return true;\n        }\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        if (tokens.getCount() > 0) {\n            const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        this.callOnDispose.dispose();\n        this.callOnModel.dispose();\n    }\n};\nAutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste';\nAutoIndentOnPaste = __decorate([\n    __param(1, ILanguageConfigurationService)\n], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return;\n    }\n    let spaces = '';\n    for (let i = 0; i < tabSize; i++) {\n        spaces += ' ';\n    }\n    const spacesRegExp = new RegExp(spaces, 'gi');\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (lastIndentationColumn === 0) {\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n        }\n        if (lastIndentationColumn === 1) {\n            continue;\n        }\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\n        const newIndentation = (tabsToSpaces\n            ? originalIndentation.replace(/\\t/ig, spaces)\n            : originalIndentation.replace(spacesRegExp, '\\t'));\n        builder.addEditOperation(originalIndentationRange, newIndentation);\n    }\n}\nexport class IndentationToSpacesCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, true);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nexport class IndentationToTabsCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, false);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nexport class InlayHintAnchor {\n    constructor(range, direction) {\n        this.range = range;\n        this.direction = direction;\n    }\n}\nexport class InlayHintItem {\n    constructor(hint, anchor, provider) {\n        this.hint = hint;\n        this.anchor = anchor;\n        this.provider = provider;\n        this._isResolved = false;\n    }\n    with(delta) {\n        const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\n        result._isResolved = this._isResolved;\n        result._currentResolve = this._currentResolve;\n        return result;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.provider.resolveInlayHint !== 'function') {\n                return;\n            }\n            if (this._currentResolve) {\n                // wait for an active resolve operation and try again\n                // when that's done.\n                yield this._currentResolve;\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                return this.resolve(token);\n            }\n            if (!this._isResolved) {\n                this._currentResolve = this._doResolve(token)\n                    .finally(() => this._currentResolve = undefined);\n            }\n            yield this._currentResolve;\n        });\n    }\n    _doResolve(token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const newHint = yield Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\n                this.hint.tooltip = (_a = newHint === null || newHint === void 0 ? void 0 : newHint.tooltip) !== null && _a !== void 0 ? _a : this.hint.tooltip;\n                this.hint.label = (_b = newHint === null || newHint === void 0 ? void 0 : newHint.label) !== null && _b !== void 0 ? _b : this.hint.label;\n                this._isResolved = true;\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                this._isResolved = false;\n            }\n        });\n    }\n}\nexport class InlayHintsFragments {\n    constructor(ranges, data, model) {\n        this._disposables = new DisposableStore();\n        this.ranges = ranges;\n        this.provider = new Set();\n        const items = [];\n        for (const [list, provider] of data) {\n            this._disposables.add(list);\n            this.provider.add(provider);\n            for (const hint of list.hints) {\n                // compute the range to which the item should be attached to\n                const position = model.validatePosition(hint.position);\n                let direction = 'before';\n                const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\n                let range;\n                if (wordRange.getStartPosition().isBefore(position)) {\n                    range = Range.fromPositions(wordRange.getStartPosition(), position);\n                    direction = 'after';\n                }\n                else {\n                    range = Range.fromPositions(position, wordRange.getEndPosition());\n                    direction = 'before';\n                }\n                items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\n            }\n        }\n        this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\n    }\n    static create(registry, model, ranges, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = [];\n            const promises = registry.ordered(model).reverse().map(provider => ranges.map((range) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const result = yield provider.provideInlayHints(model, range, token);\n                    if (result === null || result === void 0 ? void 0 : result.hints.length) {\n                        data.push([result, provider]);\n                    }\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            yield Promise.all(promises.flat());\n            if (token.isCancellationRequested || model.isDisposed()) {\n                throw new CancellationError();\n            }\n            return new InlayHintsFragments(ranges, data, model);\n        });\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    static _getRangeAtPosition(model, position) {\n        const line = position.lineNumber;\n        const word = model.getWordAtPosition(position);\n        if (word) {\n            // always prefer the word range\n            return new Range(line, word.startColumn, line, word.endColumn);\n        }\n        model.tokenization.tokenizeIfCheap(line);\n        const tokens = model.tokenization.getLineTokens(line);\n        const offset = position.column - 1;\n        const idx = tokens.findTokenIndexAtOffset(offset);\n        let start = tokens.getStartOffset(idx);\n        let end = tokens.getEndOffset(idx);\n        if (end - start === 1) {\n            // single character token, when at its end try leading/trailing token instead\n            if (start === offset && idx > 1) {\n                // leading token\n                start = tokens.getStartOffset(idx - 1);\n                end = tokens.getEndOffset(idx - 1);\n            }\n            else if (end === offset && idx < tokens.getCount() - 1) {\n                // trailing token\n                start = tokens.getStartOffset(idx + 1);\n                end = tokens.getEndOffset(idx + 1);\n            }\n        }\n        return new Range(line, start + 1, line, end + 1);\n    }\n}\nexport function asCommandLink(command) {\n    return URI.from({\n        scheme: Schemas.command,\n        path: command.id,\n        query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\n    }).toString();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { EditorExtensionsRegistry } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport function showGoToContextMenu(accessor, editor, anchor, part) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const contextMenuService = accessor.get(IContextMenuService);\n        const commandService = accessor.get(ICommandService);\n        const instaService = accessor.get(IInstantiationService);\n        const notificationService = accessor.get(INotificationService);\n        yield part.item.resolve(CancellationToken.None);\n        if (!part.part.location) {\n            return;\n        }\n        const location = part.part.location;\n        const menuActions = [];\n        // from all registered (not active) context menu actions select those\n        // that are a symbol navigation action\n        const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\n            .map(item => isIMenuItem(item) ? item.command.id : ''));\n        for (const delegate of EditorExtensionsRegistry.getEditorActions()) {\n            if (delegate instanceof SymbolNavigationAction && filter.has(delegate.id)) {\n                menuActions.push(new Action(delegate.id, delegate.label, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                    const ref = yield resolverService.createModelReference(location.uri);\n                    try {\n                        yield instaService.invokeFunction(delegate.run.bind(delegate), editor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)));\n                    }\n                    finally {\n                        ref.dispose();\n                    }\n                })));\n            }\n        }\n        if (part.part.command) {\n            const { command } = part.part;\n            menuActions.push(new Separator());\n            menuActions.push(new Action(command.id, command.title, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                var _b;\n                try {\n                    yield commandService.executeCommand(command.id, ...((_b = command.arguments) !== null && _b !== void 0 ? _b : []));\n                }\n                catch (err) {\n                    notificationService.notify({\n                        severity: Severity.Error,\n                        source: part.item.provider.displayName,\n                        message: err\n                    });\n                }\n            })));\n        }\n        // show context menu\n        const useShadowDOM = editor.getOption(117 /* EditorOption.useShadowDOM */);\n        contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n            getAnchor: () => {\n                const box = dom.getDomNodePagePosition(anchor);\n                return { x: box.left, y: box.top + box.height + 8 };\n            },\n            getActions: () => menuActions,\n            onHide: () => {\n                editor.focus();\n            },\n            autoSelectFirstItem: true,\n        });\n    });\n}\nexport function goToDefinitionWithLocation(accessor, event, editor, location) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const ref = yield resolverService.createModelReference(location.uri);\n        yield editor.invokeWithinContext((accessor) => __awaiter(this, void 0, void 0, function* () {\n            const openToSide = event.hasSideBySideModifier;\n            const contextKeyService = accessor.get(IContextKeyService);\n            const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n            const canPeek = !openToSide && editor.getOption(80 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, editor, { model: ref.object.textEditorModel, position: Range.getStartPosition(location.range) });\n        }));\n        ref.dispose();\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ModifierKeyEmitter } from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as languages from '../../../common/languages.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n// --- hint caching service (per session)\nclass InlayHintsCache {\n    constructor() {\n        this._entries = new LRUCache(50);\n    }\n    get(model) {\n        const key = InlayHintsCache._key(model);\n        return this._entries.get(key);\n    }\n    set(model, value) {\n        const key = InlayHintsCache._key(model);\n        this._entries.set(key, value);\n    }\n    static _key(model) {\n        return `${model.uri.toString()}/${model.getVersionId()}`;\n    }\n}\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\nregisterSingleton(IInlayHintsCache, InlayHintsCache, true);\n// --- rendered label\nexport class RenderedInlayHintLabelPart {\n    constructor(item, index) {\n        this.item = item;\n        this.index = index;\n    }\n    get part() {\n        const label = this.item.hint.label;\n        if (typeof label === 'string') {\n            return { label };\n        }\n        else {\n            return label[this.index];\n        }\n    }\n}\nclass ActiveInlayHintInfo {\n    constructor(part, hasTriggerModifier) {\n        this.part = part;\n        this.hasTriggerModifier = hasTriggerModifier;\n    }\n}\n// --- controller\nlet InlayHintsController = class InlayHintsController {\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._inlayHintsCache = _inlayHintsCache;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._instaService = _instaService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._decorationsMetadata = new Map();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._activeRenderMode = 0 /* RenderMode.Normal */;\n        this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', { min: 25 });\n        this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(129 /* EditorOption.inlayHints */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    static get(editor) {\n        var _a;\n        return (_a = editor.getContribution(InlayHintsController.ID)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    dispose() {\n        this._sessionDisposables.dispose();\n        this._removeAllDecorations();\n        this._disposables.dispose();\n    }\n    _update() {\n        this._sessionDisposables.clear();\n        this._removeAllDecorations();\n        const options = this._editor.getOption(129 /* EditorOption.inlayHints */);\n        if (options.enabled === 'off') {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\n            return;\n        }\n        // iff possible, quickly update from cache\n        const cached = this._inlayHintsCache.get(model);\n        if (cached) {\n            this._updateHintsDecorators([model.getFullModelRange()], cached);\n        }\n        this._sessionDisposables.add(toDisposable(() => {\n            // cache items when switching files etc\n            if (!model.isDisposed()) {\n                this._cacheHintsForFastRestore(model);\n            }\n        }));\n        let cts;\n        const watchedProviders = new Set();\n        const scheduler = new RunOnceScheduler(() => __awaiter(this, void 0, void 0, function* () {\n            const t1 = Date.now();\n            cts === null || cts === void 0 ? void 0 : cts.dispose(true);\n            cts = new CancellationTokenSource();\n            const listener = model.onWillDispose(() => cts === null || cts === void 0 ? void 0 : cts.cancel());\n            try {\n                const myToken = cts.token;\n                const inlayHints = yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\n                scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\n                if (myToken.isCancellationRequested) {\n                    inlayHints.dispose();\n                    return;\n                }\n                // listen to provider changes\n                for (const provider of inlayHints.provider) {\n                    if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\n                        watchedProviders.add(provider);\n                        this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\n                            if (!scheduler.isScheduled()) { // ignore event when request is already scheduled\n                                scheduler.schedule();\n                            }\n                        }));\n                    }\n                }\n                this._sessionDisposables.add(inlayHints);\n                this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\n                this._cacheHintsForFastRestore(model);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                cts.dispose();\n                listener.dispose();\n            }\n        }), this._debounceInfo.get(model));\n        this._sessionDisposables.add(scheduler);\n        this._sessionDisposables.add(toDisposable(() => cts === null || cts === void 0 ? void 0 : cts.dispose(true)));\n        scheduler.schedule(0);\n        this._sessionDisposables.add(this._editor.onDidScrollChange((e) => {\n            // update when scroll position changes\n            // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\n            // typing or due to \"actual\" scrolling\n            if (e.scrollTopChanged || !scheduler.isScheduled()) {\n                scheduler.schedule();\n            }\n        }));\n        this._sessionDisposables.add(this._editor.onDidChangeModelContent((e) => {\n            // update less aggressive when typing\n            const delay = Math.max(scheduler.delay, 1250);\n            scheduler.schedule(delay);\n        }));\n        if (options.enabled === 'on') {\n            // different \"on\" modes: always\n            this._activeRenderMode = 0 /* RenderMode.Normal */;\n        }\n        else {\n            // different \"on\" modes: offUnlessPressed, or onUnlessPressed\n            let defaultMode;\n            let altMode;\n            if (options.enabled === 'onUnlessPressed') {\n                defaultMode = 0 /* RenderMode.Normal */;\n                altMode = 1 /* RenderMode.Invisible */;\n            }\n            else {\n                defaultMode = 1 /* RenderMode.Invisible */;\n                altMode = 0 /* RenderMode.Normal */;\n            }\n            this._activeRenderMode = defaultMode;\n            this._sessionDisposables.add(ModifierKeyEmitter.getInstance().event(e => {\n                if (!this._editor.hasModel()) {\n                    return;\n                }\n                const newRenderMode = e.altKey && e.ctrlKey ? altMode : defaultMode;\n                if (newRenderMode !== this._activeRenderMode) {\n                    this._activeRenderMode = newRenderMode;\n                    const model = this._editor.getModel();\n                    const copies = this._copyInlayHintsWithCurrentAnchor(model);\n                    this._updateHintsDecorators([model.getFullModelRange()], copies);\n                    scheduler.schedule(0);\n                }\n            }));\n        }\n        // mouse gestures\n        this._sessionDisposables.add(this._installDblClickGesture(() => scheduler.schedule(0)));\n        this._sessionDisposables.add(this._installLinkGesture());\n        this._sessionDisposables.add(this._installContextMenu());\n    }\n    _installLinkGesture() {\n        const store = new DisposableStore();\n        const gesture = store.add(new ClickLinkGesture(this._editor));\n        // let removeHighlight = () => { };\n        const sessionStore = new DisposableStore();\n        store.add(sessionStore);\n        store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\n            const [mouseEvent] = e;\n            const labelPart = this._getInlayHintLabelPart(mouseEvent);\n            const model = this._editor.getModel();\n            if (!labelPart || !model) {\n                sessionStore.clear();\n                return;\n            }\n            // resolve the item\n            const cts = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cts.dispose(true)));\n            labelPart.item.resolve(cts.token);\n            // render link => when the modifier is pressed and when there is a command or location\n            this._activeInlayHintPart = labelPart.part.command || labelPart.part.location\n                ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier)\n                : undefined;\n            const lineNumber = labelPart.item.hint.position.lineNumber;\n            const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\n            const lineHints = this._getInlineHintsForRange(range);\n            this._updateHintsDecorators([range], lineHints);\n            sessionStore.add(toDisposable(() => {\n                this._activeInlayHintPart = undefined;\n                this._updateHintsDecorators([range], lineHints);\n            }));\n        }));\n        store.add(gesture.onCancel(() => sessionStore.clear()));\n        store.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            const label = this._getInlayHintLabelPart(e);\n            if (label) {\n                const part = label.part;\n                if (part.location) {\n                    // location -> execute go to def\n                    this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\n                }\n                else if (languages.Command.is(part.command)) {\n                    // command -> execute it\n                    yield this._invokeCommand(part.command, label.item);\n                }\n            }\n        })));\n        return store;\n    }\n    _getInlineHintsForRange(range) {\n        const lineHints = new Set();\n        for (const data of this._decorationsMetadata.values()) {\n            if (range.containsRange(data.item.anchor.range)) {\n                lineHints.add(data.item);\n            }\n        }\n        return Array.from(lineHints);\n    }\n    _installDblClickGesture(updateInlayHints) {\n        return this._editor.onMouseUp((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.event.detail !== 2) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (!part) {\n                return;\n            }\n            e.event.preventDefault();\n            yield part.item.resolve(CancellationToken.None);\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                const edits = part.item.hint.textEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text));\n                this._editor.executeEdits('inlayHint.default', edits);\n                updateInlayHints();\n            }\n        }));\n    }\n    _installContextMenu() {\n        return this._editor.onContextMenu((e) => __awaiter(this, void 0, void 0, function* () {\n            if (!(e.event.target instanceof HTMLElement)) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (part) {\n                yield this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\n            }\n        }));\n    }\n    _getInlayHintLabelPart(e) {\n        var _a;\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return undefined;\n        }\n        const options = (_a = e.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (options instanceof ModelDecorationInjectedTextOptions && (options === null || options === void 0 ? void 0 : options.attachedData) instanceof RenderedInlayHintLabelPart) {\n            return options.attachedData;\n        }\n        return undefined;\n    }\n    _invokeCommand(command, item) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n            }\n            catch (err) {\n                this._notificationService.notify({\n                    severity: Severity.Error,\n                    source: item.provider.displayName,\n                    message: err\n                });\n            }\n        });\n    }\n    _cacheHintsForFastRestore(model) {\n        const hints = this._copyInlayHintsWithCurrentAnchor(model);\n        this._inlayHintsCache.set(model, hints);\n    }\n    // return inlay hints but with an anchor that reflects \"updates\"\n    // that happened after receiving them, e.g adding new lines before a hint\n    _copyInlayHintsWithCurrentAnchor(model) {\n        const items = new Map();\n        for (const [id, obj] of this._decorationsMetadata) {\n            if (items.has(obj.item)) {\n                // an inlay item can be rendered as multiple decorations\n                // but they will all uses the same range\n                continue;\n            }\n            const range = model.getDecorationRange(id);\n            if (range) {\n                // update range with whatever the editor has tweaked it to\n                const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\n                const copy = obj.item.with({ anchor });\n                items.set(obj.item, copy);\n            }\n        }\n        return Array.from(items.values());\n    }\n    _getHintsRanges() {\n        const extra = 30;\n        const model = this._editor.getModel();\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        const result = [];\n        for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\n            const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\n            if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\n                result.push(extendedRange);\n            }\n            else {\n                result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\n            }\n        }\n        return result;\n    }\n    _updateHintsDecorators(ranges, items) {\n        var _a, _b;\n        // utils to collect/create injected text decorations\n        const newDecorationsData = [];\n        const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\n            const opts = {\n                content,\n                inlineClassNameAffectsLetterSpacing: true,\n                inlineClassName: ref.className,\n                cursorStops,\n                attachedData\n            };\n            newDecorationsData.push({\n                item,\n                classNameRef: ref,\n                decoration: {\n                    range: item.anchor.range,\n                    options: {\n                        // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\n                        description: 'InlayHint',\n                        showIfCollapsed: item.anchor.range.isEmpty(),\n                        collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\n                        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n                        [item.anchor.direction]: this._activeRenderMode === 0 /* RenderMode.Normal */ ? opts : undefined\n                    }\n                }\n            });\n        };\n        const addInjectedWhitespace = (item, isLast) => {\n            const marginRule = this._ruleFactory.createClassNameRef({\n                width: `${(fontSize / 3) | 0}px`,\n                display: 'inline-block'\n            });\n            addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\n        };\n        //\n        const { fontSize, fontFamily, padding, isUniform } = this._getLayoutInfo();\n        const fontFamilyVar = '--code-editorInlayHintsFontFamily';\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\n        for (const item of items) {\n            // whitespace leading the actual label\n            if (item.hint.paddingLeft) {\n                addInjectedWhitespace(item, false);\n            }\n            // the label with its parts\n            const parts = typeof item.hint.label === 'string'\n                ? [{ label: item.hint.label }]\n                : item.hint.label;\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                const isFirst = i === 0;\n                const isLast = i === parts.length - 1;\n                const cssProperties = {\n                    fontSize: `${fontSize}px`,\n                    fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\n                    verticalAlign: isUniform ? 'baseline' : 'middle',\n                };\n                if (isNonEmptyArray(item.hint.textEdits)) {\n                    cssProperties.cursor = 'default';\n                }\n                this._fillInColors(cssProperties, item.hint);\n                if ((part.command || part.location) && ((_a = this._activeInlayHintPart) === null || _a === void 0 ? void 0 : _a.part.item) === item && this._activeInlayHintPart.part.index === i) {\n                    // active link!\n                    cssProperties.textDecoration = 'underline';\n                    if (this._activeInlayHintPart.hasTriggerModifier) {\n                        cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\n                        cssProperties.cursor = 'pointer';\n                    }\n                }\n                if (padding) {\n                    if (isFirst && isLast) {\n                        // only element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isFirst) {\n                        // first element\n                        cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px 0 0 ${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isLast) {\n                        // last element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\n                        cssProperties.borderRadius = `0 ${(fontSize / 4) | 0}px ${(fontSize / 4) | 0}px 0`;\n                    }\n                    else {\n                        cssProperties.padding = `1px 0 1px 0`;\n                    }\n                }\n                addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(part.label), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\n            }\n            // whitespace trailing the actual label\n            if (item.hint.paddingRight) {\n                addInjectedWhitespace(item, true);\n            }\n            if (newDecorationsData.length > InlayHintsController._MAX_DECORATORS) {\n                break;\n            }\n        }\n        // collect all decoration ids that are affected by the ranges\n        // and only update those decorations\n        const decorationIdsToReplace = [];\n        for (const range of ranges) {\n            for (const { id } of (_b = this._editor.getDecorationsInRange(range)) !== null && _b !== void 0 ? _b : []) {\n                const metadata = this._decorationsMetadata.get(id);\n                if (metadata) {\n                    decorationIdsToReplace.push(id);\n                    metadata.classNameRef.dispose();\n                    this._decorationsMetadata.delete(id);\n                }\n            }\n        }\n        this._editor.changeDecorations(accessor => {\n            const newDecorationIds = accessor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\n            for (let i = 0; i < newDecorationIds.length; i++) {\n                const data = newDecorationsData[i];\n                this._decorationsMetadata.set(newDecorationIds[i], data);\n            }\n        });\n    }\n    _fillInColors(props, hint) {\n        if (hint.kind === languages.InlayHintKind.Parameter) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\n            props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\n        }\n        else if (hint.kind === languages.InlayHintKind.Type) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\n            props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\n        }\n        else {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\n            props.color = themeColorFromId(colors.editorInlayHintForeground);\n        }\n    }\n    _getLayoutInfo() {\n        const options = this._editor.getOption(129 /* EditorOption.inlayHints */);\n        const padding = options.padding;\n        const editorFontSize = this._editor.getOption(48 /* EditorOption.fontSize */);\n        const editorFontFamily = this._editor.getOption(45 /* EditorOption.fontFamily */);\n        let fontSize = options.fontSize;\n        if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\n            fontSize = editorFontSize;\n        }\n        const fontFamily = options.fontFamily || editorFontFamily;\n        const isUniform = !padding\n            && fontFamily === editorFontFamily\n            && fontSize === editorFontSize;\n        return { fontSize, fontFamily, padding, isUniform };\n    }\n    _removeAllDecorations() {\n        this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));\n        for (const obj of this._decorationsMetadata.values()) {\n            obj.classNameRef.dispose();\n        }\n        this._decorationsMetadata.clear();\n    }\n};\nInlayHintsController.ID = 'editor.contrib.InlayHints';\nInlayHintsController._MAX_DECORATORS = 1500;\nInlayHintsController = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, IInlayHintsCache),\n    __param(4, ICommandService),\n    __param(5, INotificationService),\n    __param(6, IInstantiationService)\n], InlayHintsController);\nexport { InlayHintsController };\n// Prevents the view from potentially visible whitespace\nfunction fixSpace(str) {\n    const noBreakWhitespace = '\\xa0';\n    return str.replace(/[ \\t]/g, noBreakWhitespace);\n}\nCommandsRegistry.registerCommand('_executeInlayHintProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(URI.isUri(uri));\n    assertType(Range.isIRange(range));\n    const { inlayHintsProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const model = yield InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\n        const result = model.items.map(i => i.hint);\n        setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\n        return result;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner) {\n        super(10, owner, part.item.anchor.range);\n        this.part = part;\n    }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\n        this._resolverService = _resolverService;\n        this.hoverOrdinal = 6;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var e_1, _a;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], 0));\n            }\n            // (1.2) Inlay dbl-click gesture\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double click to insert\"))], 10001));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], 1));\n            }\n            // (2.2) Inlay Label Part Help Hover\n            if (part.part.location || part.part.command) {\n                let linkHint;\n                const useMetaKey = this._editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey';\n                const kb = useMetaKey\n                    ? platform.isMacintosh\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\n                    : platform.isMacintosh\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\n                        : localize('links.navigate.kb.alt', \"alt + click\");\n                if (part.part.location && part.part.command) {\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n                }\n                else if (part.part.location) {\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n                }\n                else if (part.part.command) {\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\n                }\n                if (linkHint) {\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], 10000));\n                }\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n                    const item = iterable_1_1.value;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService),\n    __param(5, ILanguageFeaturesService)\n], InlayHintsHover);\nexport { InlayHintsHover };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController);\nHoverParticipantRegistry.register(InlayHintsHover);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n    constructor(editRange, originalSelection, text) {\n        this._editRange = editRange;\n        this._originalSelection = originalSelection;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._editRange, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        if (!this._originalSelection.isEmpty()) {\n            // Preserve selection and extends to typed text\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n        }\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { EditorState } from '../../editorState/browser/editorState.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nlet InPlaceReplaceController = class InPlaceReplaceController {\n    constructor(editor, editorWorkerService) {\n        this.editor = editor;\n        this.editorWorkerService = editorWorkerService;\n        this.decorations = this.editor.createDecorationsCollection();\n    }\n    static get(editor) {\n        return editor.getContribution(InPlaceReplaceController.ID);\n    }\n    dispose() {\n    }\n    run(source, up) {\n        // cancel any pending request\n        if (this.currentRequest) {\n            this.currentRequest.cancel();\n        }\n        const editorSelection = this.editor.getSelection();\n        const model = this.editor.getModel();\n        if (!model || !editorSelection) {\n            return undefined;\n        }\n        let selection = editorSelection;\n        if (selection.startLineNumber !== selection.endLineNumber) {\n            // Can't accept multiline selection\n            return undefined;\n        }\n        const state = new EditorState(this.editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const modelURI = model.uri;\n        if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n            return Promise.resolve(undefined);\n        }\n        this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\n        return this.currentRequest.then(result => {\n            if (!result || !result.range || !result.value) {\n                // No proper result\n                return;\n            }\n            if (!state.validate(this.editor)) {\n                // state has changed\n                return;\n            }\n            // Selection\n            const editRange = Range.lift(result.range);\n            let highlightRange = result.range;\n            const diff = result.value.length - (selection.endColumn - selection.startColumn);\n            // highlight\n            highlightRange = {\n                startLineNumber: highlightRange.startLineNumber,\n                startColumn: highlightRange.startColumn,\n                endLineNumber: highlightRange.endLineNumber,\n                endColumn: highlightRange.startColumn + result.value.length\n            };\n            if (diff > 1) {\n                selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n            }\n            // Insert new text\n            const command = new InPlaceReplaceCommand(editRange, selection, result.value);\n            this.editor.pushUndoStop();\n            this.editor.executeCommand(source, command);\n            this.editor.pushUndoStop();\n            // add decoration\n            this.decorations.set([{\n                    range: highlightRange,\n                    options: InPlaceReplaceController.DECORATION\n                }]);\n            // remove decoration after delay\n            if (this.decorationRemover) {\n                this.decorationRemover.cancel();\n            }\n            this.decorationRemover = timeout(350);\n            this.decorationRemover.then(() => this.decorations.clear()).catch(onUnexpectedError);\n        }).catch(onUnexpectedError);\n    }\n};\nInPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\nInPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\n    description: 'in-place-replace',\n    className: 'valueSetReplacement'\n});\nInPlaceReplaceController = __decorate([\n    __param(1, IEditorWorkerService)\n], InPlaceReplaceController);\nclass InPlaceReplaceUp extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.up',\n            label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n            alias: 'Replace with Previous Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 82 /* KeyCode.Comma */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, true);\n    }\n}\nclass InPlaceReplaceDown extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.down',\n            label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n            alias: 'Replace with Next Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, false);\n    }\n}\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorBracketMatchBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${border}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'expandLineSelection',\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n            alias: 'Expand Line Selection',\n            precondition: undefined,\n            kbOpts: {\n                weight: 0 /* KeybindingWeight.EditorCore */,\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\n            },\n        });\n    }\n    run(_accessor, editor, args) {\n        args = args || {};\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        viewModel.model.pushStackElement();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n        viewModel.revealPrimaryCursor(args.source, true);\n    }\n}\nregisterEditorAction(ExpandLineSelectionAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nexport class TrimTrailingWhitespaceCommand {\n    constructor(selection, cursors) {\n        this._selection = selection;\n        this._cursors = cursors;\n        this._selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const ops = trimTrailingWhitespace(model, this._cursors);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            builder.addEditOperation(op.range, op.text);\n        }\n        this._selectionId = builder.trackSelection(this._selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\nexport function trimTrailingWhitespace(model, cursors) {\n    // Sort cursors ascending\n    cursors.sort((a, b) => {\n        if (a.lineNumber === b.lineNumber) {\n            return a.column - b.column;\n        }\n        return a.lineNumber - b.lineNumber;\n    });\n    // Reduce multiple cursors on the same line and only keep the last one on the line\n    for (let i = cursors.length - 2; i >= 0; i--) {\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n            // Remove cursor at `i`\n            cursors.splice(i, 1);\n        }\n    }\n    const r = [];\n    let rLen = 0;\n    let cursorIndex = 0;\n    const cursorLen = cursors.length;\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        const lineContent = model.getLineContent(lineNumber);\n        const maxLineColumn = lineContent.length + 1;\n        let minEditColumn = 0;\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n            minEditColumn = cursors[cursorIndex].column;\n            cursorIndex++;\n            if (minEditColumn === maxLineColumn) {\n                // The cursor is at the end of the line => no edits for sure on this line\n                continue;\n            }\n        }\n        if (lineContent.length === 0) {\n            continue;\n        }\n        const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n        let fromColumn = 0;\n        if (lastNonWhitespaceIndex === -1) {\n            // Entire line is whitespace\n            fromColumn = 1;\n        }\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n            // There is trailing whitespace\n            fromColumn = lastNonWhitespaceIndex + 2;\n        }\n        else {\n            // There is no trailing whitespace\n            continue;\n        }\n        fromColumn = Math.max(minEditColumn, fromColumn);\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n    }\n    return r;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n    constructor(selection, isCopyingDown, noop) {\n        this._selection = selection;\n        this._isCopyingDown = isCopyingDown;\n        this._noop = noop || false;\n        this._selectionDirection = 0 /* SelectionDirection.LTR */;\n        this._selectionId = null;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._endLineNumberDelta = 1;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const sourceLines = [];\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            sourceLines.push(model.getLineContent(i));\n        }\n        const sourceText = sourceLines.join('\\n');\n        if (sourceText === '') {\n            // Duplicating empty line\n            if (this._isCopyingDown) {\n                this._startLineNumberDelta++;\n                this._endLineNumberDelta++;\n            }\n        }\n        if (this._noop) {\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n        }\n        else {\n            if (!this._isCopyingDown) {\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n            }\n            else {\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        this._selectionDirection = this._selection.getDirection();\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n            let startLineNumber = result.startLineNumber;\n            let startColumn = result.startColumn;\n            let endLineNumber = result.endLineNumber;\n            let endColumn = result.endColumn;\n            if (this._startLineNumberDelta !== 0) {\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\n                startColumn = 1;\n            }\n            if (this._endLineNumberDelta !== 0) {\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\n                endColumn = 1;\n            }\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\nlet MoveLinesCommand = class MoveLinesCommand {\n    constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\n        this._languageConfigurationService = _languageConfigurationService;\n        this._selection = selection;\n        this._isMovingDown = isMovingDown;\n        this._autoIndent = autoIndent;\n        this._selectionId = null;\n        this._moveEndLineSelectionShrink = false;\n    }\n    getEditOperations(model, builder) {\n        const modelLineCount = model.getLineCount();\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        this._moveEndPositionDown = false;\n        let s = this._selection;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n        const virtualModel = {\n            tokenization: {\n                getLineTokens: (lineNumber) => {\n                    return model.tokenization.getLineTokens(lineNumber);\n                },\n                getLanguageId: () => {\n                    return model.getLanguageId();\n                },\n                getLanguageIdAtPosition: (lineNumber, column) => {\n                    return model.getLanguageIdAtPosition(lineNumber, column);\n                },\n            },\n            getLineContent: null,\n        };\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n            // Current line is empty\n            const lineNumber = s.startLineNumber;\n            const otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\n                // Other line number is empty too, so no editing is needed\n                // Add a no-op to force running by the model\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\n            }\n            else {\n                // Type content from other line number on line number\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n                // Remove content from other line number\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n            }\n            // Track selection at the other line number\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n        }\n        else {\n            let movingLineNumber;\n            let movingLineText;\n            if (this._isMovingDown) {\n                movingLineNumber = s.endLineNumber + 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n                let insertingText = movingLineText;\n                if (this.shouldAutoIndent(model, s)) {\n                    const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n                    if (movingLineMatchResult !== null) {\n                        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                        const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                        const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                        insertingText = newIndentation + this.trimLeft(movingLineText);\n                    }\n                    else {\n                        // no enter rule matches, let's check indentatin rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return model.getLineContent(movingLineNumber);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfMovingLine !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                                insertingText = newIndentation + this.trimLeft(movingLineText);\n                            }\n                        }\n                    }\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\n                    // to s.startLineNumber\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                    const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match onEnter rules, let's check indentation rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return insertingText;\n                            }\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                                return model.getLineContent(lineNumber - 1);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\n                        if (newIndentatOfMovingBlock !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n                else {\n                    // Insert line that needs to be moved before\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                }\n            }\n            else {\n                movingLineNumber = s.startLineNumber - 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n                // Insert line that needs to be moved after\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n                if (this.shouldAutoIndent(model, s)) {\n                    virtualModel.getLineContent = (lineNumber) => {\n                        if (lineNumber === movingLineNumber) {\n                            return model.getLineContent(s.startLineNumber);\n                        }\n                        else {\n                            return model.getLineContent(lineNumber);\n                        }\n                    };\n                    const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\n                        const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfFirstLine !== null) {\n                            // adjust the indentation of the moving block\n                            const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\n        return {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n    }\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\n        if (enter) {\n            let enterPrefix = enter.indentation;\n            if (enter.indentAction === IndentAction.None) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.Indent) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\n                enterPrefix = enter.indentation;\n            }\n            else if (enter.indentAction === IndentAction.Outdent) {\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n            }\n            const movingLineText = model.getLineContent(line);\n            if (this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix)) >= 0) {\n                const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n                const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\n                }\n                const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                return newSpaceCnt - oldSpaceCnt;\n            }\n        }\n        return null;\n    }\n    /**\n     *\n     * @param model\n     * @param indentConverter\n     * @param tabSize\n     * @param line the line moving down\n     * @param futureAboveLineNumber the line which will be at the `line` position\n     * @param futureAboveLineText\n     */\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n            // break\n            const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n            const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n        else {\n            // go upwards, starting from `line - 1`\n            let validPrecedingLine = line - 1;\n            while (validPrecedingLine >= 1) {\n                const lineContent = model.getLineContent(validPrecedingLine);\n                const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n                if (nonWhitespaceIdx >= 0) {\n                    break;\n                }\n                validPrecedingLine--;\n            }\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\n                return null;\n            }\n            const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n            const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n    }\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n        let validPrecedingLine = oneLineAbove;\n        while (validPrecedingLine >= 1) {\n            // ship empty lines as empty lines just inherit indentation\n            let lineContent;\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n                lineContent = previousLineText;\n            }\n            else {\n                lineContent = model.getLineContent(validPrecedingLine);\n            }\n            const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n            if (nonWhitespaceIdx >= 0) {\n                break;\n            }\n            validPrecedingLine--;\n        }\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\n            return null;\n        }\n        const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n        const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n    trimLeft(str) {\n        return str.replace(/^\\s+/, '');\n    }\n    shouldAutoIndent(model, selection) {\n        if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\n            return false;\n        }\n        // if it's not easy to tokenize, we stop auto indent.\n        if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n            return false;\n        }\n        const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n        const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\n            return false;\n        }\n        if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\n            return false;\n        }\n        return true;\n    }\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + offset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n                    // as users select part of the original indent white spaces\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n                    this._moveEndLineSelectionShrink = true;\n                }\n            }\n        }\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n            result = result.setEndPosition(result.endLineNumber, 2);\n        }\n        return result;\n    }\n};\nMoveLinesCommand = __decorate([\n    __param(3, ILanguageConfigurationService)\n], MoveLinesCommand);\nexport { MoveLinesCommand };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class SortLinesCommand {\n    constructor(selection, descending) {\n        this.selection = selection;\n        this.descending = descending;\n        this.selectionId = null;\n    }\n    static getCollator() {\n        if (!SortLinesCommand._COLLATOR) {\n            SortLinesCommand._COLLATOR = new Intl.Collator();\n        }\n        return SortLinesCommand._COLLATOR;\n    }\n    getEditOperations(model, builder) {\n        const op = sortLines(model, this.selection, this.descending);\n        if (op) {\n            builder.addEditOperation(op.range, op.text);\n        }\n        this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n        if (model === null) {\n            return false;\n        }\n        const data = getSortData(model, selection, descending);\n        if (!data) {\n            return false;\n        }\n        for (let i = 0, len = data.before.length; i < len; i++) {\n            if (data.before[i] !== data.after[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nSortLinesCommand._COLLATOR = null;\nfunction getSortData(model, selection, descending) {\n    const startLineNumber = selection.startLineNumber;\n    let endLineNumber = selection.endLineNumber;\n    if (selection.endColumn === 1) {\n        endLineNumber--;\n    }\n    // Nothing to sort if user didn't select anything.\n    if (startLineNumber >= endLineNumber) {\n        return null;\n    }\n    const linesToSort = [];\n    // Get the contents of the selection to be sorted.\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        linesToSort.push(model.getLineContent(lineNumber));\n    }\n    let sorted = linesToSort.slice(0);\n    sorted.sort(SortLinesCommand.getCollator().compare);\n    // If descending, reverse the order.\n    if (descending === true) {\n        sorted = sorted.reverse();\n    }\n    return {\n        startLineNumber: startLineNumber,\n        endLineNumber: endLineNumber,\n        before: linesToSort,\n        after: sorted\n    };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n    const data = getSortData(model, selection, descending);\n    if (!data) {\n        return null;\n    }\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const commands = [];\n        const selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(9 /* EditorOption.autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections() || [];\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let linesDeleted = 0;\n        for (const selection of editor.getSelections()) {\n            const uniqueLines = new Set();\n            const lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                const line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        const selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const ops = this._getLinesToRemove(editor);\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        const edits = [];\n        const cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        const operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        const mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        const rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        const effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            const range = rangesToDelete[i];\n            const nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        const edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                const newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            const range = rangesToDelete[i];\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        const rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        const reducedSelections = [];\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            const selection = reducedSelections[i];\n            const startLineNumber = selection.startLineNumber;\n            const startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            const selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                const position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                const lineText = model.getLineContent(i);\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose characters around the cursor\"),\n            alias: 'Transpose characters around the cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const cursor = selection.getStartPosition();\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(119 /* EditorOption.wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class KebabCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToKebabcase',\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n            alias: 'Transform to Kebab Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    static isSupported() {\n        const areAllRegexpsSupported = [\n            this.caseBoundary,\n            this.singleLetters,\n            this.underscoreBoundary,\n        ].every((regexp) => regexp.isSupported());\n        return areAllRegexpsSupported;\n    }\n    _modifyText(text, _) {\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\n        const singleLetters = KebabCaseAction.singleLetters.get();\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n            // one or more regexps aren't supported\n            return text;\n        }\n        return text\n            .replace(underscoreBoundary, '$1-$3')\n            .replace(caseBoundary, '$1-$2')\n            .replace(singleLetters, '$1-$2')\n            .toLocaleLowerCase();\n    }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n    registerEditorAction(KebabCaseAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._syncRangesToken = 0;\n        this._localToDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\n        this._enabled = false;\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { min: 200 });\n        this._currentDecorations = this._editor.createDecorationsCollection();\n        this._languageWordPattern = null;\n        this._currentWordPattern = null;\n        this._ignoreChangeEvent = false;\n        this._localToDispose = this._register(new DisposableStore());\n        this._rangeUpdateTriggerPromise = null;\n        this._rangeSyncTriggerPromise = null;\n        this._currentRequest = null;\n        this._currentRequestPosition = null;\n        this._currentRequestModelVersion = null;\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(64 /* EditorOption.linkedEditing */) || e.hasChanged(84 /* EditorOption.renameOnType */)) {\n                this.reinitialize(false);\n            }\n        }));\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n        this.reinitialize(true);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkedEditingContribution.ID);\n    }\n    reinitialize(forceRefresh) {\n        const model = this._editor.getModel();\n        const isEnabled = model !== null && (this._editor.getOption(64 /* EditorOption.linkedEditing */) || this._editor.getOption(84 /* EditorOption.renameOnType */)) && this._providers.has(model);\n        if (isEnabled === this._enabled && !forceRefresh) {\n            return;\n        }\n        this._enabled = isEnabled;\n        this.clearRanges();\n        this._localToDispose.clear();\n        if (!isEnabled || model === null) {\n            return;\n        }\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        }));\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n        const triggerRangeUpdate = () => {\n            var _a;\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\n        };\n        const rangeSyncScheduler = new Delayer(0);\n        const triggerRangeSync = (token) => {\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n        };\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (!this._ignoreChangeEvent) {\n                if (this._currentDecorations.length > 0) {\n                    const referenceRange = this._currentDecorations.getRange(0);\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n                        triggerRangeSync(this._syncRangesToken);\n                        return;\n                    }\n                }\n            }\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add({\n            dispose: () => {\n                rangeUpdateScheduler.dispose();\n                rangeSyncScheduler.dispose();\n            }\n        });\n        this.updateRanges();\n    }\n    _syncRanges(token) {\n        // dalayed invocation, make sure we're still on\n        if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n            // nothing to do\n            return;\n        }\n        const model = this._editor.getModel();\n        const referenceRange = this._currentDecorations.getRange(0);\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n            return this.clearRanges();\n        }\n        const referenceValue = model.getValueInRange(referenceRange);\n        if (this._currentWordPattern) {\n            const match = referenceValue.match(this._currentWordPattern);\n            const matchLength = match ? match[0].length : 0;\n            if (matchLength !== referenceValue.length) {\n                return this.clearRanges();\n            }\n        }\n        const edits = [];\n        for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n            const mirrorRange = this._currentDecorations.getRange(i);\n            if (!mirrorRange) {\n                continue;\n            }\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n                edits.push({\n                    range: mirrorRange,\n                    text: referenceValue\n                });\n            }\n            else {\n                let oldValue = model.getValueInRange(mirrorRange);\n                let newValue = referenceValue;\n                let rangeStartColumn = mirrorRange.startColumn;\n                let rangeEndColumn = mirrorRange.endColumn;\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n                rangeStartColumn += commonPrefixLength;\n                oldValue = oldValue.substr(commonPrefixLength);\n                newValue = newValue.substr(commonPrefixLength);\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n                rangeEndColumn -= commonSuffixLength;\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n                    edits.push({\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n                        text: newValue\n                    });\n                }\n            }\n        }\n        if (edits.length === 0) {\n            return;\n        }\n        try {\n            this._editor.popUndoStop();\n            this._ignoreChangeEvent = true;\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n            this._editor.executeEdits('linkedEditing', edits);\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n    dispose() {\n        this.clearRanges();\n        super.dispose();\n    }\n    clearRanges() {\n        this._visibleContextKey.set(false);\n        this._currentDecorations.clear();\n        if (this._currentRequest) {\n            this._currentRequest.cancel();\n            this._currentRequest = null;\n            this._currentRequestPosition = null;\n        }\n    }\n    updateRanges(force = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                this.clearRanges();\n                return;\n            }\n            const position = this._editor.getPosition();\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n                // disabled or multicursor\n                this.clearRanges();\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n                if (position.equals(this._currentRequestPosition)) {\n                    return; // same position\n                }\n                if (this._currentDecorations.length > 0) {\n                    const range = this._currentDecorations.getRange(0);\n                    if (range && range.containsPosition(position)) {\n                        return; // just moving inside the existing primary range\n                    }\n                }\n            }\n            this._currentRequestPosition = position;\n            this._currentRequestModelVersion = modelVersionId;\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const sw = new StopWatch(false);\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\n                    this._debounceInformation.update(model, sw.elapsed());\n                    if (request !== this._currentRequest) {\n                        return;\n                    }\n                    this._currentRequest = null;\n                    if (modelVersionId !== model.getVersionId()) {\n                        return;\n                    }\n                    let ranges = [];\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\n                        ranges = response.ranges;\n                    }\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n                    let foundReferenceRange = false;\n                    for (let i = 0, len = ranges.length; i < len; i++) {\n                        if (Range.containsPosition(ranges[i], position)) {\n                            foundReferenceRange = true;\n                            if (i !== 0) {\n                                const referenceRange = ranges[i];\n                                ranges.splice(i, 1);\n                                ranges.unshift(referenceRange);\n                            }\n                            break;\n                        }\n                    }\n                    if (!foundReferenceRange) {\n                        // Cannot do linked editing if the ranges are not where the cursor is...\n                        this.clearRanges();\n                        return;\n                    }\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n                    this._visibleContextKey.set(true);\n                    this._currentDecorations.set(decorations);\n                    this._syncRangesToken++; // cancel any pending syncRanges call\n                }\n                catch (err) {\n                    if (!isCancellationError(err)) {\n                        onUnexpectedError(err);\n                    }\n                    if (this._currentRequest === request || !this._currentRequest) {\n                        // stop if we are still the latest request\n                        this.clearRanges();\n                    }\n                }\n            }));\n            this._currentRequest = request;\n            return request;\n        });\n    }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n    description: 'linked-editing',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.linkedEditing',\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n            alias: 'Start Linked Editing',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(_accessor, editor) {\n        const controller = LinkedEditingContribution.get(editor);\n        if (controller) {\n            return Promise.resolve(controller.updateRanges(true));\n        }\n        return Promise.resolve();\n    }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n    id: 'cancelLinkedEditingInput',\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n    handler: x => x.clearRanges(),\n    kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n    const orderedByScore = providers.ordered(model);\n    // in order of score ask the linked editing range provider\n    // until someone response with a good result\n    // (good = not null)\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield provider.provideLinkedEditingRanges(model, position, token);\n        }\n        catch (e) {\n            onUnexpectedExternalError(e);\n            return undefined;\n        }\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterThemingParticipant((theme, collector) => {\n    const editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\n    if (editorLinkedEditingBackgroundColor) {\n        collector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`);\n    }\n});\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\nregisterEditorAction(LinkedEditingAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n    constructor(link, provider) {\n        this._link = link;\n        this._provider = provider;\n    }\n    toJSON() {\n        return {\n            range: this.range,\n            url: this.url,\n            tooltip: this.tooltip\n        };\n    }\n    get range() {\n        return this._link.range;\n    }\n    get url() {\n        return this._link.url;\n    }\n    get tooltip() {\n        return this._link.tooltip;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._link.url) {\n                return this._link.url;\n            }\n            if (typeof this._provider.resolveLink === 'function') {\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n                    this._link = value || this._link;\n                    if (this._link.url) {\n                        // recurse\n                        return this.resolve(token);\n                    }\n                    return Promise.reject(new Error('missing'));\n                });\n            }\n            return Promise.reject(new Error('missing'));\n        });\n    }\n}\nexport class LinksList {\n    constructor(tuples) {\n        this._disposables = new DisposableStore();\n        let links = [];\n        for (const [list, provider] of tuples) {\n            // merge all links\n            const newLinks = list.links.map(link => new Link(link, provider));\n            links = LinksList._union(links, newLinks);\n            // register disposables\n            if (isDisposable(list)) {\n                this._disposables.add(list);\n            }\n        }\n        this.links = links;\n    }\n    dispose() {\n        this._disposables.dispose();\n        this.links.length = 0;\n    }\n    static _union(oldLinks, newLinks) {\n        // reunite oldLinks with newLinks and remove duplicates\n        const result = [];\n        let oldIndex;\n        let oldLen;\n        let newIndex;\n        let newLen;\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n            const oldLink = oldLinks[oldIndex];\n            const newLink = newLinks[newIndex];\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n                // Remove the oldLink\n                oldIndex++;\n                continue;\n            }\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n            if (comparisonResult < 0) {\n                // oldLink is before\n                result.push(oldLink);\n                oldIndex++;\n            }\n            else {\n                // newLink is before\n                result.push(newLink);\n                newIndex++;\n            }\n        }\n        for (; oldIndex < oldLen; oldIndex++) {\n            result.push(oldLinks[oldIndex]);\n        }\n        for (; newIndex < newLen; newIndex++) {\n            result.push(newLinks[newIndex]);\n        }\n        return result;\n    }\n}\nexport function getLinks(providers, model, token) {\n    const lists = [];\n    // ask all providers for links in parallel\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n            if (result) {\n                lists[i] = [result, provider];\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(() => {\n        const result = new LinksList(coalesce(lists));\n        if (!token.isCancellationRequested) {\n            return result;\n        }\n        result.dispose();\n        return new LinksList([]);\n    });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    let [uri, resolveCount] = args;\n    assertType(uri instanceof URI);\n    if (typeof resolveCount !== 'number') {\n        resolveCount = 0;\n    }\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return [];\n    }\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\n    if (!list) {\n        return [];\n    }\n    // resolve links\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n        yield list.links[i].resolve(CancellationToken.None);\n    }\n    const result = list.links.slice(0);\n    list.dispose();\n    return result;\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorActiveLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nlet LinkDetector = class LinkDetector extends Disposable {\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(65 /* EditorOption.links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkDetector.ID);\n    }\n    computeLinksNow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.editor.hasModel() || !this.editor.getOption(65 /* EditorOption.links */)) {\n                return;\n            }\n            const model = this.editor.getModel();\n            if (!this.providers.has(model)) {\n                return;\n            }\n            if (this.activeLinksList) {\n                this.activeLinksList.dispose();\n                this.activeLinksList = null;\n            }\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n            try {\n                const sw = new StopWatch(false);\n                this.activeLinksList = yield this.computePromise;\n                this.debounceInformation.update(model, sw.elapsed());\n                if (model.isDisposed()) {\n                    return;\n                }\n                this.updateDecorations(this.activeLinksList.links);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                this.computePromise = null;\n            }\n        });\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        this.editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            for (let i = 0, len = decorations.length; i < len; i++) {\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\n                this.currentOccurrences[occurence.decorationId] = occurence;\n            }\n        });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        var _a;\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector.ID = 'editor.linkDetector';\nLinkDetector = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n            }\n        }\n        const hoverMessage = new MarkdownString('', true)\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\n            .appendMarkdown(` (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector);\nregisterEditorAction(OpenLinkAction);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .detected-link-active { color: ${activeLinkForeground} !important; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane, MinimapPosition } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerSelectionHighlightForeground, minimapSelectionOccurrenceHighlight } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        const newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll(searchScope) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        const editorModel = this._editor.getModel();\n        if (searchScope) {\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    const resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            const editorModel = this._editor.getModel();\n            if (findState.searchScope) {\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n            else {\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll(findState.searchScope);\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            this._run(multiCursorController, findController);\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        this._decorations = editor.createDecorationsCollection();\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n    }\n    _update() {\n        this._setState(SelectionHighlighter._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(119 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this._decorations.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const hasFindOccurrences = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                // Show in overviewRuler only if model has no semantic highlighting\n                options: (hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW)\n            };\n        });\n        this._decorations.set(decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    description: 'selection-highlight-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nSelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n});\nSelectionHighlighter = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nexport class FocusNextCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusNextCursor',\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n                args: [],\n            },\n            alias: 'Focus Next Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.shift();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.push(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class FocusPreviousCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusPreviousCursor',\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n                args: [],\n            },\n            alias: 'Focus Previous Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.pop();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.unshift(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport function provideSignatureHelp(registry, model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const supports = registry.ordered(model);\n        for (const support of supports) {\n            try {\n                const result = yield support.provideSignatureHelp(model, position, token, context);\n                if (result) {\n                    return result;\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Type.Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Type.Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\n        this._onChangedHints.fire(this.state.hints);\n    }\n    doTrigger(triggerId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n            const activeSignatureHelp = this.getLastActiveHints();\n            this.cancel(true);\n            if (this._pendingTriggers.length === 0) {\n                return false;\n            }\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            const triggerContext = {\n                triggerKind: context.triggerKind,\n                triggerCharacter: context.triggerCharacter,\n                isRetrigger: isRetrigger,\n                activeSignatureHelp: activeSignatureHelp\n            };\n            if (!this.editor.hasModel()) {\n                return false;\n            }\n            const model = this.editor.getModel();\n            const position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n            try {\n                const result = yield this.state.request;\n                // Check that we are still resolving the correct signature help\n                if (triggerId !== this.triggerId) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    return false;\n                }\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    this._lastSignatureHelpResult.clear();\n                    this.cancel();\n                    return false;\n                }\n                else {\n                    this.state = new ParameterHintState.Active(result.value);\n                    this._lastSignatureHelpResult.value = result;\n                    this._onChangedHints.fire(this.state.hints);\n                    return true;\n                }\n            }\n            catch (error) {\n                if (triggerId === this.triggerId) {\n                    this.state = ParameterHintState.Default;\n                }\n                onUnexpectedError(error);\n                return false;\n            }\n        });\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        // Update trigger characters\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                this.triggerChars.add(ch.charCodeAt(0));\n                // All trigger characters are also considered retrigger characters\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(78 /* EditorOption.parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, listHighlightForeground, registerColor, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n    constructor(editor, contextKeyService, openerService, languageService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n        this._register(this.model.onChangedHints(newParameterHints => {\n            if (newParameterHints) {\n                this.show();\n                this.render(newParameterHints);\n            }\n            else {\n                this.hide();\n            }\n        }));\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(e => e.hasChanged(46 /* EditorOption.fontInfo */))\n            .on(updateFont, null));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            var _a;\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget.ID;\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, ILanguageFeaturesService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nexport const editorHoverWidgetHighlightForeground = registerColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${linkHover}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\n    }\n    const parameterHighlightColor = theme.getColor(editorHoverWidgetHighlightForeground);\n    if (parameterHighlightColor) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${parameterHighlightColor}}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = class ParameterHintsController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.widget = this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor));\n    }\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController.ID);\n    }\n    cancel() {\n        this.widget.cancel();\n    }\n    previous() {\n        this.widget.previous();\n    }\n    next() {\n        this.widget.next();\n    }\n    trigger(context) {\n        this.widget.trigger(context);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = __decorate([\n    __param(1, IInstantiationService)\n], ParameterHintsController);\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        if (controller) {\n            controller.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.Invoke\n            });\n        }\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor) {\n        var _a;\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(false)));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IdleValue, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._disposableStore.add(new IdleValue(() => this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n    }\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range);\n            // do rename at location\n            const selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    code: 'undoredo.rename',\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    respectAutoSaveConfig: true\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.value.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.value.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Position } from '../../../common/core/position.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._sessionStore = new DisposableStore();\n        this._ranges = [];\n        this._rangesVersionId = 0;\n        this._editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(34 /* EditorOption.experimental */)) {\n                this.onConfigurationChange();\n            }\n        }));\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(true), 50));\n        this.onConfigurationChange();\n    }\n    onConfigurationChange() {\n        const options = this._editor.getOption(34 /* EditorOption.experimental */);\n        if (options.stickyScroll.enabled === false) {\n            this.stickyScrollWidget.emptyRootNode();\n            this._editor.removeOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidChangeModel(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._update(false)));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this._update(true)));\n            this._update(true);\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this.stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._update(false);\n        }\n    }\n    _update(updateOutline = false) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (updateOutline) {\n                (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n                this._cts = new CancellationTokenSource();\n                yield this._updateOutlineModel(this._cts.token);\n            }\n            const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n            if (hiddenRanges) {\n                for (const hiddenRange of hiddenRanges) {\n                    this._ranges = this._ranges.filter(range => { return !(range[0] >= hiddenRange.startLineNumber && range[1] <= hiddenRange.endLineNumber + 1); });\n                }\n            }\n            this._renderStickyScroll();\n        });\n    }\n    _findLineRanges(outlineElement, depth) {\n        if (outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.size) {\n            let didRecursion = false;\n            for (const outline of outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.values()) {\n                const kind = outline.symbol.kind;\n                if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                    didRecursion = true;\n                    this._findLineRanges(outline, depth + 1);\n                }\n            }\n            if (!didRecursion) {\n                this._addOutlineRanges(outlineElement, depth);\n            }\n        }\n        else {\n            this._addOutlineRanges(outlineElement, depth);\n        }\n    }\n    _addOutlineRanges(outlineElement, depth) {\n        let currentStartLine = 0;\n        let currentEndLine = 0;\n        while (outlineElement) {\n            const kind = outlineElement.symbol.kind;\n            if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                currentStartLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.startLineNumber;\n                currentEndLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.endLineNumber;\n                this._ranges.push([currentStartLine, currentEndLine, depth]);\n                depth--;\n            }\n            if (outlineElement.parent instanceof OutlineElement) {\n                outlineElement = outlineElement.parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    _updateOutlineModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._editor.getModel();\n                const modelVersionId = model.getVersionId();\n                const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this._ranges = [];\n                this._rangesVersionId = modelVersionId;\n                for (const outline of outlineModel.children.values()) {\n                    if (outline instanceof OutlineElement) {\n                        const kind = outline.symbol.kind;\n                        if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                            this._findLineRanges(outline, 1);\n                        }\n                        else {\n                            this._findLineRanges(outline, 0);\n                        }\n                    }\n                    this._ranges = this._ranges.sort(function (a, b) {\n                        if (a[0] !== b[0]) {\n                            return a[0] - b[0];\n                        }\n                        else if (a[1] !== b[1]) {\n                            return b[1] - a[1];\n                        }\n                        else {\n                            return a[2] - b[2];\n                        }\n                    });\n                    let previous = [];\n                    for (const [index, arr] of this._ranges.entries()) {\n                        const [start, end, _depth] = arr;\n                        if (previous[0] === start && previous[1] === end) {\n                            this._ranges.splice(index, 1);\n                        }\n                        else {\n                            previous = arr;\n                        }\n                    }\n                }\n            }\n        });\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const model = this._editor.getModel();\n        if (this._rangesVersionId !== model.getVersionId()) {\n            // Old _ranges not updated yet\n            return;\n        }\n        const scrollTop = this._editor.getScrollTop();\n        this.stickyScrollWidget.emptyRootNode();\n        const beginningLinesConsidered = new Set();\n        for (const [index, arr] of this._ranges.entries()) {\n            const [start, end, depth] = arr;\n            if (end - start > 0 && model.getLineContent(start) !== '') {\n                const topOfElementAtDepth = (depth - 1) * lineHeight;\n                const bottomOfElementAtDepth = depth * lineHeight;\n                const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                if (!beginningLinesConsidered.has(start)) {\n                    if (topOfElementAtDepth >= topOfEndLine - 1 && topOfElementAtDepth < bottomOfEndLine - 2) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, -1, bottomOfEndLine - bottomOfElementAtDepth));\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth < bottomOfEndLine - 1) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, 0, 0));\n                    }\n                }\n                else {\n                    this._ranges.splice(index, 1);\n                }\n            }\n        }\n        this.stickyScrollWidget.updateRootNode();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyScrollController);\nconst _ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('stickyScrollViewLayer', { createHTML: value => value });\nclass StickyScrollCodeLine {\n    constructor(_lineNumber, _depth, _editor, _zIndex, _relativePosition) {\n        this._lineNumber = _lineNumber;\n        this._depth = _depth;\n        this._editor = _editor;\n        this._zIndex = _zIndex;\n        this._relativePosition = _relativePosition;\n        this.effectiveLineHeight = 0;\n        this.effectiveLineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */) + this._relativePosition;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    getDomNode() {\n        const root = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(this._lineNumber, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 100, 'none', true, true, null);\n        const sb = createStringBuilder(400);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineHTMLNode.style.overflow = 'hidden';\n        lineHTMLNode.style.whiteSpace = 'nowrap';\n        lineHTMLNode.style.display = 'inline-block';\n        lineHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.style.width = this._editor.getLayoutInfo().contentLeft.toString() + 'px';\n        lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineNumberHTMLNode.style.color = 'var(--vscode-editorLineNumber-foreground)';\n        lineNumberHTMLNode.style.display = 'inline-block';\n        lineNumberHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        const innerLineNumberHTML = document.createElement('span');\n        innerLineNumberHTML.innerText = this._lineNumber.toString();\n        innerLineNumberHTML.style.paddingLeft = this._editor.getLayoutInfo().lineNumbersLeft.toString() + 'px';\n        innerLineNumberHTML.style.width = this._editor.getLayoutInfo().lineNumbersWidth.toString() + 'px';\n        innerLineNumberHTML.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        innerLineNumberHTML.style.textAlign = 'right';\n        innerLineNumberHTML.style.float = 'left';\n        innerLineNumberHTML.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        root.onclick = e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this._editor.revealPosition({ lineNumber: this._lineNumber - this._depth + 1, column: 1 });\n        };\n        root.onmouseover = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScrollHover-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            innerLineNumberHTML.style.cursor = `pointer`;\n            lineHTMLNode.style.cursor = `pointer`;\n            root.style.cursor = `pointer`;\n            lineNumberHTMLNode.style.cursor = `pointer`;\n        };\n        root.onmouseleave = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScroll-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        };\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        root.appendChild(lineNumberHTMLNode);\n        root.appendChild(lineHTMLNode);\n        root.style.zIndex = this._zIndex.toString();\n        root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        root.style.overflow = 'hidden';\n        root.style.whiteSpace = 'nowrap';\n        root.style.width = '100%';\n        root.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        root.style.height = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        // Special case for last line of sticky scroll\n        if (this._relativePosition) {\n            root.style.position = 'relative';\n            root.style.top = this._relativePosition + 'px';\n            root.style.width = '100%';\n        }\n        return root;\n    }\n}\nclass StickyScrollWidget {\n    constructor(_editor) {\n        this._editor = _editor;\n        this.arrayOfCodeLines = [];\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode.style.width = '100%';\n        this.rootDomNode.style.boxShadow = `var(--vscode-scrollbar-shadow) 0 6px 6px -6px`;\n    }\n    getCurrentLines() {\n        const widgetLineRange = [];\n        for (const codeLine of this.arrayOfCodeLines) {\n            widgetLineRange.push(codeLine.lineNumber);\n        }\n        return widgetLineRange;\n    }\n    pushCodeLine(codeLine) {\n        this.arrayOfCodeLines.push(codeLine);\n    }\n    updateRootNode() {\n        let widgetHeight = 0;\n        for (const line of this.arrayOfCodeLines) {\n            widgetHeight += line.effectiveLineHeight;\n            this.rootDomNode.appendChild(line.getDomNode());\n        }\n        this.rootDomNode.style.height = widgetHeight.toString() + 'px';\n    }\n    emptyRootNode() {\n        this.arrayOfCodeLines.length = 0;\n        dom.clearNode(this.rootDomNode);\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        this.rootDomNode.style.zIndex = '2';\n        this.rootDomNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        return this.rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        const { word, startColumn } = obj;\n        const offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            const ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            const ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = class SmartSelectController {\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(104 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider()); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        const work = [];\n        const allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            const oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            const oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionItemInsertTextRule } from '../../../common/standalone/standaloneEnums.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.incomplete.size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & CompletionItemInsertTextRule.InsertAsSnippet)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(81 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(108 /* EditorOption.suggest */, model), this._getEditorOption(103 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.tokenization.resetTokenization();\n        const sw = new StopWatch(true);\n        model.tokenization.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nexport class ToggleTabFocusModeAction extends EditorAction {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            label: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, \"Toggle Tab Key Moves Focus\"),\n            alias: 'Toggle Tab Key Moves Focus',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const oldValue = TabFocus.getTabFocusMode();\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nregisterEditorAction(ToggleTabFocusModeAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, append, EventHelper } from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../../base/browser/touch.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../common/opener.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nlet Link = class Link extends Disposable {\n    constructor(container, _link, options = {}, openerService) {\n        var _a;\n        super();\n        this._link = _link;\n        this._enabled = true;\n        this.el = append(container, $('a.monaco-link', {\n            tabIndex: (_a = _link.tabIndex) !== null && _a !== void 0 ? _a : 0,\n            href: _link.href,\n            title: _link.title\n        }, _link.label));\n        this.el.setAttribute('role', 'button');\n        const onClickEmitter = this._register(new DomEmitter(this.el, 'click'));\n        const onKeyPress = this._register(new DomEmitter(this.el, 'keypress'));\n        const onEnterPress = Event.chain(onKeyPress.event)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 3 /* KeyCode.Enter */)\n            .event;\n        const onTap = this._register(new DomEmitter(this.el, TouchEventType.Tap)).event;\n        this._register(Gesture.addTarget(this.el));\n        const onOpen = Event.any(onClickEmitter.event, onEnterPress, onTap);\n        this._register(onOpen(e => {\n            if (!this.enabled) {\n                return;\n            }\n            EventHelper.stop(e, true);\n            if (options === null || options === void 0 ? void 0 : options.opener) {\n                options.opener(this._link.href);\n            }\n            else {\n                openerService.open(this._link.href, { allowCommands: true });\n            }\n        }));\n        this.enabled = true;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        if (enabled) {\n            this.el.setAttribute('aria-disabled', 'false');\n            this.el.tabIndex = 0;\n            this.el.style.pointerEvents = 'auto';\n            this.el.style.opacity = '1';\n            this.el.style.cursor = 'pointer';\n            this._enabled = false;\n        }\n        else {\n            this.el.setAttribute('aria-disabled', 'true');\n            this.el.tabIndex = -1;\n            this.el.style.pointerEvents = 'none';\n            this.el.style.opacity = '0.4';\n            this.el.style.cursor = 'default';\n            this._enabled = true;\n        }\n        this._enabled = enabled;\n    }\n};\nLink = __decorate([\n    __param(3, IOpenerService)\n], Link);\nexport { Link };\nregisterThemingParticipant((theme, collector) => {\n    const textLinkForegroundColor = theme.getColor(textLinkForeground);\n    if (textLinkForegroundColor) {\n        collector.addRule(`.monaco-link { color: ${textLinkForegroundColor}; }`);\n    }\n    const textLinkActiveForegroundColor = theme.getColor(textLinkActiveForeground);\n    if (textLinkActiveForegroundColor) {\n        collector.addRule(`.monaco-link:hover { color: ${textLinkActiveForegroundColor}; }`);\n    }\n});\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                var _a;\n                this.hide();\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(115 /* EditorOption.unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(115 /* EditorOption.unicodeHighlighting */)) {\n                this._options = _editor.getOption(115 /* EditorOption.unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decoration) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decoration);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorations.set(decorations);\n        });\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(decoration.range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorations.set(decorations);\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const text = model.getValueInRange(decoration.range);\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 4;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */:\n                    reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    break;\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n            const markdown = new MarkdownString('', true)\n                .appendMarkdown(reason)\n                .appendText(' ')\n                .appendLink(uri, adjustSettings);\n            result.push(new MarkdownHover(this, d.range, [markdown], index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* CharCode.BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport class ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._config = this._editor.getOption(116 /* EditorOption.unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(116 /* EditorOption.unusualLineTerminators */)) {\n                this._config = this._editor.getOption(116 /* EditorOption.unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(83 /* EditorOption.readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            const result = yield this._dialogService.confirm({\n                title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                primaryButton: nls.localize('unusualLineTerminators.fix', \"Remove Unusual Line Terminators\"),\n                secondaryButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n            });\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../../../common/services/getSemanticTokens.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../../../common/services/modelService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _modelService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._modelService = _modelService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._modelService.getSemanticTokensProviderStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nconst editorWordHighlight = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hcDark: null, hcLight: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hcDark: null, hcLight: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nconst editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hcDark: '#A0A0A0CC', hcLight: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hcDark: '#C0A0C0CC', hcLight: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(registry, model, position, token) {\n    const orderedByScore = registry.ordered(model);\n    // in order of score ask the occurrences provider\n    // until someone response with a good result\n    // (good = none empty array)\n    return first(orderedByScore.map(provider => () => {\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\n            .then(undefined, onUnexpectedExternalError);\n    }), arrays.isNonEmptyArray);\n}\nclass OccurenceAtPositionRequest {\n    constructor(_model, _selection, _wordSeparators) {\n        this._model = _model;\n        this._selection = _selection;\n        this._wordSeparators = _wordSeparators;\n        this._wordRange = this._getCurrentWordRange(_model, _selection);\n        this._result = null;\n    }\n    get result() {\n        if (!this._result) {\n            this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\n        }\n        return this._result;\n    }\n    _getCurrentWordRange(model, selection) {\n        const word = model.getWordAtPosition(selection.getPosition());\n        if (word) {\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n        }\n        return null;\n    }\n    isValid(model, selection, decorations) {\n        const lineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endColumn = selection.endColumn;\n        const currentWordRange = this._getCurrentWordRange(model, selection);\n        let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n        // (Same symbol)\n        for (let i = 0, len = decorations.length; !requestIsValid && i < len; i++) {\n            const range = decorations.getRange(i);\n            if (range && range.startLineNumber === lineNumber) {\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n                    requestIsValid = true;\n                }\n            }\n        }\n        return requestIsValid;\n    }\n    cancel() {\n        this.result.cancel();\n    }\n}\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators, providers) {\n        super(model, selection, wordSeparators);\n        this._providers = providers;\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => value || []);\n    }\n}\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators) {\n        super(model, selection, wordSeparators);\n        this._selectionIsEmpty = selection.isEmpty();\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return timeout(250, token).then(() => {\n            if (!selection.isEmpty()) {\n                return [];\n            }\n            const word = model.getWordAtPosition(selection.getPosition());\n            if (!word || word.word.length > 1000) {\n                return [];\n            }\n            const matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n            return matches.map(m => {\n                return {\n                    range: m.range,\n                    kind: DocumentHighlightKind.Text\n                };\n            });\n        });\n    }\n    isValid(model, selection, decorations) {\n        const currentSelectionIsEmpty = selection.isEmpty();\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n            return false;\n        }\n        return super.isValid(model, selection, decorations);\n    }\n}\nfunction computeOccurencesAtPosition(registry, model, selection, wordSeparators) {\n    if (registry.has(model)) {\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\n    }\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\n});\nclass WordHighlighter {\n    constructor(editor, providers, contextKeyService) {\n        this.toUnhook = new DisposableStore();\n        this.workerRequestTokenId = 0;\n        this.workerRequestCompleted = false;\n        this.workerRequestValue = [];\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n        this.editor = editor;\n        this.providers = providers;\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n        this._ignorePositionChangeEvent = false;\n        this.occurrencesHighlight = this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        this.model = this.editor.getModel();\n        this.toUnhook.add(editor.onDidChangeCursorPosition((e) => {\n            if (this._ignorePositionChangeEvent) {\n                // We are changing the position => ignore this event\n                return;\n            }\n            if (!this.occurrencesHighlight) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._onPositionChanged(e);\n        }));\n        this.toUnhook.add(editor.onDidChangeModelContent((e) => {\n            this._stopAll();\n        }));\n        this.toUnhook.add(editor.onDidChangeConfiguration((e) => {\n            const newValue = this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n            if (this.occurrencesHighlight !== newValue) {\n                this.occurrencesHighlight = newValue;\n                this._stopAll();\n            }\n        }));\n        this.decorations = this.editor.createDecorationsCollection();\n        this.workerRequestTokenId = 0;\n        this.workerRequest = null;\n        this.workerRequestCompleted = false;\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n    }\n    hasDecorations() {\n        return (this.decorations.length > 0);\n    }\n    restore() {\n        if (!this.occurrencesHighlight) {\n            return;\n        }\n        this._run();\n    }\n    _getSortedHighlights() {\n        return (this.decorations.getRanges()\n            .sort(Range.compareRangesUsingStarts));\n    }\n    moveNext() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index + 1) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    moveBack() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index - 1 + highlights.length) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    _removeDecorations() {\n        if (this.decorations.length > 0) {\n            // remove decorations\n            this.decorations.clear();\n            this._hasWordHighlights.set(false);\n        }\n    }\n    _stopAll() {\n        // Remove any existing decorations\n        this._removeDecorations();\n        // Cancel any renderDecorationsTimer\n        if (this.renderDecorationsTimer !== -1) {\n            clearTimeout(this.renderDecorationsTimer);\n            this.renderDecorationsTimer = -1;\n        }\n        // Cancel any worker request\n        if (this.workerRequest !== null) {\n            this.workerRequest.cancel();\n            this.workerRequest = null;\n        }\n        // Invalidate any worker request callback\n        if (!this.workerRequestCompleted) {\n            this.workerRequestTokenId++;\n            this.workerRequestCompleted = true;\n        }\n    }\n    _onPositionChanged(e) {\n        // disabled\n        if (!this.occurrencesHighlight) {\n            this._stopAll();\n            return;\n        }\n        // ignore typing & other\n        if (e.reason !== 3 /* CursorChangeReason.Explicit */) {\n            this._stopAll();\n            return;\n        }\n        this._run();\n    }\n    _getWord() {\n        const editorSelection = this.editor.getSelection();\n        const lineNumber = editorSelection.startLineNumber;\n        const startColumn = editorSelection.startColumn;\n        return this.model.getWordAtPosition({\n            lineNumber: lineNumber,\n            column: startColumn\n        });\n    }\n    _run() {\n        const editorSelection = this.editor.getSelection();\n        // ignore multiline selection\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n            this._stopAll();\n            return;\n        }\n        const startColumn = editorSelection.startColumn;\n        const endColumn = editorSelection.endColumn;\n        const word = this._getWord();\n        // The selection must be inside a word or surround one word at most\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n            this._stopAll();\n            return;\n        }\n        // All the effort below is trying to achieve this:\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\n        // - 250ms later after the last cursor move event, render the occurrences\n        // - no flickering!\n        const workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this.decorations));\n        // There are 4 cases:\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n        // c) old workerRequest is valid, but not completed\n        // d) old workerRequest is not valid\n        // For a) no action is needed\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\n        if (workerRequestIsValid) {\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n                // case b)\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\n                clearTimeout(this.renderDecorationsTimer);\n                this.renderDecorationsTimer = -1;\n                this._beginRenderDecorations();\n            }\n        }\n        else {\n            // case d)\n            // Stop all previous actions and start fresh\n            this._stopAll();\n            const myRequestId = ++this.workerRequestTokenId;\n            this.workerRequestCompleted = false;\n            this.workerRequest = computeOccurencesAtPosition(this.providers, this.model, this.editor.getSelection(), this.editor.getOption(119 /* EditorOption.wordSeparators */));\n            this.workerRequest.result.then(data => {\n                if (myRequestId === this.workerRequestTokenId) {\n                    this.workerRequestCompleted = true;\n                    this.workerRequestValue = data || [];\n                    this._beginRenderDecorations();\n                }\n            }, onUnexpectedError);\n        }\n    }\n    _beginRenderDecorations() {\n        const currentTime = (new Date()).getTime();\n        const minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n        if (currentTime >= minimumRenderTime) {\n            // Synchronous\n            this.renderDecorationsTimer = -1;\n            this.renderDecorations();\n        }\n        else {\n            // Asynchronous\n            this.renderDecorationsTimer = setTimeout(() => {\n                this.renderDecorations();\n            }, (minimumRenderTime - currentTime));\n        }\n    }\n    renderDecorations() {\n        this.renderDecorationsTimer = -1;\n        const decorations = [];\n        for (const info of this.workerRequestValue) {\n            if (info.range) {\n                decorations.push({\n                    range: info.range,\n                    options: WordHighlighter._getDecorationOptions(info.kind)\n                });\n            }\n        }\n        this.decorations.set(decorations);\n        this._hasWordHighlights.set(this.hasDecorations());\n    }\n    static _getDecorationOptions(kind) {\n        if (kind === DocumentHighlightKind.Write) {\n            return this._WRITE_OPTIONS;\n        }\n        else if (kind === DocumentHighlightKind.Text) {\n            return this._TEXT_OPTIONS;\n        }\n        else {\n            return this._REGULAR_OPTIONS;\n        }\n    }\n    dispose() {\n        this._stopAll();\n        this.toUnhook.dispose();\n    }\n}\nWordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight-strong',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nlet WordHighlighterContribution = class WordHighlighterContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService) {\n        super();\n        this.wordHighlighter = null;\n        const createWordHighlighterIfPossible = () => {\n            if (editor.hasModel()) {\n                this.wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, contextKeyService);\n            }\n        };\n        this._register(editor.onDidChangeModel((e) => {\n            if (this.wordHighlighter) {\n                this.wordHighlighter.dispose();\n                this.wordHighlighter = null;\n            }\n            createWordHighlighterIfPossible();\n        }));\n        createWordHighlighterIfPossible();\n    }\n    static get(editor) {\n        return editor.getContribution(WordHighlighterContribution.ID);\n    }\n    saveViewState() {\n        if (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\n            return true;\n        }\n        return false;\n    }\n    moveNext() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveNext();\n        }\n    }\n    moveBack() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveBack();\n        }\n    }\n    restoreViewState(state) {\n        if (this.wordHighlighter && state) {\n            this.wordHighlighter.restore();\n        }\n    }\n    dispose() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.dispose();\n            this.wordHighlighter = null;\n        }\n        super.dispose();\n    }\n};\nWordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\nWordHighlighterContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService)\n], WordHighlighterContribution);\nclass WordHighlightNavigationAction extends EditorAction {\n    constructor(next, opts) {\n        super(opts);\n        this._isNext = next;\n    }\n    run(accessor, editor) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        if (this._isNext) {\n            controller.moveNext();\n        }\n        else {\n            controller.moveBack();\n        }\n    }\n}\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.wordHighlight.next',\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n            alias: 'Go to Next Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.wordHighlight.prev',\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n            alias: 'Go to Previous Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass TriggerWordHighlightAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.wordHighlight.trigger',\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n            alias: 'Trigger Symbol Highlight',\n            precondition: ctxHasWordHighlights.toNegated(),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.restoreViewState(true);\n    }\n}\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterThemingParticipant((theme, collector) => {\n    const selectionHighlight = theme.getColor(editorSelectionHighlight);\n    if (selectionHighlight) {\n        collector.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${selectionHighlight}; }`);\n        collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n    }\n    const wordHighlight = theme.getColor(editorWordHighlight);\n    if (wordHighlight) {\n        collector.addRule(`.monaco-editor .wordHighlight { background-color: ${wordHighlight}; }`);\n    }\n    const wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n    if (wordHighlightStrong) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${wordHighlightStrong}; }`);\n    }\n    const selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n    if (selectionHighlightBorder) {\n        collector.addRule(`.monaco-editor .selectionHighlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${selectionHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n    if (wordHighlightBorder) {\n        collector.addRule(`.monaco-editor .wordHighlight { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${wordHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n    if (wordHighlightStrongBorder) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${wordHighlightStrongBorder}; box-sizing: border-box; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { CursorState } from '../../../common/cursorCommon.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\nexport class MoveWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._inSelectionMode = opts.inSelectionMode;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const result = selections.map((sel) => {\n            const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n            const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType);\n            return this._moveTo(sel, outPosition, this._inSelectionMode);\n        });\n        model.pushStackElement();\n        editor._getViewModel().setCursorStates('moveWordCommand', 3 /* CursorChangeReason.Explicit */, result.map(r => CursorState.fromModelSelection(r)));\n        if (result.length === 1) {\n            const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n            editor.revealPosition(pos, 0 /* ScrollType.Smooth */);\n        }\n    }\n    _moveTo(from, to, inSelectionMode) {\n        if (inSelectionMode) {\n            // move just position\n            return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n        }\n        else {\n            // move everything\n            return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n        }\n    }\n}\nexport class WordLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class WordRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeft extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeftSelect extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeft',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeftSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRight extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordStartRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRightSelect extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordAccessibilityRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRight',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRightSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class DeleteWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._whitespaceHeuristics = opts.whitespaceHeuristics;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const autoClosingBrackets = editor.getOption(5 /* EditorOption.autoClosingBrackets */);\n        const autoClosingQuotes = editor.getOption(8 /* EditorOption.autoClosingQuotes */);\n        const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\n        const viewModel = editor._getViewModel();\n        const commands = selections.map((sel) => {\n            const deleteRange = this._delete({\n                wordSeparators,\n                model,\n                selection: sel,\n                whitespaceHeuristics: this._whitespaceHeuristics,\n                autoClosingDelete: editor.getOption(6 /* EditorOption.autoClosingDelete */),\n                autoClosingBrackets,\n                autoClosingQuotes,\n                autoClosingPairs,\n                autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\n            }, this._wordNavigationType);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordRightCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordRight(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteInsideWord extends EditorAction {\n    constructor() {\n        super({\n            id: 'deleteInsideWord',\n            precondition: EditorContextKeys.writable,\n            label: nls.localize('deleteInsideWord', \"Delete Word\"),\n            alias: 'Delete Word'\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const commands = selections.map((sel) => {\n            const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new CursorWordAccessibilityLeft());\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\nregisterEditorCommand(new CursorWordAccessibilityRight());\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());\nregisterEditorAction(DeleteInsideWord);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nexport class DeleteWordPartLeft extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordPartLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartLeft(ctx);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordPartRight extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordPartRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartRight(ctx);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class WordPartLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartLeft extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\nexport class WordPartRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartRight extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport class ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            if (this.editor.isSimpleWidget) {\n                messageController.showMessage(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"), this.editor.getPosition());\n            }\n            else {\n                messageController.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this.editor.getPosition());\n            }\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './accessibilityHelp.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\nconst CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\nlet AccessibilityHelpController = class AccessibilityHelpController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this._editor = editor;\n        this._widget = this._register(instantiationService.createInstance(AccessibilityHelpWidget, this._editor));\n    }\n    static get(editor) {\n        return editor.getContribution(AccessibilityHelpController.ID);\n    }\n    show() {\n        this._widget.show();\n    }\n    hide() {\n        this._widget.hide();\n    }\n};\nAccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\nAccessibilityHelpController = __decorate([\n    __param(1, IInstantiationService)\n], AccessibilityHelpController);\nfunction getSelectionLabel(selections, charactersSelected) {\n    if (!selections || selections.length === 0) {\n        return AccessibilityHelpNLS.noSelection;\n    }\n    if (selections.length === 1) {\n        if (charactersSelected) {\n            return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n        }\n        return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n    }\n    if (charactersSelected) {\n        return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n    }\n    if (selections.length > 0) {\n        return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n    }\n    return '';\n}\nlet AccessibilityHelpWidget = class AccessibilityHelpWidget extends Widget {\n    constructor(editor, _contextKeyService, _keybindingService, _openerService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._openerService = _openerService;\n        this._editor = editor;\n        this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(this._contextKeyService);\n        this._domNode = createFastDomNode(document.createElement('div'));\n        this._domNode.setClassName('accessibilityHelpWidget');\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('role', 'dialog');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode = createFastDomNode(document.createElement('div'));\n        this._contentDomNode.setAttribute('role', 'document');\n        this._domNode.appendChild(this._contentDomNode);\n        this._isVisible = false;\n        this._register(this._editor.onDidLayoutChange(() => {\n            if (this._isVisible) {\n                this._layout();\n            }\n        }));\n        // Intentionally not configurable!\n        this._register(dom.addStandardDisposableListener(this._contentDomNode.domNode, 'keydown', (e) => {\n            if (!this._isVisible) {\n                return;\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */)) {\n                alert(AccessibilityHelpNLS.emergencyConfOn);\n                this._editor.updateOptions({\n                    accessibilitySupport: 'on'\n                });\n                dom.clearNode(this._contentDomNode.domNode);\n                this._buildContent();\n                this._contentDomNode.domNode.focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */)) {\n                alert(AccessibilityHelpNLS.openingDocs);\n                let url = this._editor.getRawOptions().accessibilityHelpUrl;\n                if (typeof url === 'undefined') {\n                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';\n                }\n                this._openerService.open(URI.parse(url));\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }));\n        this.onblur(this._contentDomNode.domNode, () => {\n            this.hide();\n        });\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return AccessibilityHelpWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode.domNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._isVisibleKey.set(true);\n        this._layout();\n        this._domNode.setDisplay('block');\n        this._domNode.setAttribute('aria-hidden', 'false');\n        this._contentDomNode.domNode.tabIndex = 0;\n        this._buildContent();\n        this._contentDomNode.domNode.focus();\n    }\n    _descriptionForCommand(commandId, msg, noKbMsg) {\n        const kb = this._keybindingService.lookupKeybinding(commandId);\n        if (kb) {\n            return strings.format(msg, kb.getAriaLabel());\n        }\n        return strings.format(noKbMsg, commandId);\n    }\n    _buildContent() {\n        const options = this._editor.getOptions();\n        const selections = this._editor.getSelections();\n        let charactersSelected = 0;\n        if (selections) {\n            const model = this._editor.getModel();\n            if (model) {\n                selections.forEach((selection) => {\n                    charactersSelected += model.getValueLengthInRange(selection);\n                });\n            }\n        }\n        let text = getSelectionLabel(selections, charactersSelected);\n        if (options.get(56 /* EditorOption.inDiffEditor */)) {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyDiffEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableDiffEditor;\n            }\n        }\n        else {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableEditor;\n            }\n        }\n        const turnOnMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.changeConfigToOnMac\n            : AccessibilityHelpNLS.changeConfigToOnWinLinux);\n        switch (options.get(2 /* EditorOption.accessibilitySupport */)) {\n            case 0 /* AccessibilitySupport.Unknown */:\n                text += '\\n\\n - ' + turnOnMessage;\n                break;\n            case 2 /* AccessibilitySupport.Enabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n                break;\n            case 1 /* AccessibilitySupport.Disabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n                text += ' ' + turnOnMessage;\n                break;\n        }\n        if (options.get(132 /* EditorOption.tabFocusMode */)) {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n        }\n        else {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n        }\n        const openDocMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.openDocMac\n            : AccessibilityHelpNLS.openDocWinLinux);\n        text += '\\n\\n - ' + openDocMessage;\n        text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n        this._contentDomNode.domNode.appendChild(renderFormattedText(text));\n        // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n        this._contentDomNode.domNode.setAttribute('aria-label', text);\n    }\n    hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._isVisibleKey.reset();\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode.domNode.tabIndex = -1;\n        dom.clearNode(this._contentDomNode.domNode);\n        this._editor.focus();\n    }\n    _layout() {\n        const editorLayout = this._editor.getLayoutInfo();\n        const w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n        const h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n        this._domNode.setWidth(w);\n        this._domNode.setHeight(h);\n        const top = Math.round((editorLayout.height - h) / 2);\n        this._domNode.setTop(top);\n        const left = Math.round((editorLayout.width - w) / 2);\n        this._domNode.setLeft(left);\n    }\n};\nAccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\nAccessibilityHelpWidget.WIDTH = 500;\nAccessibilityHelpWidget.HEIGHT = 300;\nAccessibilityHelpWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IKeybindingService),\n    __param(3, IOpenerService)\n], AccessibilityHelpWidget);\nclass ShowAccessibilityHelpAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showAccessibilityHelp',\n            label: AccessibilityHelpNLS.showAccessibilityHelpAction,\n            alias: 'Show Accessibility Help',\n            precondition: undefined,\n            kbOpts: {\n                primary: 512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                linux: {\n                    primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 59 /* KeyCode.F1 */,\n                    secondary: [512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */]\n                }\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = AccessibilityHelpController.get(editor);\n        if (controller) {\n            controller.show();\n        }\n    }\n}\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\nconst AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\nregisterEditorCommand(new AccessibilityHelpCommand({\n    id: 'closeAccessibilityHelp',\n    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n    handler: x => x.hide(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 100,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(83 /* EditorOption.readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* CharCode.Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* CharCode.Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* StandardTokenType.Other */: return 'Other';\n            case 1 /* StandardTokenType.Comment */: return 'Comment';\n            case 2 /* StandardTokenType.String */: return 'String';\n            case 3 /* StandardTokenType.RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* FontStyle.Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* FontStyle.Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* FontStyle.Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* FontStyle.Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { localize } from '../../../nls.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { Extensions } from '../common/quickAccess.js';\nimport { IQuickInputService } from '../common/quickInput.js';\nlet HelpQuickAccessProvider = class HelpQuickAccessProvider {\n    constructor(quickInputService, keybindingService) {\n        this.quickInputService = quickInputService;\n        this.keybindingService = keybindingService;\n        this.registry = Registry.as(Extensions.Quickaccess);\n    }\n    provide(picker) {\n        const disposables = new DisposableStore();\n        // Open a picker with the selected value if picked\n        disposables.add(picker.onDidAccept(() => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                this.quickInputService.quickAccess.show(item.prefix, { preserveValue: true });\n            }\n        }));\n        // Also open a picker when we detect the user typed the exact\n        // name of a provider (e.g. `?term` for terminals)\n        disposables.add(picker.onDidChangeValue(value => {\n            const providerDescriptor = this.registry.getQuickAccessProvider(value.substr(HelpQuickAccessProvider.PREFIX.length));\n            if (providerDescriptor && providerDescriptor.prefix && providerDescriptor.prefix !== HelpQuickAccessProvider.PREFIX) {\n                this.quickInputService.quickAccess.show(providerDescriptor.prefix, { preserveValue: true });\n            }\n        }));\n        // Fill in all providers\n        picker.items = this.getQuickAccessProviders();\n        return disposables;\n    }\n    getQuickAccessProviders() {\n        const providers = [];\n        for (const provider of this.registry.getQuickAccessProviders().sort((providerA, providerB) => providerA.prefix.localeCompare(providerB.prefix))) {\n            if (provider.prefix === HelpQuickAccessProvider.PREFIX) {\n                continue; // exclude help which is already active\n            }\n            for (const helpEntry of provider.helpEntries) {\n                const prefix = helpEntry.prefix || provider.prefix;\n                const label = prefix || '\\u2026' /* ... */;\n                providers.push({\n                    prefix,\n                    label,\n                    keybinding: helpEntry.commandId ? this.keybindingService.lookupKeybinding(helpEntry.commandId) : undefined,\n                    ariaLabel: localize('helpPickAriaLabel', \"{0}, {1}\", label, helpEntry.description),\n                    description: helpEntry.description\n                });\n            }\n        }\n        return providers;\n    }\n};\nHelpQuickAccessProvider.PREFIX = '?';\nHelpQuickAccessProvider = __decorate([\n    __param(0, IQuickInputService),\n    __param(1, IKeybindingService)\n], HelpQuickAccessProvider);\nexport { HelpQuickAccessProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: HelpQuickAccessProvider,\n    prefix: '',\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(62 /* EditorOption.lineNumbers */);\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n    constructor(editorService) {\n        super();\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: GoToLineNLS.gotoLineActionLabel,\n            alias: 'Go to Line/Column...',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.gotoLine';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoLineQuickAccessProvider,\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, commandId: GotoLineAction.ID }]\n});\n","import { createMatches as createFuzzyMatches, fuzzyScore } from './filters.js';\nimport { sep } from './path.js';\nimport { isWindows } from './platform.js';\nimport { stripWildcards } from './strings.js';\nconst NO_SCORE2 = [undefined, []];\nexport function scoreFuzzy2(target, query, patternStart = 0, wordStart = 0) {\n    // Score: multiple inputs\n    const preparedQuery = query;\n    if (preparedQuery.values && preparedQuery.values.length > 1) {\n        return doScoreFuzzy2Multiple(target, preparedQuery.values, patternStart, wordStart);\n    }\n    // Score: single input\n    return doScoreFuzzy2Single(target, query, patternStart, wordStart);\n}\nfunction doScoreFuzzy2Multiple(target, query, patternStart, wordStart) {\n    let totalScore = 0;\n    const totalMatches = [];\n    for (const queryPiece of query) {\n        const [score, matches] = doScoreFuzzy2Single(target, queryPiece, patternStart, wordStart);\n        if (typeof score !== 'number') {\n            // if a single query value does not match, return with\n            // no score entirely, we require all queries to match\n            return NO_SCORE2;\n        }\n        totalScore += score;\n        totalMatches.push(...matches);\n    }\n    // if we have a score, ensure that the positions are\n    // sorted in ascending order and distinct\n    return [totalScore, normalizeMatches(totalMatches)];\n}\nfunction doScoreFuzzy2Single(target, query, patternStart, wordStart) {\n    const score = fuzzyScore(query.original, query.originalLowercase, patternStart, target, target.toLowerCase(), wordStart, { firstMatchCanBeWeak: true, boostFullMatch: true });\n    if (!score) {\n        return NO_SCORE2;\n    }\n    return [score[0], createFuzzyMatches(score)];\n}\nconst NO_ITEM_SCORE = Object.freeze({ score: 0 });\nfunction normalizeMatches(matches) {\n    // sort matches by start to be able to normalize\n    const sortedMatches = matches.sort((matchA, matchB) => {\n        return matchA.start - matchB.start;\n    });\n    // merge matches that overlap\n    const normalizedMatches = [];\n    let currentMatch = undefined;\n    for (const match of sortedMatches) {\n        // if we have no current match or the matches\n        // do not overlap, we take it as is and remember\n        // it for future merging\n        if (!currentMatch || !matchOverlaps(currentMatch, match)) {\n            currentMatch = match;\n            normalizedMatches.push(match);\n        }\n        // otherwise we merge the matches\n        else {\n            currentMatch.start = Math.min(currentMatch.start, match.start);\n            currentMatch.end = Math.max(currentMatch.end, match.end);\n        }\n    }\n    return normalizedMatches;\n}\nfunction matchOverlaps(matchA, matchB) {\n    if (matchA.end < matchB.start) {\n        return false; // A ends before B starts\n    }\n    if (matchB.end < matchA.start) {\n        return false; // B ends before A starts\n    }\n    return true;\n}\n/*\n * If a query is wrapped in quotes, the user does not want to\n * use fuzzy search for this query.\n */\nfunction queryExpectsExactMatch(query) {\n    return query.startsWith('\"') && query.endsWith('\"');\n}\n/**\n * Helper function to prepare a search value for scoring by removing unwanted characters\n * and allowing to score on multiple pieces separated by whitespace character.\n */\nconst MULTIPLE_QUERY_VALUES_SEPARATOR = ' ';\nexport function prepareQuery(original) {\n    if (typeof original !== 'string') {\n        original = '';\n    }\n    const originalLowercase = original.toLowerCase();\n    const { pathNormalized, normalized, normalizedLowercase } = normalizeQuery(original);\n    const containsPathSeparator = pathNormalized.indexOf(sep) >= 0;\n    const expectExactMatch = queryExpectsExactMatch(original);\n    let values = undefined;\n    const originalSplit = original.split(MULTIPLE_QUERY_VALUES_SEPARATOR);\n    if (originalSplit.length > 1) {\n        for (const originalPiece of originalSplit) {\n            const expectExactMatchPiece = queryExpectsExactMatch(originalPiece);\n            const { pathNormalized: pathNormalizedPiece, normalized: normalizedPiece, normalizedLowercase: normalizedLowercasePiece } = normalizeQuery(originalPiece);\n            if (normalizedPiece) {\n                if (!values) {\n                    values = [];\n                }\n                values.push({\n                    original: originalPiece,\n                    originalLowercase: originalPiece.toLowerCase(),\n                    pathNormalized: pathNormalizedPiece,\n                    normalized: normalizedPiece,\n                    normalizedLowercase: normalizedLowercasePiece,\n                    expectContiguousMatch: expectExactMatchPiece\n                });\n            }\n        }\n    }\n    return { original, originalLowercase, pathNormalized, normalized, normalizedLowercase, values, containsPathSeparator, expectContiguousMatch: expectExactMatch };\n}\nfunction normalizeQuery(original) {\n    let pathNormalized;\n    if (isWindows) {\n        pathNormalized = original.replace(/\\//g, sep); // Help Windows users to search for paths when using slash\n    }\n    else {\n        pathNormalized = original.replace(/\\\\/g, sep); // Help macOS/Linux users to search for paths when using backslash\n    }\n    // we remove quotes here because quotes are used for exact match search\n    const normalized = stripWildcards(pathNormalized).replace(/\\s|\"/g, '');\n    return {\n        pathNormalized,\n        normalized,\n        normalizedLowercase: normalized.toLowerCase()\n    };\n}\nexport function pieceToQuery(arg1) {\n    if (Array.isArray(arg1)) {\n        return prepareQuery(arg1.map(piece => piece.original).join(MULTIPLE_QUERY_VALUES_SEPARATOR));\n    }\n    return prepareQuery(arg1.original);\n}\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arrays.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        var _a;\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = (positionToEnclose) => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                    if (positionToEnclose && query.original.length === 0) {\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n                        if (candidate) {\n                            picker.activeItems = [candidate];\n                        }\n                    }\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\n        // Reveal and decorate when active item changes\n        // However, ignore the very first two events so that\n        // opening the picker is not immediately revealing\n        // and decorating the first entry.\n        let ignoreFirstActiveEvent = 2;\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                if (ignoreFirstActiveEvent-- > 0) {\n                    return;\n                }\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel}  ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons: (() => {\n                        var _a, _b;\n                        const openSideBySideDirection = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) ? (_b = this.options) === null || _b === void 0 ? void 0 : _b.openSideBySideDirection() : undefined;\n                        if (!openSideBySideDirection) {\n                            return undefined;\n                        }\n                        return [\n                            {\n                                iconClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n                                tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                            }\n                        ];\n                    })()\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n    constructor(editorService, languageFeaturesService, outlineModelService) {\n        super(languageFeaturesService, outlineModelService);\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ILanguageFeaturesService),\n    __param(2, IOutlineModelService)\n], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nexport class GotoSymbolAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoSymbolAction.ID,\n            label: QuickOutlineNLS.quickOutlineActionLabel,\n            alias: 'Go to Symbol...',\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 3\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX);\n    }\n}\nGotoSymbolAction.ID = 'editor.action.quickOutline';\nregisterEditorAction(GotoSymbolAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    helpEntries: [\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, commandId: GotoSymbolAction.ID },\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY }\n    ]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from './arrays.js';\nimport * as types from './types.js';\nimport * as nls from '../../nls.js';\nfunction exceptionToErrorMessage(exception, verbose) {\n    if (verbose && (exception.stack || exception.stacktrace)) {\n        return nls.localize('stackTrace.format', \"{0}: {1}\", detectSystemErrorMessage(exception), stackToString(exception.stack) || stackToString(exception.stacktrace));\n    }\n    return detectSystemErrorMessage(exception);\n}\nfunction stackToString(stack) {\n    if (Array.isArray(stack)) {\n        return stack.join('\\n');\n    }\n    return stack;\n}\nfunction detectSystemErrorMessage(exception) {\n    // See https://nodejs.org/api/errors.html#errors_class_system_error\n    if (typeof exception.code === 'string' && typeof exception.errno === 'number' && typeof exception.syscall === 'string') {\n        return nls.localize('nodeExceptionMessage', \"A system error occurred ({0})\", exception.message);\n    }\n    return exception.message || nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n/**\n * Tries to generate a human readable error message out of the error. If the verbose parameter\n * is set to true, the error message will include stacktrace details if provided.\n *\n * @returns A string containing the error message.\n */\nexport function toErrorMessage(error = null, verbose = false) {\n    if (!error) {\n        return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n    }\n    if (Array.isArray(error)) {\n        const errors = arrays.coalesce(error);\n        const msg = toErrorMessage(errors[0], verbose);\n        if (errors.length > 1) {\n            return nls.localize('error.moreErrors', \"{0} ({1} errors in total)\", msg, errors.length);\n        }\n        return msg;\n    }\n    if (types.isString(error)) {\n        return error;\n    }\n    if (error.detail) {\n        const detail = error.detail;\n        if (detail.error) {\n            return exceptionToErrorMessage(detail.error, verbose);\n        }\n        if (detail.exception) {\n            return exceptionToErrorMessage(detail.exception, verbose);\n        }\n    }\n    if (error.stack) {\n        return exceptionToErrorMessage(error, verbose);\n    }\n    if (error.message) {\n        return error.message;\n    }\n    return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { timeout } from '../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nexport var TriggerAction;\n(function (TriggerAction) {\n    /**\n     * Do nothing after the button was clicked.\n     */\n    TriggerAction[TriggerAction[\"NO_ACTION\"] = 0] = \"NO_ACTION\";\n    /**\n     * Close the picker.\n     */\n    TriggerAction[TriggerAction[\"CLOSE_PICKER\"] = 1] = \"CLOSE_PICKER\";\n    /**\n     * Update the results of the picker.\n     */\n    TriggerAction[TriggerAction[\"REFRESH_PICKER\"] = 2] = \"REFRESH_PICKER\";\n    /**\n     * Remove the item from the picker.\n     */\n    TriggerAction[TriggerAction[\"REMOVE_ITEM\"] = 3] = \"REMOVE_ITEM\";\n})(TriggerAction || (TriggerAction = {}));\nfunction isPicksWithActive(obj) {\n    const candidate = obj;\n    return Array.isArray(candidate.items);\n}\nfunction isFastAndSlowPicks(obj) {\n    const candidate = obj;\n    return !!candidate.picks && candidate.additionalPicks instanceof Promise;\n}\nexport class PickerQuickAccessProvider extends Disposable {\n    constructor(prefix, options) {\n        super();\n        this.prefix = prefix;\n        this.options = options;\n    }\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const picksDisposable = disposables.add(new MutableDisposable());\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            const picksDisposables = picksDisposable.value = new DisposableStore();\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect picks and support both long running and short or combined\n            const picksToken = picksCts.token;\n            const picksFilter = picker.value.substr(this.prefix.length).trim();\n            const providedPicks = this._getPicks(picksFilter, picksDisposables, picksToken);\n            const applyPicks = (picks, skipEmpty) => {\n                var _a;\n                let items;\n                let activeItem = undefined;\n                if (isPicksWithActive(picks)) {\n                    items = picks.items;\n                    activeItem = picks.active;\n                }\n                else {\n                    items = picks;\n                }\n                if (items.length === 0) {\n                    if (skipEmpty) {\n                        return false;\n                    }\n                    if (picksFilter.length > 0 && ((_a = this.options) === null || _a === void 0 ? void 0 : _a.noResultsPick)) {\n                        items = [this.options.noResultsPick];\n                    }\n                }\n                picker.items = items;\n                if (activeItem) {\n                    picker.activeItems = [activeItem];\n                }\n                return true;\n            };\n            // No Picks\n            if (providedPicks === null) {\n                // Ignore\n            }\n            // Fast and Slow Picks\n            else if (isFastAndSlowPicks(providedPicks)) {\n                let fastPicksApplied = false;\n                let slowPicksApplied = false;\n                yield Promise.all([\n                    // Fast Picks: to reduce amount of flicker, we race against\n                    // the slow picks over 500ms and then set the fast picks.\n                    // If the slow picks are faster, we reduce the flicker by\n                    // only setting the items once.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        yield timeout(PickerQuickAccessProvider.FAST_PICKS_RACE_DELAY);\n                        if (picksToken.isCancellationRequested) {\n                            return;\n                        }\n                        if (!slowPicksApplied) {\n                            fastPicksApplied = applyPicks(providedPicks.picks, true /* skip over empty to reduce flicker */);\n                        }\n                    }))(),\n                    // Slow Picks: we await the slow picks and then set them at\n                    // once together with the fast picks, but only if we actually\n                    // have additional results.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        picker.busy = true;\n                        try {\n                            const awaitedAdditionalPicks = yield providedPicks.additionalPicks;\n                            if (picksToken.isCancellationRequested) {\n                                return;\n                            }\n                            let picks;\n                            let activePick = undefined;\n                            if (isPicksWithActive(providedPicks.picks)) {\n                                picks = providedPicks.picks.items;\n                                activePick = providedPicks.picks.active;\n                            }\n                            else {\n                                picks = providedPicks.picks;\n                            }\n                            let additionalPicks;\n                            let additionalActivePick = undefined;\n                            if (isPicksWithActive(awaitedAdditionalPicks)) {\n                                additionalPicks = awaitedAdditionalPicks.items;\n                                additionalActivePick = awaitedAdditionalPicks.active;\n                            }\n                            else {\n                                additionalPicks = awaitedAdditionalPicks;\n                            }\n                            if (additionalPicks.length > 0 || !fastPicksApplied) {\n                                // If we do not have any activePick or additionalActivePick\n                                // we try to preserve the currently active pick from the\n                                // fast results. This fixes an issue where the user might\n                                // have made a pick active before the additional results\n                                // kick in.\n                                // See https://github.com/microsoft/vscode/issues/102480\n                                let fallbackActivePick = undefined;\n                                if (!activePick && !additionalActivePick) {\n                                    const fallbackActivePickCandidate = picker.activeItems[0];\n                                    if (fallbackActivePickCandidate && picks.indexOf(fallbackActivePickCandidate) !== -1) {\n                                        fallbackActivePick = fallbackActivePickCandidate;\n                                    }\n                                }\n                                applyPicks({\n                                    items: [...picks, ...additionalPicks],\n                                    active: activePick || additionalActivePick || fallbackActivePick\n                                });\n                            }\n                        }\n                        finally {\n                            if (!picksToken.isCancellationRequested) {\n                                picker.busy = false;\n                            }\n                            slowPicksApplied = true;\n                        }\n                    }))()\n                ]);\n            }\n            // Fast Picks\n            else if (!(providedPicks instanceof Promise)) {\n                applyPicks(providedPicks);\n            }\n            // Slow Picks\n            else {\n                picker.busy = true;\n                try {\n                    const awaitedPicks = yield providedPicks;\n                    if (picksToken.isCancellationRequested) {\n                        return;\n                    }\n                    applyPicks(awaitedPicks);\n                }\n                finally {\n                    if (!picksToken.isCancellationRequested) {\n                        picker.busy = false;\n                    }\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Accept the pick on accept and hide picker\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (typeof (item === null || item === void 0 ? void 0 : item.accept) === 'function') {\n                if (!event.inBackground) {\n                    picker.hide(); // hide picker unless we accept in background\n                }\n                item.accept(picker.keyMods, event);\n            }\n        }));\n        // Trigger the pick with button index if button triggered\n        disposables.add(picker.onDidTriggerItemButton(({ button, item }) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            if (typeof item.trigger === 'function') {\n                const buttonIndex = (_c = (_b = item.buttons) === null || _b === void 0 ? void 0 : _b.indexOf(button)) !== null && _c !== void 0 ? _c : -1;\n                if (buttonIndex >= 0) {\n                    const result = item.trigger(buttonIndex, picker.keyMods);\n                    const action = (typeof result === 'number') ? result : yield result;\n                    if (token.isCancellationRequested) {\n                        return;\n                    }\n                    switch (action) {\n                        case TriggerAction.NO_ACTION:\n                            break;\n                        case TriggerAction.CLOSE_PICKER:\n                            picker.hide();\n                            break;\n                        case TriggerAction.REFRESH_PICKER:\n                            updatePickerItems();\n                            break;\n                        case TriggerAction.REMOVE_ITEM: {\n                            const index = picker.items.indexOf(item);\n                            if (index !== -1) {\n                                const items = picker.items.slice();\n                                const removed = items.splice(index, 1);\n                                const activeItems = picker.activeItems.filter(activeItem => activeItem !== removed[0]);\n                                const keepScrollPositionBefore = picker.keepScrollPosition;\n                                picker.keepScrollPosition = true;\n                                picker.items = items;\n                                if (activeItems) {\n                                    picker.activeItems = activeItems;\n                                }\n                                picker.keepScrollPosition = keepScrollPositionBefore;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n        })));\n        return disposables;\n    }\n}\nPickerQuickAccessProvider.FAST_PICKS_RACE_DELAY = 200; // timeout before we accept fast results before slow results are present\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { matchesContiguousSubString, matchesPrefix, matchesWords, or } from '../../../base/common/filters.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport Severity from '../../../base/common/severity.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { localize } from '../../../nls.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { PickerQuickAccessProvider } from './pickerQuickAccess.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nlet AbstractCommandsQuickAccessProvider = class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(AbstractCommandsQuickAccessProvider.PREFIX, options);\n        this.instantiationService = instantiationService;\n        this.keybindingService = keybindingService;\n        this.commandService = commandService;\n        this.telemetryService = telemetryService;\n        this.dialogService = dialogService;\n        this.commandsHistory = this._register(this.instantiationService.createInstance(CommandsHistory));\n        this.options = options;\n    }\n    _getPicks(filter, disposables, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Ask subclass for all command picks\n            const allCommandPicks = yield this.getCommandPicks(disposables, token);\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            // Filter\n            const filteredCommandPicks = [];\n            for (const commandPick of allCommandPicks) {\n                const labelHighlights = withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.label));\n                const aliasHighlights = commandPick.commandAlias ? withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.commandAlias)) : undefined;\n                // Add if matching in label or alias\n                if (labelHighlights || aliasHighlights) {\n                    commandPick.highlights = {\n                        label: labelHighlights,\n                        detail: this.options.showAlias ? aliasHighlights : undefined\n                    };\n                    filteredCommandPicks.push(commandPick);\n                }\n                // Also add if we have a 100% command ID match\n                else if (filter === commandPick.commandId) {\n                    filteredCommandPicks.push(commandPick);\n                }\n            }\n            // Add description to commands that have duplicate labels\n            const mapLabelToCommand = new Map();\n            for (const commandPick of filteredCommandPicks) {\n                const existingCommandForLabel = mapLabelToCommand.get(commandPick.label);\n                if (existingCommandForLabel) {\n                    commandPick.description = commandPick.commandId;\n                    existingCommandForLabel.description = existingCommandForLabel.commandId;\n                }\n                else {\n                    mapLabelToCommand.set(commandPick.label, commandPick);\n                }\n            }\n            // Sort by MRU order and fallback to name otherwise\n            filteredCommandPicks.sort((commandPickA, commandPickB) => {\n                const commandACounter = this.commandsHistory.peek(commandPickA.commandId);\n                const commandBCounter = this.commandsHistory.peek(commandPickB.commandId);\n                if (commandACounter && commandBCounter) {\n                    return commandACounter > commandBCounter ? -1 : 1; // use more recently used command before older\n                }\n                if (commandACounter) {\n                    return -1; // first command was used, so it wins over the non used one\n                }\n                if (commandBCounter) {\n                    return 1; // other command was used so it wins over the command\n                }\n                // both commands were never used, so we sort by name\n                return commandPickA.label.localeCompare(commandPickB.label);\n            });\n            const commandPicks = [];\n            let addSeparator = false;\n            for (let i = 0; i < filteredCommandPicks.length; i++) {\n                const commandPick = filteredCommandPicks[i];\n                const keybinding = this.keybindingService.lookupKeybinding(commandPick.commandId);\n                const ariaLabel = keybinding ?\n                    localize('commandPickAriaLabelWithKeybinding', \"{0}, {1}\", commandPick.label, keybinding.getAriaLabel()) :\n                    commandPick.label;\n                // Separator: recently used\n                if (i === 0 && this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('recentlyUsed', \"recently used\") });\n                    addSeparator = true;\n                }\n                // Separator: other commands\n                if (i !== 0 && addSeparator && !this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('morecCommands', \"other commands\") });\n                    addSeparator = false; // only once\n                }\n                // Command\n                commandPicks.push(Object.assign(Object.assign({}, commandPick), { ariaLabel, detail: this.options.showAlias && commandPick.commandAlias !== commandPick.label ? commandPick.commandAlias : undefined, keybinding, accept: () => __awaiter(this, void 0, void 0, function* () {\n                        // Add to history\n                        this.commandsHistory.push(commandPick.commandId);\n                        // Telementry\n                        this.telemetryService.publicLog2('workbenchActionExecuted', {\n                            id: commandPick.commandId,\n                            from: 'quick open'\n                        });\n                        // Run\n                        try {\n                            yield this.commandService.executeCommand(commandPick.commandId);\n                        }\n                        catch (error) {\n                            if (!isCancellationError(error)) {\n                                this.dialogService.show(Severity.Error, localize('canNotRun', \"Command '{0}' resulted in an error ({1})\", commandPick.label, toErrorMessage(error)));\n                            }\n                        }\n                    }) }));\n            }\n            return commandPicks;\n        });\n    }\n};\nAbstractCommandsQuickAccessProvider.PREFIX = '>';\nAbstractCommandsQuickAccessProvider.WORD_FILTER = or(matchesPrefix, matchesWords, matchesContiguousSubString);\nAbstractCommandsQuickAccessProvider = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], AbstractCommandsQuickAccessProvider);\nexport { AbstractCommandsQuickAccessProvider };\nlet CommandsHistory = class CommandsHistory extends Disposable {\n    constructor(storageService, configurationService) {\n        super();\n        this.storageService = storageService;\n        this.configurationService = configurationService;\n        this.configuredCommandsHistoryLength = 0;\n        this.updateConfiguration();\n        this.load();\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.configurationService.onDidChangeConfiguration(() => this.updateConfiguration()));\n    }\n    updateConfiguration() {\n        this.configuredCommandsHistoryLength = CommandsHistory.getConfiguredCommandHistoryLength(this.configurationService);\n        if (CommandsHistory.cache && CommandsHistory.cache.limit !== this.configuredCommandsHistoryLength) {\n            CommandsHistory.cache.limit = this.configuredCommandsHistoryLength;\n            CommandsHistory.saveState(this.storageService);\n        }\n    }\n    load() {\n        const raw = this.storageService.get(CommandsHistory.PREF_KEY_CACHE, 0 /* StorageScope.PROFILE */);\n        let serializedCache;\n        if (raw) {\n            try {\n                serializedCache = JSON.parse(raw);\n            }\n            catch (error) {\n                // invalid data\n            }\n        }\n        const cache = CommandsHistory.cache = new LRUCache(this.configuredCommandsHistoryLength, 1);\n        if (serializedCache) {\n            let entries;\n            if (serializedCache.usesLRU) {\n                entries = serializedCache.entries;\n            }\n            else {\n                entries = serializedCache.entries.sort((a, b) => a.value - b.value);\n            }\n            entries.forEach(entry => cache.set(entry.key, entry.value));\n        }\n        CommandsHistory.counter = this.storageService.getNumber(CommandsHistory.PREF_KEY_COUNTER, 0 /* StorageScope.PROFILE */, CommandsHistory.counter);\n    }\n    push(commandId) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        CommandsHistory.cache.set(commandId, CommandsHistory.counter++); // set counter to command\n        CommandsHistory.saveState(this.storageService);\n    }\n    peek(commandId) {\n        var _a;\n        return (_a = CommandsHistory.cache) === null || _a === void 0 ? void 0 : _a.peek(commandId);\n    }\n    static saveState(storageService) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        const serializedCache = { usesLRU: true, entries: [] };\n        CommandsHistory.cache.forEach((value, key) => serializedCache.entries.push({ key, value }));\n        storageService.store(CommandsHistory.PREF_KEY_CACHE, JSON.stringify(serializedCache), 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n        storageService.store(CommandsHistory.PREF_KEY_COUNTER, CommandsHistory.counter, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    static getConfiguredCommandHistoryLength(configurationService) {\n        var _a, _b;\n        const config = configurationService.getValue();\n        const configuredCommandHistoryLength = (_b = (_a = config.workbench) === null || _a === void 0 ? void 0 : _a.commandPalette) === null || _b === void 0 ? void 0 : _b.history;\n        if (typeof configuredCommandHistoryLength === 'number') {\n            return configuredCommandHistoryLength;\n        }\n        return CommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH;\n    }\n};\nCommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH = 50;\nCommandsHistory.PREF_KEY_CACHE = 'commandPalette.mru.cache';\nCommandsHistory.PREF_KEY_COUNTER = 'commandPalette.mru.counter';\nCommandsHistory.counter = 1;\nCommandsHistory = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], CommandsHistory);\nexport { CommandsHistory };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n        this.codeEditorService = codeEditorService;\n    }\n    get activeTextEditorControl() { return withNullAsUndefined(this.codeEditorService.getFocusedCodeEditor()); }\n    getCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.getCodeEditorCommandPicks();\n        });\n    }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: QuickCommandNLS.quickCommandActionLabel,\n            alias: 'Command Palette',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'z_commands',\n                order: 1\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.quickCommand';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneCommandsQuickAccessProvider,\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, commandId: GotoLineAction.ID }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n    }\n};\nStandaloneReferencesController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ICodeEditorService),\n    __param(3, INotificationService),\n    __param(4, IInstantiationService),\n    __param(5, IStorageService),\n    __param(6, IConfigurationService)\n], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        const currentTheme = standaloneThemeService.getColorTheme();\n        if (isHighContrast(currentTheme.type)) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n            this._originalThemeName = null;\n        }\n        else {\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n            this._originalThemeName = currentTheme.themeName;\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n"],"mappings":"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"}