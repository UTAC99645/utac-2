{"version":3,"file":"placeholder-DGdHRTzJ.js","names":["CodeMirror"],"sources":["../../codemirror/addon/display/placeholder.js"],"sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function() { onComposition(cm) })\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose)\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function() {\n      var empty = false\n      if (cm.lineCount() == 1) {\n        var input = cm.getInputField()\n        empty = input.nodeName == \"TEXTAREA\" ? !cm.getLine(0).length\n          : !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent)\n      }\n      if (empty) setPlaceholder(cm)\n      else clearPlaceholder(cm)\n    }, 20)\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n});\n"],"mappings":";;;;;AAGA,EAAC,SAAS,KAAK;AACb,MAAI,OAAO,WAAW,YAAY,OAAO,UAAU,SACjD,0BAAoC;WAC7B,OAAO,UAAU,cAAc,OAAO,IAC7C,QAAO,CAAC,uBAAuB,EAAE,IAAI;MAErC,KAAI,WAAW;IAChB,SAAS,cAAY;AACtB,eAAW,aAAa,eAAe,IAAI,SAAS,IAAI,KAAK,KAAK;GAChE,IAAI,OAAO,OAAO,OAAOA,aAAW;AACpC,OAAI,OAAO,CAAC,MAAM;AAChB,OAAG,GAAG,QAAQ,OAAO;AACrB,OAAG,GAAG,UAAU,SAAS;AACzB,OAAG,GAAG,WAAW,SAAS;AAC1B,iBAAW,GAAG,GAAG,eAAe,EAAE,qBAAqB,GAAG,MAAM,qBAAqB,WAAW;AAAE,mBAAc,GAAG;MAAG;AACtH,aAAS,GAAG;cACH,CAAC,OAAO,MAAM;AACvB,OAAG,IAAI,QAAQ,OAAO;AACtB,OAAG,IAAI,UAAU,SAAS;AAC1B,OAAG,IAAI,WAAW,SAAS;AAC3B,iBAAW,IAAI,GAAG,eAAe,EAAE,qBAAqB,GAAG,MAAM,mBAAmB;AACpF,qBAAiB,GAAG;IACpB,IAAI,UAAU,GAAG,mBAAmB;AACpC,YAAQ,YAAY,QAAQ,UAAU,QAAQ,qBAAqB,GAAG;;AAGxE,OAAI,OAAO,CAAC,GAAG,UAAU,CAAE,QAAO,GAAG;IACrC;EAEF,SAAS,iBAAiB,IAAI;AAC5B,OAAI,GAAG,MAAM,aAAa;AACxB,OAAG,MAAM,YAAY,WAAW,YAAY,GAAG,MAAM,YAAY;AACjE,OAAG,MAAM,cAAc;;;EAG3B,SAAS,eAAe,IAAI;AAC1B,oBAAiB,GAAG;GACpB,IAAI,MAAM,GAAG,MAAM,cAAc,SAAS,cAAc,MAAM;AAC9D,OAAI,MAAM,UAAU;AACpB,OAAI,MAAM,YAAY,GAAG,UAAU,YAAY;AAC/C,OAAI,YAAY;GAChB,IAAI,cAAc,GAAG,UAAU,cAAc;AAC7C,OAAI,OAAO,eAAe,SAAU,eAAc,SAAS,eAAe,YAAY;AACtF,OAAI,YAAY,YAAY;AAC5B,MAAG,QAAQ,UAAU,aAAa,KAAK,GAAG,QAAQ,UAAU,WAAW;;EAGzE,SAAS,cAAc,IAAI;AACzB,cAAW,WAAW;IACpB,IAAI,QAAQ;AACZ,QAAI,GAAG,WAAW,IAAI,GAAG;KACvB,IAAI,QAAQ,GAAG,eAAe;AAC9B,aAAQ,MAAM,YAAY,aAAa,CAAC,GAAG,QAAQ,EAAE,CAAC,SAClD,CAAC,YAAY,KAAK,MAAM,cAAc,mBAAmB,CAAC,YAAY;;AAE5E,QAAI,MAAO,gBAAe,GAAG;QACxB,kBAAiB,GAAG;MACxB,GAAG;;EAGR,SAAS,OAAO,IAAI;AAClB,OAAI,QAAQ,GAAG,CAAE,gBAAe,GAAG;;EAErC,SAAS,SAAS,IAAI;GACpB,IAAI,UAAU,GAAG,mBAAmB,EAAE,QAAQ,QAAQ,GAAG;AACzD,WAAQ,YAAY,QAAQ,UAAU,QAAQ,qBAAqB,GAAG,IAAI,QAAQ,sBAAsB;AAExG,OAAI,MAAO,gBAAe,GAAG;OACxB,kBAAiB,GAAG;;EAG3B,SAAS,QAAQ,IAAI;AACnB,UAAQ,GAAG,WAAW,KAAK,KAAO,GAAG,QAAQ,EAAE,KAAK;;GAEtD"}